local mEvaF={[1]="\65\99\101\65\100\100\111\110\45\51\46\48",[2]="\68\97\119\110\84\111\111\108\115",[3]="\68\97\119\110\83\116\114\105\110\103\83\101\110\100\101\114",[4]="\65\99\101\69\118\101\110\116\45\51\46\48",[5]="\65\99\101\72\111\111\107\45\51\46\48",[6]="\65\99\101\67\111\110\115\111\108\101\45\51\46\48",[7]="\83\116\100\85\105",[8]="\88\70\71\56\75\80\87\90\109\113\114\115\116\117\118\119\120\121\122\48\49\65\66\67\68\69\50\51\52\53\54\55\72\73\78\79\81\82\83\84\85\86\74\89\76\77\98\99\100\101\102\103\104\105\106\107\108\110\111\112\97\57\43\47",[9]="\68\97\119\110\84\111\111\108\115\50\48\50\53",[10]=20,[11]=0.5,[12]=1,[13]="\61",[14]=0,[15]="\61",[16]=nil,[17]="\73\110\118\97\108\105\100\32\99\104\97\114\97\99\116\101\114\32\105\110\32\101\110\99\111\100\101\100\32\115\116\114\105\110\103",[18]=64,[19]=6,[20]=8,[21]=2,[22]=256,[23]="",[24]="\69\109\112\116\121\32\105\110\112\117\116",[25]="\97",[26]="\73\110\118\97\108\105\100\32\118\101\114\115\105\111\110\32\40\101\120\112\101\99\116\101\100\32\39\97\39\41",[27]="\58",[28]=true,[29]="\73\110\118\97\108\105\100\32\100\97\116\97",[30]="\73\110\118\97\108\105\100\32\100\97\116\97",[31]="\80\76\65\89\69\82\95\77\79\78\69\89",[32]="\79\110\69\118\101\110\116",[33]="\77\65\73\76\95\70\65\73\76\69\68",[34]="\79\110\69\118\101\110\116",[35]="\80\76\65\89\69\82\95\73\78\84\69\82\65\67\84\73\79\78\95\77\65\78\65\71\69\82\95\70\82\65\77\69\95\72\73\68\69",[36]="\79\110\69\118\101\110\116",[37]=false,[38]=500,[39]=400,[40]="\68\97\119\110\32\68\101\112\111\115\105\116\32\83\101\110\100\101\114",[41]="\67\69\78\84\69\82",[42]="\67\69\78\84\69\82",[43]="\66\79\84\84\79\77\82\73\71\72\84",[44]="\84\79\80\76\69\70\84",[45]=300,[46]=480,[47]="\69\110\116\101\114\32\115\116\114\105\110\103\32\116\111\32\115\101\110\100",[48]=10,[49]=50,[50]=100,[51]=30,[52]="\86\97\108\105\100\97\116\101",[53]="\67\69\78\84\69\82",[54]="\79\110\67\108\105\99\107",[55]=32,[56]="\67\69\78\84\69\82",[57]="\82\73\71\72\84",[58]="\79\110\77\111\117\115\101\68\111\119\110",[59]="\73\110\118\97\108\105\100\32\100\97\116\97",[60]="\73\110\118\97\108\105\100\32\100\97\116\97",[61]=946684800,[62]=4102444800,[63]="\73\110\118\97\108\105\100\32\100\97\116\97",[64]=15,[65]=60,[66]="\84\104\105\115\32\115\116\114\105\110\103\32\105\115\32\116\111\111\32\111\108\100\44\32\103\101\110\101\114\97\116\101\32\97\32\110\101\119\32\111\110\101",[67]="\33\37\89\45\37\109\45\37\100\32\37\72\58\37\77\58\37\83",[68]="\94\37\115\42\40\46\45\41\37\115\42\36",[69]="\73\110\118\97\108\105\100\32\100\97\116\97",[70]="\94\40\91\94\45\93\43\41\45\40\46\43\41\36",[71]="\73\110\118\97\108\105\100\32\100\97\116\97",[72]="\73\110\118\97\108\105\100\32\100\97\116\97",[73]="\73\110\118\97\108\105\100\32\100\97\116\97",[74]="\73\110\118\97\108\105\100\32\100\97\116\97",[75]=10000,[76]=4,[77]="\58",[78]=5,[79]="\73\110\118\97\108\105\100\32\102\111\114\109\97\116",[80]="\68\101\112\111\115\105\116\32\83\101\110\100\101\114\124\114\58\32\124\99\70\70\70\70\48\48\48\48\76\105\110\101\32",[81]="\58\32",[82]="\117\110\107\110\111\119\110\32\101\114\114\111\114",[83]="\124\114",[84]=3,[85]="\68\101\112\111\115\105\116\32\83\101\110\100\101\114\124\114\58\32\124\99\70\70\70\70\48\48\48\48\76\105\110\101\32",[86]="\58\32",[87]="\124\114",[88]="\68\101\112\111\115\105\116\32\83\101\110\100\101\114\124\114\58\32\124\99\70\70\70\70\48\48\48\48\78\111\32\105\110\112\117\116\32\112\114\111\118\105\100\101\100\124\114",[89]="\68\101\112\111\115\105\116\32\83\101\110\100\101\114\124\114\58\32\124\99\70\70\70\70\48\48\48\48\80\108\101\97\115\101\32\119\97\105\116\32\98\101\102\111\114\101\32\99\108\105\99\107\105\110\103\32\97\103\97\105\110\124\114",[90]="\68\101\112\111\115\105\116\32\83\101\110\100\101\114\124\114\58\32\124\99\70\70\70\70\48\48\48\48\77\97\105\108\98\111\120\32\109\117\115\116\32\98\101\32\111\112\101\110\32\116\111\32\115\101\110\100\32\109\97\105\108\124\114",[91]="\68\101\112\111\115\105\116\32\83\101\110\100\101\114\124\114\58\32\124\99\70\70\70\70\48\48\48\48\65\108\114\101\97\100\121\32\115\101\110\100\105\110\103\32\109\97\105\108\44\32\112\108\101\97\115\101\32\119\97\105\116\124\114",[92]="\68\101\112\111\115\105\116\32\83\101\110\100\101\114\124\114\58\32\80\97\114\115\105\110\103\32\105\110\112\117\116\46\46\46",[93]="\68\101\112\111\115\105\116\32\83\101\110\100\101\114\124\114\58\32\124\99\70\70\48\48\70\70\48\48\83\117\99\99\101\115\115\102\117\108\108\121\32\112\97\114\115\101\100\32",[94]="\32\101\110\116\114\105\101\115\124\114",[95]="\68\101\112\111\115\105\116\32\83\101\110\100\101\114\124\114\58\32\124\99\70\70\70\70\48\48\48\48",[96]="\32\101\110\116\114\105\101\115\32\102\97\105\108\101\100\32\116\111\32\112\97\114\115\101\124\114",[97]="\68\101\112\111\115\105\116\32\83\101\110\100\101\114\124\114\58\32\78\111\32\101\110\116\114\105\101\115\32\102\111\117\110\100",[98]="\68\101\112\111\115\105\116\32\83\101\110\100\101\114\124\114\58\32\124\99\70\70\70\70\48\48\48\48\78\111\116\32\101\110\111\117\103\104\32\103\111\108\100\46\32\78\101\101\100\58\32",[99]="\103\44\32\72\97\118\101\58\32",[100]="\103\124\114",[101]="\68\101\112\111\115\105\116\32\83\101\110\100\101\114\124\114\58\32\83\116\97\114\116\105\110\103\32\109\97\105\108\32\115\101\110\100\46\46\46",[102]="\112\108\97\121\101\114",[103]="\45",[104]="\68\101\112\111\115\105\116\32\83\101\110\100\101\114\124\114\58\32\124\99\70\70\70\70\48\48\48\48\78\111\116\32\101\110\111\117\103\104\32\103\111\108\100\32\116\111\32\99\111\110\116\105\110\117\101\46\124\114",[105]="\68\101\112\111\115\105\116\32\83\101\110\100\101\114\124\114\58\32\67\117\114\114\101\110\116\32\112\108\97\121\101\114\58\32",[106]="\44\32\103\111\108\100\58\32",[107]="\68\101\112\111\115\105\116\32\83\101\110\100\101\114\124\114\58\32\65\108\108\32\100\111\110\101\33",[108]="\68\101\112\111\115\105\116\32\83\101\110\100\101\114\124\114\58\32\124\99\70\70\70\70\48\48\48\48\83\101\110\100\32\116\105\109\101\100\32\111\117\116\32\40\110\111\32\114\101\115\112\111\110\115\101\32\97\102\116\101\114\32\50\48\32\115\101\99\111\110\100\115\41\124\114",[109]="\68\101\112\111\115\105\116\32\83\101\110\100\101\114\124\114\58\32\124\99\70\70\70\70\48\48\48\48\83\107\105\112\112\105\110\103\32",[110]="\124\114",[111]="\80\76\65\89\69\82\95\77\79\78\69\89",[112]=100000,[113]="\68\101\112\111\115\105\116\32\83\101\110\100\101\114\124\114\58\32\124\99\70\70\70\70\65\65\48\48\73\103\110\111\114\105\110\103\32\117\110\114\101\108\97\116\101\100\32\109\111\110\101\121\32\99\104\97\110\103\101\46\32\69\120\112\101\99\116\101\100\58\32",[114]="\103\44\32\68\101\116\101\99\116\101\100\58\32",[115]="\103\124\114",[116]="\68\101\112\111\115\105\116\32\83\101\110\100\101\114\124\114\58\32\124\99\70\70\48\48\70\70\48\48\83\101\110\116\32",[117]="\32\103\111\108\100\32\116\111\32\112\108\97\121\101\114\32",[118]="\32\40",[119]="\32\111\102\32",[120]="\41\124\114",[121]="\77\65\73\76\95\70\65\73\76\69\68",[122]="\68\101\112\111\115\105\116\32\83\101\110\100\101\114\124\114\58\32\124\99\70\70\70\70\48\48\48\48\70\97\105\108\101\100\32\116\111\32\115\101\110\100\32",[123]="\32\103\111\108\100\124\114",[124]="\80\76\65\89\69\82\95\73\78\84\69\82\65\67\84\73\79\78\95\77\65\78\65\71\69\82\95\70\82\65\77\69\95\72\73\68\69",[125]=17,[126]="\68\101\112\111\115\105\116\32\83\101\110\100\101\114\124\114\58\32\124\99\70\70\70\70\48\48\48\48\77\97\105\108\98\111\120\32\99\108\111\115\101\100\46\32\65\98\111\114\116\105\110\103\32\115\101\110\100\32\97\102\116\101\114\32",[127]="\32\111\102\32",[128]="\32\109\97\105\108\115\32\115\101\110\116\46\124\114",[129]="\68\101\112\111\115\105\116\32\83\101\110\100\101\114\124\114\58\32\124\99\70\70\70\70\48\48\48\48\78\111\32\105\110\112\117\116\32\112\114\111\118\105\100\101\100\124\114",[130]="\76\105\110\101\32\37\100\58\32\37\115",[131]="\117\110\107\110\111\119\110\32\101\114\114\111\114",[132]="\76\105\110\101\32\37\100\58\32\37\115",[133]="\86\65\76\73\68\32\83\84\82\73\78\71\83\32\40",[134]="\41\58",[135]="\37\100\32\103\111\108\100\32\100\101\112\111\115\105\116\101\100\32\116\111\32\37\115",[136]="\69\82\82\79\82\83\32\40",[137]="\41\58",[138]="\78\111\32\101\110\116\114\105\101\115\32\102\111\117\110\100",[139]="\68\101\112\111\115\105\116\32\83\101\110\100\101\114\124\114\58\32\83\104\111\119\105\110\103\32",[140]="\32\118\97\108\105\100\44\32",[141]="\32\101\114\114\111\114\115",[142]="\68\97\119\110\32\68\101\112\111\115\105\116\32\83\101\110\100\101\114",[143]="\67\69\78\84\69\82",[144]="\67\69\78\84\69\82",[145]="\66\79\84\84\79\77\82\73\71\72\84",[146]="\84\79\80\76\69\70\84",[147]="\77\97\107\101\32\115\117\114\101\32\121\111\117\32\97\114\101\32\104\97\112\112\121\32\119\105\116\104\32\116\104\101\32\98\101\108\111\119\58",[148]="\83\101\110\100\32\77\97\105\108",[149]="\67\69\78\84\69\82",[150]="\79\110\69\110\116\101\114",[151]="\65\78\67\72\79\82\95\84\79\80",[152]="\67\108\105\99\107\32\39\66\97\99\107\39\32\116\111\32\115\101\110\100\32\97\103\97\105\110",[153]="\79\110\76\101\97\118\101",[154]="\79\110\67\108\105\99\107",[155]="\83\101\110\116",[156]="\66\97\99\107",[157]="\67\69\78\84\69\82",[158]="\79\110\67\108\105\99\107",[159]="\83\101\110\100\32\77\97\105\108",[160]="\67\69\78\84\69\82",[161]="\82\73\71\72\84",[162]="\79\110\77\111\117\115\101\68\111\119\110",[163]="\88\70\85\53\75\52\55\48\82\32\49\53\32\52\87\51\53\48\77\51\46\32\75\82\51\68\49\55\32\55\48\32\88\70\85\53\75\52\55\48\82\33"}local nnFLt7EAwVsRAvR=LibStub(mEvaF[1]):GetAddon(mEvaF[2])local bEMk4ciaCDGJCY5=nnFLt7EAwVsRAvR:NewModule(mEvaF[3],mEvaF[4],mEvaF[5],mEvaF[6])local QuFg7yAB=LibStub(mEvaF[7])local jPyqLckx68O=mEvaF[8]local AU0KzqsH66=mEvaF[9]local aaxfpE870t=mEvaF[10]local kt9NKIsqCLr=mEvaF[11]local function mJEg6viseHx_tANUQY(hStUTQNUoef2y)local aK4ASkxqcaQY={}for i=mEvaF[12],#jPyqLckx68O do aK4ASkxqcaQY[string.sub(jPyqLckx68O,i,i)]=i-mEvaF[12]end;aK4ASkxqcaQY[mEvaF[13]]=mEvaF[14]local IFp9SCVh0iCeKAXGB3o={}local t4tOFXPG2Rh5Jr77658=mEvaF[14]local z9VyydyTkyKV=mEvaF[14]for i=mEvaF[12],#hStUTQNUoef2y do local gu0JMAr=string.sub(hStUTQNUoef2y,i,i)if gu0JMAr==mEvaF[15]then break end;local xYaF=aK4ASkxqcaQY[gu0JMAr]if not xYaF then return mEvaF[16],mEvaF[17]end;z9VyydyTkyKV=z9VyydyTkyKV*mEvaF[18]+xYaF;t4tOFXPG2Rh5Jr77658=t4tOFXPG2Rh5Jr77658 +mEvaF[19]if t4tOFXPG2Rh5Jr77658 >=mEvaF[20]then t4tOFXPG2Rh5Jr77658=t4tOFXPG2Rh5Jr77658 -mEvaF[20]table.insert(IFp9SCVh0iCeKAXGB3o,string.char(math.floor(z9VyydyTkyKV/ (mEvaF[21]^t4tOFXPG2Rh5Jr77658))%mEvaF[22]))z9VyydyTkyKV=z9VyydyTkyKV% (mEvaF[21]^t4tOFXPG2Rh5Jr77658)end end;return table.concat(IFp9SCVh0iCeKAXGB3o)end;local function m81eGyoB4PgyACI17(T7H)local g_PvFG62b0VAb2HjG8={}local HR9qp5qZlvXN=#AU0KzqsH66;for i=mEvaF[12],#T7H do local FCls=string.byte(T7H,i)local c=string.byte(AU0KzqsH66,( (i-mEvaF[12])%HR9qp5qZlvXN)+mEvaF[12])table.insert(g_PvFG62b0VAb2HjG8,string.char(bit.bxor(FCls,c)))end;return table.concat(g_PvFG62b0VAb2HjG8)end;local function O7K15Cam7S8z_nE(kK80AkvkY7w)if not kK80AkvkY7w or kK80AkvkY7w==mEvaF[23]then return mEvaF[16],mEvaF[24]end;local XA7Sr_Ig5KWzdCVS=string.sub(kK80AkvkY7w,mEvaF[12],mEvaF[12])if XA7Sr_Ig5KWzdCVS~=mEvaF[25]then return mEvaF[16],mEvaF[26]end;local c_TO=string.sub(kK80AkvkY7w,mEvaF[21])local KBU,WS7D8ALh=mJEg6viseHx_tANUQY(c_TO)if not KBU then return mEvaF[16],WS7D8ALh end;local D6391M1akDYQ38tNHVh=m81eGyoB4PgyACI17(KBU)local kEShBC3GmWVXL8VBU_t=string.find(D6391M1akDYQ38tNHVh,mEvaF[27],mEvaF[12],mEvaF[28])if not kEShBC3GmWVXL8VBU_t then return mEvaF[16],mEvaF[29]end;local i5MoY1G0=string.sub(D6391M1akDYQ38tNHVh,mEvaF[12],kEShBC3GmWVXL8VBU_t-mEvaF[12])local qYFtw6PoZYUQI=string.sub(D6391M1akDYQ38tNHVh,kEShBC3GmWVXL8VBU_t+mEvaF[12])local RSqn_YV8x=nnFLt7EAwVsRAvR.mailLogger:Adler32(qYFtw6PoZYUQI)if i5MoY1G0 ~=RSqn_YV8x then return mEvaF[16],mEvaF[30]end;return qYFtw6PoZYUQI end;function bEMk4ciaCDGJCY5:OnEnable()self:RegisterEvent(mEvaF[31],mEvaF[32])self:RegisterEvent(mEvaF[33],mEvaF[34])self:RegisterEvent(mEvaF[35],mEvaF[36])self.db=nnFLt7EAwVsRAvR.db.global.maillog;self.scheduled={}self.activelySending=mEvaF[37]self.currentSendIndex=mEvaF[12]self.lastSendTime=mEvaF[14]self.sendTimeout=mEvaF[16]self.expectedMoneyChange=mEvaF[14]self.moneyBeforeSend=mEvaF[14]end;function bEMk4ciaCDGJCY5:OpenPanel()if(self.sendWindow==mEvaF[16])then self:DrawWindow()else self.sendWindow:Show()end end;function bEMk4ciaCDGJCY5:IsVisible()return self.sendWindow and self.sendWindow:IsVisible()end;function bEMk4ciaCDGJCY5:Hide()if self.sendWindow then self.sendWindow:Hide()end end;function bEMk4ciaCDGJCY5:DrawWindow()local wpqx9rgPA7GkA7DSnJ;wpqx9rgPA7GkA7DSnJ=QuFg7yAB:Window(UIParent,mEvaF[38],mEvaF[39],mEvaF[40])wpqx9rgPA7GkA7DSnJ:SetPoint(mEvaF[41],UIParent,mEvaF[42],mEvaF[14],mEvaF[14])QuFg7yAB:MakeResizable(wpqx9rgPA7GkA7DSnJ,mEvaF[43])QuFg7yAB:MakeResizable(wpqx9rgPA7GkA7DSnJ,mEvaF[44])wpqx9rgPA7GkA7DSnJ:SetResizeBounds(mEvaF[39],mEvaF[45])self.sendWindow=wpqx9rgPA7GkA7DSnJ;local tAGFVOIQWonfwnUGVIR8=QuFg7yAB:MultiLineBox(wpqx9rgPA7GkA7DSnJ,mEvaF[46],mEvaF[45],mEvaF[16])QuFg7yAB:AddLabel(wpqx9rgPA7GkA7DSnJ,tAGFVOIQWonfwnUGVIR8,mEvaF[47])QuFg7yAB:GlueAcross(tAGFVOIQWonfwnUGVIR8,wpqx9rgPA7GkA7DSnJ,mEvaF[48],-mEvaF[49],-mEvaF[48],mEvaF[49])tAGFVOIQWonfwnUGVIR8:SetFocus()local wstHtgxa=QuFg7yAB:Button(wpqx9rgPA7GkA7DSnJ,mEvaF[50],mEvaF[51],mEvaF[52])QuFg7yAB:GlueBottom(wstHtgxa,wpqx9rgPA7GkA7DSnJ,mEvaF[14],mEvaF[48],mEvaF[53])wstHtgxa:SetScript(mEvaF[54],function()bEMk4ciaCDGJCY5:ShowValidationWindow()end)self.sendWindow.validateButton=wstHtgxa;self.sendWindow.inputBox=tAGFVOIQWonfwnUGVIR8;local om=QuFg7yAB:Frame(wpqx9rgPA7GkA7DSnJ,mEvaF[55],mEvaF[55])local VUKs=QuFg7yAB:Texture(om,mEvaF[55],mEvaF[55],nnFLt7EAwVsRAvR.LogoPath)QuFg7yAB:GlueTop(VUKs,om,mEvaF[14],mEvaF[14],mEvaF[56])QuFg7yAB:GlueBottom(om,wpqx9rgPA7GkA7DSnJ,-mEvaF[48],mEvaF[48],mEvaF[57])wpqx9rgPA7GkA7DSnJ:SetFrameLevel(nnFLt7EAwVsRAvR:GetNextFrameLevel())wpqx9rgPA7GkA7DSnJ:SetScript(mEvaF[58],function(fcsVBghf3)fcsVBghf3:SetFrameLevel(nnFLt7EAwVsRAvR:GetNextFrameLevel())end)end;function bEMk4ciaCDGJCY5:ValidateTimestamp(ltgH9ZY47TKZhgiAdrza)if not ltgH9ZY47TKZhgiAdrza or ltgH9ZY47TKZhgiAdrza==mEvaF[23]then return mEvaF[16],mEvaF[59]end;local ROEBSclkI0zWdse5YGicQ=tonumber(ltgH9ZY47TKZhgiAdrza)if not ROEBSclkI0zWdse5YGicQ then return mEvaF[16],mEvaF[60]end;if ROEBSclkI0zWdse5YGicQ<mEvaF[61]or ROEBSclkI0zWdse5YGicQ>mEvaF[62]then return mEvaF[16],mEvaF[63]end;local atq1=GetServerTime()local T86LVJ8W4b2E=mEvaF[64]*mEvaF[65]local v1BasNDcgqjJbYH_p=atq1 -ROEBSclkI0zWdse5YGicQ;if v1BasNDcgqjJbYH_p>T86LVJ8W4b2E then return mEvaF[16],mEvaF[66]end;local yBnZw=date(mEvaF[67],ROEBSclkI0zWdse5YGicQ)return yBnZw,ROEBSclkI0zWdse5YGicQ end;function bEMk4ciaCDGJCY5:ValidateEntry(r,xkNVKIFO3l8cz83XulLhR,FlVEfJJkkANB,tO1nblmXi8Ep_vV,anBc5w7u8yyHB2gVO)local P4RQR0ZytBITvOsB,z7lQ_CpZTZP=self:ValidateTimestamp(r)if not P4RQR0ZytBITvOsB then return mEvaF[37],z7lQ_CpZTZP end;xkNVKIFO3l8cz83XulLhR=xkNVKIFO3l8cz83XulLhR and xkNVKIFO3l8cz83XulLhR:match(mEvaF[68])or mEvaF[23]if not xkNVKIFO3l8cz83XulLhR or xkNVKIFO3l8cz83XulLhR==mEvaF[23]then return mEvaF[37],mEvaF[69]end;local Ksk,Vt1ukMo16dJoLJLN=xkNVKIFO3l8cz83XulLhR:match(mEvaF[70])if not Ksk or not Vt1ukMo16dJoLJLN then return mEvaF[37],mEvaF[71]end;local cWxwIuYPY=Ksk:lower()local PzOHge177D8QxaFC6mSz=nnFLt7EAwVsRAvR.realmLookup.BANK_ALLY:lower()local pPF=nnFLt7EAwVsRAvR.realmLookup.BANK_HORDE:lower()local U_T6qUErCTjUO=tonumber(FlVEfJJkkANB)if not U_T6qUErCTjUO or U_T6qUErCTjUO<=mEvaF[14]then return mEvaF[37],mEvaF[72]end;if not tO1nblmXi8Ep_vV then return mEvaF[37],mEvaF[73]end;if not anBc5w7u8yyHB2gVO then return mEvaF[37],mEvaF[74]end;return mEvaF[28],{timestamp=P4RQR0ZytBITvOsB,timestampRaw=z7lQ_CpZTZP,recipient=xkNVKIFO3l8cz83XulLhR,gold=U_T6qUErCTjUO*mEvaF[75],subject=tO1nblmXi8Ep_vV,body=anBc5w7u8yyHB2gVO}end;local function KDAbfLfQSUN(FkG1qcI)local ddg5yeDrsd,vk8xW8eg12kxREJpv=O7K15Cam7S8z_nE(FkG1qcI)if not ddg5yeDrsd then return mEvaF[16],vk8xW8eg12kxREJpv end;local Qtx9UUzIu91D={}local M0IV3mC9ggm=mEvaF[12]for _=mEvaF[12],mEvaF[76]do local x4t=string.find(ddg5yeDrsd,mEvaF[77],M0IV3mC9ggm,mEvaF[28])if not x4t then break end;table.insert(Qtx9UUzIu91D,string.sub(ddg5yeDrsd,M0IV3mC9ggm,x4t-mEvaF[12]))M0IV3mC9ggm=x4t+mEvaF[12]end;table.insert(Qtx9UUzIu91D,string.sub(ddg5yeDrsd,M0IV3mC9ggm))if#Qtx9UUzIu91D<mEvaF[78]then return mEvaF[16],mEvaF[79]end;return Qtx9UUzIu91D,mEvaF[16]end;function bEMk4ciaCDGJCY5:ParseAndValidateInput(GDkbQjZR6g)wipe(self.scheduled)local jXYgInBCZiszhbC=mEvaF[14]local nWzYulVaS_ZU3LtIv=mEvaF[14]local bWzsuk=mEvaF[14]local WAmo6f=nnFLt7EAwVsRAvR.helperFunctions:ParseInput(GDkbQjZR6g)for VSxtC in WAmo6f do jXYgInBCZiszhbC=jXYgInBCZiszhbC+mEvaF[12]if VSxtC and VSxtC~=mEvaF[23]then local _ir09Py,kvdrdp8w22vyRrMZU9=KDAbfLfQSUN(VSxtC)if not _ir09Py then nnFLt7EAwVsRAvR:Print(nnFLt7EAwVsRAvR.ColorString..mEvaF[80]..jXYgInBCZiszhbC..mEvaF[81].. (kvdrdp8w22vyRrMZU9 or mEvaF[82])..mEvaF[83])bWzsuk=bWzsuk+mEvaF[12]else local Wwea=_ir09Py[mEvaF[12]]local P2qMEBCAIbKeQjQxj=_ir09Py[mEvaF[21]]local azqxMk5TIep4RRrG16=_ir09Py[mEvaF[84]]local DV0w7iCPdldxnuShcH2=_ir09Py[mEvaF[76]]local OeeF7B2dzkZo6W0cfN=_ir09Py[mEvaF[78]]local Nw7xQzD,T2Dld9W=self:ValidateEntry(Wwea,P2qMEBCAIbKeQjQxj,azqxMk5TIep4RRrG16,DV0w7iCPdldxnuShcH2,OeeF7B2dzkZo6W0cfN)if not Nw7xQzD then nnFLt7EAwVsRAvR:Print(nnFLt7EAwVsRAvR.ColorString..mEvaF[85]..jXYgInBCZiszhbC..mEvaF[86]..T2Dld9W..mEvaF[87])bWzsuk=bWzsuk+mEvaF[12]else T2Dld9W.rawInput=VSxtC;T2Dld9W.lineNumber=jXYgInBCZiszhbC;T2Dld9W.encodedString=VSxtC;table.insert(self.scheduled,T2Dld9W)nWzYulVaS_ZU3LtIv=nWzYulVaS_ZU3LtIv+mEvaF[12]end end end end;return nWzYulVaS_ZU3LtIv,bWzsuk end;function bEMk4ciaCDGJCY5:Start()local NnAVpAtFK6MXnW2=self.sendWindow.inputBox:GetText()if not NnAVpAtFK6MXnW2 or NnAVpAtFK6MXnW2 ==mEvaF[23]then nnFLt7EAwVsRAvR:Print(nnFLt7EAwVsRAvR.ColorString..mEvaF[88])return end;local Ys217GGoMpTjT6_ag3ykT=GetTime()if Ys217GGoMpTjT6_ag3ykT-self.lastSendTime<mEvaF[21]then nnFLt7EAwVsRAvR:Print(nnFLt7EAwVsRAvR.ColorString..mEvaF[89])return end;self.lastSendTime=Ys217GGoMpTjT6_ag3ykT;if not MailFrame or not MailFrame:IsVisible()then nnFLt7EAwVsRAvR:Print(nnFLt7EAwVsRAvR.ColorString..mEvaF[90])return end;if self.activelySending then nnFLt7EAwVsRAvR:Print(nnFLt7EAwVsRAvR.ColorString..mEvaF[91])return end;nnFLt7EAwVsRAvR:Print(nnFLt7EAwVsRAvR.ColorString..mEvaF[92])local _S8qElTb8M,zdZ4kElYtS=self:ParseAndValidateInput(NnAVpAtFK6MXnW2)if _S8qElTb8M>mEvaF[14]then nnFLt7EAwVsRAvR:Print(nnFLt7EAwVsRAvR.ColorString..mEvaF[93].._S8qElTb8M..mEvaF[94])end;if zdZ4kElYtS>mEvaF[14]then nnFLt7EAwVsRAvR:Print(nnFLt7EAwVsRAvR.ColorString..mEvaF[95]..zdZ4kElYtS..mEvaF[96])end;if _S8qElTb8M==mEvaF[14]and zdZ4kElYtS==mEvaF[14]then nnFLt7EAwVsRAvR:Print(nnFLt7EAwVsRAvR.ColorString..mEvaF[97])return end;if _S8qElTb8M==mEvaF[14]then return end;local Gv7L6c6O6CMarPQx=mEvaF[14]for zvrEnFm,nTI2qVF_GMHvOk1k6 in ipairs(self.scheduled)do Gv7L6c6O6CMarPQx=Gv7L6c6O6CMarPQx+nTI2qVF_GMHvOk1k6.gold end;if GetMoney()<Gv7L6c6O6CMarPQx then nnFLt7EAwVsRAvR:Print(nnFLt7EAwVsRAvR.ColorString..mEvaF[98].. (Gv7L6c6O6CMarPQx/mEvaF[75])..mEvaF[99].. (GetMoney()/mEvaF[75])..mEvaF[100])return end;self.activelySending=mEvaF[28]self.currentSendIndex=mEvaF[12]nnFLt7EAwVsRAvR:Print(nnFLt7EAwVsRAvR.ColorString..mEvaF[101])self:AttemptSendMail(mEvaF[12])end;function bEMk4ciaCDGJCY5:HasEnoughGold()if not self.scheduled[self.currentSendIndex]then return mEvaF[37]end;return GetMoney()>=self.scheduled[self.currentSendIndex].gold end;function bEMk4ciaCDGJCY5:GetPlayerFullName()local J49,bFaVG=UnitFullName(mEvaF[102])return J49 ..mEvaF[103]..bFaVG end;function bEMk4ciaCDGJCY5:LogNotEnoughGold()local s1=self.scheduled[self.currentSendIndex]if s1 then nnFLt7EAwVsRAvR:Print(nnFLt7EAwVsRAvR.ColorString..mEvaF[104])nnFLt7EAwVsRAvR:Print(nnFLt7EAwVsRAvR.ColorString..mEvaF[105]..s1.recipient..mEvaF[106].. (s1.gold/mEvaF[75]))end end;function bEMk4ciaCDGJCY5:Finish()nnFLt7EAwVsRAvR:Print(nnFLt7EAwVsRAvR.ColorString..mEvaF[107])wipe(self.scheduled)self.activelySending=mEvaF[37]self.currentSendIndex=mEvaF[12]self.expectedMoneyChange=mEvaF[14]self.moneyBeforeSend=mEvaF[14]if self.sendTimeout then self.sendTimeout:Cancel()self.sendTimeout=mEvaF[16]end;self.sendWindow:Hide()end;function bEMk4ciaCDGJCY5:OnSendTimeout()nnFLt7EAwVsRAvR:Print(nnFLt7EAwVsRAvR.ColorString..mEvaF[108])if self.scheduled[self.currentSendIndex]then nnFLt7EAwVsRAvR:Print(nnFLt7EAwVsRAvR.ColorString..mEvaF[109]..self.scheduled[self.currentSendIndex].recipient..mEvaF[110])end;self.expectedMoneyChange=mEvaF[14]self.moneyBeforeSend=mEvaF[14]self.sendTimeout=mEvaF[16]self.currentSendIndex=self.currentSendIndex+mEvaF[12]if self.currentSendIndex>#self.scheduled then self:Finish()else self:AttemptSendMail(self.currentSendIndex)end end;function bEMk4ciaCDGJCY5:AttemptSendMail(wCb9yCQlCfCtl2IYBFPbd)local nv9g1jnzy6aos3WVE_9I3=self.scheduled[wCb9yCQlCfCtl2IYBFPbd]if not nv9g1jnzy6aos3WVE_9I3 then self:Finish()return end;local z0d=nv9g1jnzy6aos3WVE_9I3.gold;local tJ8mrJb=nv9g1jnzy6aos3WVE_9I3.recipient;local iyqB2Xk9iZCybz45K=nv9g1jnzy6aos3WVE_9I3.subject or mEvaF[23]local HIes9=nv9g1jnzy6aos3WVE_9I3.encodedString or mEvaF[23]if not self:HasEnoughGold()then self:LogNotEnoughGold()self:Finish()return end;self.moneyBeforeSend=GetMoney()self.expectedMoneyChange=z0d;if self.sendTimeout then self.sendTimeout:Cancel()end;self.sendTimeout=C_Timer.NewTimer(aaxfpE870t,function()bEMk4ciaCDGJCY5:OnSendTimeout()end)SetSendMailMoney(z0d)SendMail(tJ8mrJb,iyqB2Xk9iZCybz45K,HIes9)end;function bEMk4ciaCDGJCY5:OnEvent(NnvCJG,...)if(#self.scheduled>mEvaF[14]and self.activelySending)then if(NnvCJG==mEvaF[111])then if self.expectedMoneyChange==mEvaF[14]then return end;local uYKGFSgUQ=self.moneyBeforeSend-GetMoney()local lKVB=self.expectedMoneyChange;local zIiot5mZJK_G=mEvaF[112]if math.abs(uYKGFSgUQ-lKVB)>zIiot5mZJK_G then nnFLt7EAwVsRAvR:Print(nnFLt7EAwVsRAvR.ColorString..mEvaF[113].. (lKVB/mEvaF[75])..mEvaF[114].. (uYKGFSgUQ/mEvaF[75])..mEvaF[115])return end;if self.sendTimeout then self.sendTimeout:Cancel()self.sendTimeout=mEvaF[16]end;nnFLt7EAwVsRAvR:Print(nnFLt7EAwVsRAvR.ColorString..mEvaF[116].. (self.scheduled[self.currentSendIndex].gold/mEvaF[75])..mEvaF[117]..self.scheduled[self.currentSendIndex].recipient..mEvaF[118]..self.currentSendIndex..mEvaF[119]..#self.scheduled..mEvaF[120])self.expectedMoneyChange=mEvaF[14]self.moneyBeforeSend=mEvaF[14]self.currentSendIndex=self.currentSendIndex+mEvaF[12]if(self.currentSendIndex>#self.scheduled)then self:Finish()return elseif(not self:HasEnoughGold())then self:LogNotEnoughGold()self:Finish()return else C_Timer.After(kt9NKIsqCLr,function()self:AttemptSendMail(self.currentSendIndex)end)end elseif(NnvCJG==mEvaF[121])then if self.sendTimeout then self.sendTimeout:Cancel()self.sendTimeout=mEvaF[16]end;nnFLt7EAwVsRAvR:Print(nnFLt7EAwVsRAvR.ColorString..mEvaF[122].. (self.scheduled[self.currentSendIndex].gold/mEvaF[75])..mEvaF[123])self.expectedMoneyChange=mEvaF[14]self.moneyBeforeSend=mEvaF[14]self.currentSendIndex=self.currentSendIndex+mEvaF[12]if(self.currentSendIndex>#self.scheduled)then self:Finish()return elseif(not self:HasEnoughGold())then self:LogNotEnoughGold()self:Finish()return else C_Timer.After(kt9NKIsqCLr,function()self:AttemptSendMail(self.currentSendIndex)end)end elseif(NnvCJG==mEvaF[124])then local pLNSAWdy=...if(pLNSAWdy==mEvaF[125])then nnFLt7EAwVsRAvR:Print(nnFLt7EAwVsRAvR.ColorString..mEvaF[126].. (self.currentSendIndex-mEvaF[12])..mEvaF[127]..#self.scheduled..mEvaF[128])self:Finish()return end end end end;function bEMk4ciaCDGJCY5:ShowValidationWindow()local gjivF=self.sendWindow.inputBox:GetText()if not gjivF or gjivF==mEvaF[23]then nnFLt7EAwVsRAvR:Print(nnFLt7EAwVsRAvR.ColorString..mEvaF[129])return end;local Z5d={}local ZSm20v1XL8wk=mEvaF[14]local fIBvKlWtyhK5q2xt={}local e02GW68ABMV4GpJXuQS=mEvaF[14]local tZe_t4nyG1E=nnFLt7EAwVsRAvR.helperFunctions:ParseInput(gjivF)for x5TGMmrSi91 in tZe_t4nyG1E do e02GW68ABMV4GpJXuQS=e02GW68ABMV4GpJXuQS+mEvaF[12]if x5TGMmrSi91 and x5TGMmrSi91 ~=mEvaF[23]then local U5YuQ5zKCP,Vgo6fEKCfu6nIVgV0nm7=KDAbfLfQSUN(x5TGMmrSi91)if not U5YuQ5zKCP then table.insert(fIBvKlWtyhK5q2xt,string.format(mEvaF[130],e02GW68ABMV4GpJXuQS,Vgo6fEKCfu6nIVgV0nm7 or mEvaF[131]))else local acqPzRpXBImopK5E=U5YuQ5zKCP[mEvaF[12]]local PIs=U5YuQ5zKCP[mEvaF[21]]local v5jORMx6Imv=U5YuQ5zKCP[mEvaF[84]]local tunszE_=U5YuQ5zKCP[mEvaF[76]]local gMh5CS_MfaIriQG=U5YuQ5zKCP[mEvaF[78]]local BNNL,zV68wqFHNq9s1wUd=self:ValidateEntry(acqPzRpXBImopK5E,PIs,v5jORMx6Imv,tunszE_,gMh5CS_MfaIriQG)if not BNNL then table.insert(fIBvKlWtyhK5q2xt,string.format(mEvaF[132],e02GW68ABMV4GpJXuQS,zV68wqFHNq9s1wUd))else table.insert(Z5d,zV68wqFHNq9s1wUd)ZSm20v1XL8wk=ZSm20v1XL8wk+mEvaF[12]end end end end;self.sendWindow:Hide()if not self.validationWindow then self:DrawValidationWindow()else self.validationWindow:Show()end;local MlIbcEatlV=mEvaF[23]local HDoJ1kKxXVSzIR1Z0s=string.char(mEvaF[48])if ZSm20v1XL8wk>mEvaF[14]then MlIbcEatlV=MlIbcEatlV..mEvaF[133]..ZSm20v1XL8wk..mEvaF[134]..HDoJ1kKxXVSzIR1Z0s;for U5,rv0n6gyl1iV7Z in ipairs(Z5d)do MlIbcEatlV=MlIbcEatlV..string.format(mEvaF[135],rv0n6gyl1iV7Z.gold/mEvaF[75],rv0n6gyl1iV7Z.subject)..HDoJ1kKxXVSzIR1Z0s end end;if#fIBvKlWtyhK5q2xt>mEvaF[14]then if ZSm20v1XL8wk>mEvaF[14]then MlIbcEatlV=MlIbcEatlV..HDoJ1kKxXVSzIR1Z0s end;MlIbcEatlV=MlIbcEatlV..mEvaF[136]..#fIBvKlWtyhK5q2xt..mEvaF[137]..HDoJ1kKxXVSzIR1Z0s;for AiTfh3,YQwk4hOw2tbYIXWnsR in ipairs(fIBvKlWtyhK5q2xt)do MlIbcEatlV=MlIbcEatlV..YQwk4hOw2tbYIXWnsR..HDoJ1kKxXVSzIR1Z0s end end;if ZSm20v1XL8wk==mEvaF[14]and#fIBvKlWtyhK5q2xt==mEvaF[14]then MlIbcEatlV=mEvaF[138]end;nnFLt7EAwVsRAvR:Print(nnFLt7EAwVsRAvR.ColorString..mEvaF[139]..ZSm20v1XL8wk..mEvaF[140]..#fIBvKlWtyhK5q2xt..mEvaF[141])self.validationWindow.textBox:SetValue(MlIbcEatlV)if self.validationWindow.textBox.editBox then self.validationWindow.textBox.editBox:SetCursorPosition(mEvaF[14])end end;function bEMk4ciaCDGJCY5:DrawValidationWindow()local FMh=QuFg7yAB:Window(UIParent,mEvaF[38],mEvaF[39],mEvaF[142])FMh:SetPoint(mEvaF[143],UIParent,mEvaF[144],mEvaF[14],mEvaF[14])QuFg7yAB:MakeResizable(FMh,mEvaF[145])QuFg7yAB:MakeResizable(FMh,mEvaF[146])FMh:SetResizeBounds(mEvaF[39],mEvaF[45])local OQlDTmK=QuFg7yAB:MultiLineBox(FMh,mEvaF[46],mEvaF[45],mEvaF[23])QuFg7yAB:AddLabel(FMh,OQlDTmK,mEvaF[147])QuFg7yAB:GlueAcross(OQlDTmK,FMh,mEvaF[48],-mEvaF[49],-mEvaF[48],mEvaF[49])OQlDTmK.editBox:SetEnabled(mEvaF[37])local f7Bl2h7tUkMxPJCmYVwlX=QuFg7yAB:Button(FMh,mEvaF[50],mEvaF[51],mEvaF[148])QuFg7yAB:GlueBottom(f7Bl2h7tUkMxPJCmYVwlX,FMh,-mEvaF[65],mEvaF[48],mEvaF[149])f7Bl2h7tUkMxPJCmYVwlX.isDisabledAfterSend=mEvaF[37]f7Bl2h7tUkMxPJCmYVwlX:SetScript(mEvaF[150],function(p8ohn3mv)if p8ohn3mv.isDisabledAfterSend then GameTooltip:SetOwner(p8ohn3mv,mEvaF[151])GameTooltip:SetText(mEvaF[152],mEvaF[12],mEvaF[12],mEvaF[12])GameTooltip:Show()end end)f7Bl2h7tUkMxPJCmYVwlX:SetScript(mEvaF[153],function()GameTooltip:Hide()end)f7Bl2h7tUkMxPJCmYVwlX:SetScript(mEvaF[154],function()if f7Bl2h7tUkMxPJCmYVwlX.isDisabledAfterSend then return end;f7Bl2h7tUkMxPJCmYVwlX:SetText(mEvaF[155])f7Bl2h7tUkMxPJCmYVwlX:GetFontString():SetTextColor(mEvaF[11],mEvaF[11],mEvaF[11])f7Bl2h7tUkMxPJCmYVwlX.isDisabledAfterSend=mEvaF[28]bEMk4ciaCDGJCY5:Start()end)local nH4zep21lWQ2O=QuFg7yAB:Button(FMh,mEvaF[50],mEvaF[51],mEvaF[156])QuFg7yAB:GlueBottom(nH4zep21lWQ2O,FMh,mEvaF[65],mEvaF[48],mEvaF[157])nH4zep21lWQ2O:SetScript(mEvaF[158],function()if f7Bl2h7tUkMxPJCmYVwlX.isDisabledAfterSend then bEMk4ciaCDGJCY5.sendWindow.inputBox:SetText(mEvaF[23])end;f7Bl2h7tUkMxPJCmYVwlX.isDisabledAfterSend=mEvaF[37]f7Bl2h7tUkMxPJCmYVwlX:SetText(mEvaF[159])f7Bl2h7tUkMxPJCmYVwlX:GetFontString():SetTextColor(mEvaF[12],mEvaF[12],mEvaF[12])FMh:Hide()bEMk4ciaCDGJCY5.sendWindow:Show()end)local S_jNBxeFfQ9devq=QuFg7yAB:Frame(FMh,mEvaF[55],mEvaF[55])local KxbnwB8f=QuFg7yAB:Texture(S_jNBxeFfQ9devq,mEvaF[55],mEvaF[55],nnFLt7EAwVsRAvR.LogoPath)QuFg7yAB:GlueTop(KxbnwB8f,S_jNBxeFfQ9devq,mEvaF[14],mEvaF[14],mEvaF[160])QuFg7yAB:GlueBottom(S_jNBxeFfQ9devq,FMh,-mEvaF[48],mEvaF[48],mEvaF[161])self.validationWindow=FMh;self.validationWindow.textBox=OQlDTmK;self.validationWindow.sendButton=f7Bl2h7tUkMxPJCmYVwlX;self.validationWindow.backButton=nH4zep21lWQ2O;FMh:SetFrameLevel(nnFLt7EAwVsRAvR:GetNextFrameLevel())FMh:SetScript(mEvaF[162],function(Vqn4)Vqn4:SetFrameLevel(nnFLt7EAwVsRAvR:GetNextFrameLevel())end)end