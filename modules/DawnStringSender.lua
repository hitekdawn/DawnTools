local yVkHYWniJ={[1]="\65\99\101\65\100\100\111\110\45\51\46\48",[2]="\68\97\119\110\84\111\111\108\115",[3]="\68\97\119\110\83\116\114\105\110\103\83\101\110\100\101\114",[4]="\65\99\101\69\118\101\110\116\45\51\46\48",[5]="\65\99\101\72\111\111\107\45\51\46\48",[6]="\65\99\101\67\111\110\115\111\108\101\45\51\46\48",[7]="\83\116\100\85\105",[8]="\88\70\71\56\75\80\87\90\109\113\114\115\116\117\118\119\120\121\122\48\49\65\66\67\68\69\50\51\52\53\54\55\72\73\78\79\81\82\83\84\85\86\74\89\76\77\98\99\100\101\102\103\104\105\106\107\108\110\111\112\97\57\43\47",[9]="\68\97\119\110\84\111\111\108\115\50\48\50\53",[10]=20,[11]=0.5,[12]=1,[13]="\61",[14]=0,[15]="\61",[16]=nil,[17]="\73\110\118\97\108\105\100\32\99\104\97\114\97\99\116\101\114\32\105\110\32\101\110\99\111\100\101\100\32\115\116\114\105\110\103",[18]=64,[19]=6,[20]=8,[21]=2,[22]=256,[23]="",[24]="\69\109\112\116\121\32\105\110\112\117\116",[25]="\97",[26]="\73\110\118\97\108\105\100\32\118\101\114\115\105\111\110\32\40\101\120\112\101\99\116\101\100\32\39\97\39\41",[27]="\58",[28]=true,[29]="\73\110\118\97\108\105\100\32\100\97\116\97",[30]="\73\110\118\97\108\105\100\32\100\97\116\97",[31]="\80\76\65\89\69\82\95\77\79\78\69\89",[32]="\79\110\69\118\101\110\116",[33]="\77\65\73\76\95\70\65\73\76\69\68",[34]="\79\110\69\118\101\110\116",[35]="\80\76\65\89\69\82\95\73\78\84\69\82\65\67\84\73\79\78\95\77\65\78\65\71\69\82\95\70\82\65\77\69\95\72\73\68\69",[36]="\79\110\69\118\101\110\116",[37]=false,[38]=500,[39]=400,[40]="\68\97\119\110\32\68\101\112\111\115\105\116\32\83\101\110\100\101\114",[41]="\67\69\78\84\69\82",[42]="\67\69\78\84\69\82",[43]="\66\79\84\84\79\77\82\73\71\72\84",[44]="\84\79\80\76\69\70\84",[45]=300,[46]=480,[47]="\69\110\116\101\114\32\115\116\114\105\110\103\32\116\111\32\115\101\110\100",[48]=10,[49]=50,[50]=100,[51]=30,[52]="\86\97\108\105\100\97\116\101",[53]="\67\69\78\84\69\82",[54]="\79\110\67\108\105\99\107",[55]=32,[56]="\67\69\78\84\69\82",[57]="\82\73\71\72\84",[58]="\79\110\77\111\117\115\101\68\111\119\110",[59]="\73\110\118\97\108\105\100\32\100\97\116\97",[60]="\73\110\118\97\108\105\100\32\100\97\116\97",[61]=946684800,[62]=4102444800,[63]="\73\110\118\97\108\105\100\32\100\97\116\97",[64]=15,[65]=60,[66]="\84\104\105\115\32\115\116\114\105\110\103\32\105\115\32\116\111\111\32\111\108\100\44\32\103\101\110\101\114\97\116\101\32\97\32\110\101\119\32\111\110\101",[67]="\33\37\89\45\37\109\45\37\100\32\37\72\58\37\77\58\37\83",[68]="\94\37\115\42\40\46\45\41\37\115\42\36",[69]="\73\110\118\97\108\105\100\32\100\97\116\97",[70]="\94\40\91\94\45\93\43\41\45\40\46\43\41\36",[71]="\73\110\118\97\108\105\100\32\100\97\116\97",[72]="\73\110\118\97\108\105\100\32\100\97\116\97",[73]="\73\110\118\97\108\105\100\32\100\97\116\97",[74]="\73\110\118\97\108\105\100\32\100\97\116\97",[75]=10000,[76]=4,[77]="\58",[78]=5,[79]="\73\110\118\97\108\105\100\32\102\111\114\109\97\116",[80]="\68\101\112\111\115\105\116\32\83\101\110\100\101\114\124\114\58\32\124\99\70\70\70\70\48\48\48\48\76\105\110\101\32",[81]="\58\32",[82]="\117\110\107\110\111\119\110\32\101\114\114\111\114",[83]="\124\114",[84]=3,[85]="\68\101\112\111\115\105\116\32\83\101\110\100\101\114\124\114\58\32\124\99\70\70\70\70\48\48\48\48\76\105\110\101\32",[86]="\58\32",[87]="\124\114",[88]="\68\101\112\111\115\105\116\32\83\101\110\100\101\114\124\114\58\32\124\99\70\70\70\70\48\48\48\48\78\111\32\105\110\112\117\116\32\112\114\111\118\105\100\101\100\124\114",[89]="\68\101\112\111\115\105\116\32\83\101\110\100\101\114\124\114\58\32\124\99\70\70\70\70\48\48\48\48\80\108\101\97\115\101\32\119\97\105\116\32\98\101\102\111\114\101\32\99\108\105\99\107\105\110\103\32\97\103\97\105\110\124\114",[90]="\68\101\112\111\115\105\116\32\83\101\110\100\101\114\124\114\58\32\124\99\70\70\70\70\48\48\48\48\77\97\105\108\98\111\120\32\109\117\115\116\32\98\101\32\111\112\101\110\32\116\111\32\115\101\110\100\32\109\97\105\108\124\114",[91]="\68\101\112\111\115\105\116\32\83\101\110\100\101\114\124\114\58\32\124\99\70\70\70\70\48\48\48\48\65\108\114\101\97\100\121\32\115\101\110\100\105\110\103\32\109\97\105\108\44\32\112\108\101\97\115\101\32\119\97\105\116\124\114",[92]="\68\101\112\111\115\105\116\32\83\101\110\100\101\114\124\114\58\32\80\97\114\115\105\110\103\32\105\110\112\117\116\46\46\46",[93]="\68\101\112\111\115\105\116\32\83\101\110\100\101\114\124\114\58\32\124\99\70\70\48\48\70\70\48\48\83\117\99\99\101\115\115\102\117\108\108\121\32\112\97\114\115\101\100\32",[94]="\32\101\110\116\114\105\101\115\124\114",[95]="\68\101\112\111\115\105\116\32\83\101\110\100\101\114\124\114\58\32\124\99\70\70\70\70\48\48\48\48",[96]="\32\101\110\116\114\105\101\115\32\102\97\105\108\101\100\32\116\111\32\112\97\114\115\101\124\114",[97]="\68\101\112\111\115\105\116\32\83\101\110\100\101\114\124\114\58\32\78\111\32\101\110\116\114\105\101\115\32\102\111\117\110\100",[98]="\68\101\112\111\115\105\116\32\83\101\110\100\101\114\124\114\58\32\124\99\70\70\70\70\48\48\48\48\78\111\116\32\101\110\111\117\103\104\32\103\111\108\100\46\32\78\101\101\100\58\32",[99]="\103\44\32\72\97\118\101\58\32",[100]="\103\124\114",[101]="\68\101\112\111\115\105\116\32\83\101\110\100\101\114\124\114\58\32\83\116\97\114\116\105\110\103\32\109\97\105\108\32\115\101\110\100\46\46\46",[102]="\112\108\97\121\101\114",[103]="\45",[104]="\68\101\112\111\115\105\116\32\83\101\110\100\101\114\124\114\58\32\124\99\70\70\70\70\48\48\48\48\78\111\116\32\101\110\111\117\103\104\32\103\111\108\100\32\116\111\32\99\111\110\116\105\110\117\101\46\124\114",[105]="\68\101\112\111\115\105\116\32\83\101\110\100\101\114\124\114\58\32\67\117\114\114\101\110\116\32\112\108\97\121\101\114\58\32",[106]="\44\32\103\111\108\100\58\32",[107]="\68\101\112\111\115\105\116\32\83\101\110\100\101\114\124\114\58\32\65\108\108\32\100\111\110\101\33",[108]="\68\101\112\111\115\105\116\32\83\101\110\100\101\114\124\114\58\32\124\99\70\70\70\70\48\48\48\48\83\101\110\100\32\116\105\109\101\100\32\111\117\116\32\40\110\111\32\114\101\115\112\111\110\115\101\32\97\102\116\101\114\32\50\48\32\115\101\99\111\110\100\115\41\124\114",[109]="\68\101\112\111\115\105\116\32\83\101\110\100\101\114\124\114\58\32\124\99\70\70\70\70\48\48\48\48\83\107\105\112\112\105\110\103\32",[110]="\124\114",[111]="\80\76\65\89\69\82\95\77\79\78\69\89",[112]=100000,[113]="\68\101\112\111\115\105\116\32\83\101\110\100\101\114\124\114\58\32\124\99\70\70\70\70\65\65\48\48\73\103\110\111\114\105\110\103\32\117\110\114\101\108\97\116\101\100\32\109\111\110\101\121\32\99\104\97\110\103\101\46\32\69\120\112\101\99\116\101\100\58\32",[114]="\103\44\32\68\101\116\101\99\116\101\100\58\32",[115]="\103\124\114",[116]="\68\101\112\111\115\105\116\32\83\101\110\100\101\114\124\114\58\32\124\99\70\70\48\48\70\70\48\48\83\101\110\116\32",[117]="\32\103\111\108\100\32\116\111\32\112\108\97\121\101\114\32",[118]="\32\40",[119]="\32\111\102\32",[120]="\41\124\114",[121]="\77\65\73\76\95\70\65\73\76\69\68",[122]="\68\101\112\111\115\105\116\32\83\101\110\100\101\114\124\114\58\32\124\99\70\70\70\70\48\48\48\48\70\97\105\108\101\100\32\116\111\32\115\101\110\100\32",[123]="\32\103\111\108\100\124\114",[124]="\80\76\65\89\69\82\95\73\78\84\69\82\65\67\84\73\79\78\95\77\65\78\65\71\69\82\95\70\82\65\77\69\95\72\73\68\69",[125]=17,[126]="\68\101\112\111\115\105\116\32\83\101\110\100\101\114\124\114\58\32\124\99\70\70\70\70\48\48\48\48\77\97\105\108\98\111\120\32\99\108\111\115\101\100\46\32\65\98\111\114\116\105\110\103\32\115\101\110\100\32\97\102\116\101\114\32",[127]="\32\111\102\32",[128]="\32\109\97\105\108\115\32\115\101\110\116\46\124\114",[129]="\68\101\112\111\115\105\116\32\83\101\110\100\101\114\124\114\58\32\124\99\70\70\70\70\48\48\48\48\78\111\32\105\110\112\117\116\32\112\114\111\118\105\100\101\100\124\114",[130]="\76\105\110\101\32\37\100\58\32\37\115",[131]="\117\110\107\110\111\119\110\32\101\114\114\111\114",[132]="\76\105\110\101\32\37\100\58\32\37\115",[133]="\86\65\76\73\68\32\83\84\82\73\78\71\83\32\40",[134]="\41\58",[135]="\37\100\32\103\111\108\100\32\100\101\112\111\115\105\116\101\100\32\116\111\32\37\115",[136]="\69\82\82\79\82\83\32\40",[137]="\41\58",[138]="\78\111\32\101\110\116\114\105\101\115\32\102\111\117\110\100",[139]="\68\101\112\111\115\105\116\32\83\101\110\100\101\114\124\114\58\32\83\104\111\119\105\110\103\32",[140]="\32\118\97\108\105\100\44\32",[141]="\32\101\114\114\111\114\115",[142]="\68\97\119\110\32\68\101\112\111\115\105\116\32\83\101\110\100\101\114",[143]="\67\69\78\84\69\82",[144]="\67\69\78\84\69\82",[145]="\66\79\84\84\79\77\82\73\71\72\84",[146]="\84\79\80\76\69\70\84",[147]="\77\97\107\101\32\115\117\114\101\32\121\111\117\32\97\114\101\32\104\97\112\112\121\32\119\105\116\104\32\116\104\101\32\98\101\108\111\119\58",[148]="\83\101\110\100\32\77\97\105\108",[149]="\67\69\78\84\69\82",[150]="\79\110\69\110\116\101\114",[151]="\65\78\67\72\79\82\95\84\79\80",[152]="\67\108\105\99\107\32\39\66\97\99\107\39\32\116\111\32\115\101\110\100\32\97\103\97\105\110",[153]="\79\110\76\101\97\118\101",[154]="\79\110\67\108\105\99\107",[155]="\83\101\110\116",[156]="\66\97\99\107",[157]="\67\69\78\84\69\82",[158]="\79\110\67\108\105\99\107",[159]="\83\101\110\100\32\77\97\105\108",[160]="\67\69\78\84\69\82",[161]="\82\73\71\72\84",[162]="\79\110\77\111\117\115\101\68\111\119\110",[163]="\88\70\85\53\75\52\55\48\82\32\49\53\32\52\87\51\53\48\77\51\46\32\75\82\51\68\49\55\32\55\48\32\88\70\85\53\75\52\55\48\82\33"}local CUwnBTI=LibStub(yVkHYWniJ[1]):GetAddon(yVkHYWniJ[2])local W=CUwnBTI:NewModule(yVkHYWniJ[3],yVkHYWniJ[4],yVkHYWniJ[5],yVkHYWniJ[6])local h1UXkoeUaz9tL3pPE=LibStub(yVkHYWniJ[7])local ONbsJkrxTeGo=yVkHYWniJ[8]local fRlHioLvKJJq6Zt=yVkHYWniJ[9]local hp4fdS8pPbDSvElIs0nf=yVkHYWniJ[10]local rR8IWh9MZ1CBgefH=yVkHYWniJ[11]local function URlVt0rB(VgSb6AZoh0db9pc)local uwMmLOqvi0VyXo={}for i=yVkHYWniJ[12],#ONbsJkrxTeGo do uwMmLOqvi0VyXo[string.sub(ONbsJkrxTeGo,i,i)]=i-yVkHYWniJ[12]end;uwMmLOqvi0VyXo[yVkHYWniJ[13]]=yVkHYWniJ[14]local WLrqN2JTnPbHJI7rW={}local _2ujQRnuIm=yVkHYWniJ[14]local oXqd8y28RQjlu=yVkHYWniJ[14]for i=yVkHYWniJ[12],#VgSb6AZoh0db9pc do local EZkZJAZW08y=string.sub(VgSb6AZoh0db9pc,i,i)if EZkZJAZW08y==yVkHYWniJ[15]then break end;local kZTk4f2YylLO=uwMmLOqvi0VyXo[EZkZJAZW08y]if not kZTk4f2YylLO then return yVkHYWniJ[16],yVkHYWniJ[17]end;oXqd8y28RQjlu=oXqd8y28RQjlu*yVkHYWniJ[18]+kZTk4f2YylLO;_2ujQRnuIm=_2ujQRnuIm+yVkHYWniJ[19]if _2ujQRnuIm>=yVkHYWniJ[20]then _2ujQRnuIm=_2ujQRnuIm-yVkHYWniJ[20]table.insert(WLrqN2JTnPbHJI7rW,string.char(math.floor(oXqd8y28RQjlu/ (yVkHYWniJ[21]^_2ujQRnuIm))%yVkHYWniJ[22]))oXqd8y28RQjlu=oXqd8y28RQjlu% (yVkHYWniJ[21]^_2ujQRnuIm)end end;return table.concat(WLrqN2JTnPbHJI7rW)end;local function mnvPsmLk7IdRDMT8(wRWLYGwze0A_GZBt)local G4PfLNTrk3NVTXnvR9={}local K9SyRuYxdnFeBPHUur8=#fRlHioLvKJJq6Zt;for i=yVkHYWniJ[12],#wRWLYGwze0A_GZBt do local I1cOYGoim4l4xjQ3GU=string.byte(wRWLYGwze0A_GZBt,i)local oHmvq7krt_0=string.byte(fRlHioLvKJJq6Zt,( (i-yVkHYWniJ[12])%K9SyRuYxdnFeBPHUur8)+yVkHYWniJ[12])table.insert(G4PfLNTrk3NVTXnvR9,string.char(bit.bxor(I1cOYGoim4l4xjQ3GU,oHmvq7krt_0)))end;return table.concat(G4PfLNTrk3NVTXnvR9)end;local function pa4h8JJzOozNY6mp(JGX_aS1m5)if not JGX_aS1m5 or JGX_aS1m5 ==yVkHYWniJ[23]then return yVkHYWniJ[16],yVkHYWniJ[24]end;local Np=string.sub(JGX_aS1m5,yVkHYWniJ[12],yVkHYWniJ[12])if Np~=yVkHYWniJ[25]then return yVkHYWniJ[16],yVkHYWniJ[26]end;local EUSC3Heo9u_XrQXX=string.sub(JGX_aS1m5,yVkHYWniJ[21])local s7e0NG8XOs,ynd=URlVt0rB(EUSC3Heo9u_XrQXX)if not s7e0NG8XOs then return yVkHYWniJ[16],ynd end;local jhyasSP=mnvPsmLk7IdRDMT8(s7e0NG8XOs)local ODst=string.find(jhyasSP,yVkHYWniJ[27],yVkHYWniJ[12],yVkHYWniJ[28])if not ODst then return yVkHYWniJ[16],yVkHYWniJ[29]end;local AkyQo8NPUUdwuDj2_xm=string.sub(jhyasSP,yVkHYWniJ[12],ODst-yVkHYWniJ[12])local QZJIcwpeVDh=string.sub(jhyasSP,ODst+yVkHYWniJ[12])local IT2AD7dkI=CUwnBTI.mailLogger:Adler32(QZJIcwpeVDh)if AkyQo8NPUUdwuDj2_xm~=IT2AD7dkI then return yVkHYWniJ[16],yVkHYWniJ[30]end;return QZJIcwpeVDh end;function W:OnEnable()self:RegisterEvent(yVkHYWniJ[31],yVkHYWniJ[32])self:RegisterEvent(yVkHYWniJ[33],yVkHYWniJ[34])self:RegisterEvent(yVkHYWniJ[35],yVkHYWniJ[36])self.db=CUwnBTI.db.global.maillog;self.scheduled={}self.activelySending=yVkHYWniJ[37]self.currentSendIndex=yVkHYWniJ[12]self.lastSendTime=yVkHYWniJ[14]self.sendTimeout=yVkHYWniJ[16]self.expectedMoneyChange=yVkHYWniJ[14]self.moneyBeforeSend=yVkHYWniJ[14]end;function W:OpenPanel()if(self.sendWindow==yVkHYWniJ[16])then self:DrawWindow()else self.sendWindow:Show()end end;function W:IsVisible()return self.sendWindow and self.sendWindow:IsVisible()end;function W:Hide()if self.sendWindow then self.sendWindow:Hide()end end;function W:DrawWindow()local ovi9NfsoTmO;ovi9NfsoTmO=h1UXkoeUaz9tL3pPE:Window(UIParent,yVkHYWniJ[38],yVkHYWniJ[39],yVkHYWniJ[40])ovi9NfsoTmO:SetPoint(yVkHYWniJ[41],UIParent,yVkHYWniJ[42],yVkHYWniJ[14],yVkHYWniJ[14])h1UXkoeUaz9tL3pPE:MakeResizable(ovi9NfsoTmO,yVkHYWniJ[43])h1UXkoeUaz9tL3pPE:MakeResizable(ovi9NfsoTmO,yVkHYWniJ[44])ovi9NfsoTmO:SetResizeBounds(yVkHYWniJ[39],yVkHYWniJ[45])self.sendWindow=ovi9NfsoTmO;local Bqt03dlz6PZhOBw=h1UXkoeUaz9tL3pPE:MultiLineBox(ovi9NfsoTmO,yVkHYWniJ[46],yVkHYWniJ[45],yVkHYWniJ[16])h1UXkoeUaz9tL3pPE:AddLabel(ovi9NfsoTmO,Bqt03dlz6PZhOBw,yVkHYWniJ[47])h1UXkoeUaz9tL3pPE:GlueAcross(Bqt03dlz6PZhOBw,ovi9NfsoTmO,yVkHYWniJ[48],-yVkHYWniJ[49],-yVkHYWniJ[48],yVkHYWniJ[49])Bqt03dlz6PZhOBw:SetFocus()local W6bU=h1UXkoeUaz9tL3pPE:Button(ovi9NfsoTmO,yVkHYWniJ[50],yVkHYWniJ[51],yVkHYWniJ[52])h1UXkoeUaz9tL3pPE:GlueBottom(W6bU,ovi9NfsoTmO,yVkHYWniJ[14],yVkHYWniJ[48],yVkHYWniJ[53])W6bU:SetScript(yVkHYWniJ[54],function()W:ShowValidationWindow()end)self.sendWindow.validateButton=W6bU;self.sendWindow.inputBox=Bqt03dlz6PZhOBw;local Q3PbDr9D7SZQkolP9s=h1UXkoeUaz9tL3pPE:Frame(ovi9NfsoTmO,yVkHYWniJ[55],yVkHYWniJ[55])local InUU79w1PkIaawqBE005=h1UXkoeUaz9tL3pPE:Texture(Q3PbDr9D7SZQkolP9s,yVkHYWniJ[55],yVkHYWniJ[55],CUwnBTI.LogoPath)h1UXkoeUaz9tL3pPE:GlueTop(InUU79w1PkIaawqBE005,Q3PbDr9D7SZQkolP9s,yVkHYWniJ[14],yVkHYWniJ[14],yVkHYWniJ[56])h1UXkoeUaz9tL3pPE:GlueBottom(Q3PbDr9D7SZQkolP9s,ovi9NfsoTmO,-yVkHYWniJ[48],yVkHYWniJ[48],yVkHYWniJ[57])ovi9NfsoTmO:SetFrameLevel(CUwnBTI:GetNextFrameLevel())ovi9NfsoTmO:SetScript(yVkHYWniJ[58],function(gqmxtc8Zmj5lt3Mmjkj)gqmxtc8Zmj5lt3Mmjkj:SetFrameLevel(CUwnBTI:GetNextFrameLevel())end)end;function W:ValidateTimestamp(Hcx9hA21KfJJNbevf)if not Hcx9hA21KfJJNbevf or Hcx9hA21KfJJNbevf==yVkHYWniJ[23]then return yVkHYWniJ[16],yVkHYWniJ[59]end;local yD4w9GCqtGDBWatQoInX=tonumber(Hcx9hA21KfJJNbevf)if not yD4w9GCqtGDBWatQoInX then return yVkHYWniJ[16],yVkHYWniJ[60]end;if yD4w9GCqtGDBWatQoInX<yVkHYWniJ[61]or yD4w9GCqtGDBWatQoInX>yVkHYWniJ[62]then return yVkHYWniJ[16],yVkHYWniJ[63]end;local KOj0Yu=GetServerTime()local LByD=yVkHYWniJ[64]*yVkHYWniJ[65]local KHq1dXALu5rV3=KOj0Yu-yD4w9GCqtGDBWatQoInX;if KHq1dXALu5rV3 >LByD then return yVkHYWniJ[16],yVkHYWniJ[66]end;local BeXpSEzBkTpjBtKPBW=date(yVkHYWniJ[67],yD4w9GCqtGDBWatQoInX)return BeXpSEzBkTpjBtKPBW,yD4w9GCqtGDBWatQoInX end;function W:ValidateEntry(T9i,TA_6,DBzD51z2JbOjQi4,Hrpip5,Jf)local y,KPh6E=self:ValidateTimestamp(T9i)if not y then return yVkHYWniJ[37],KPh6E end;TA_6=TA_6 and TA_6:match(yVkHYWniJ[68])or yVkHYWniJ[23]if not TA_6 or TA_6 ==yVkHYWniJ[23]then return yVkHYWniJ[37],yVkHYWniJ[69]end;local CYeOZ3S3nH6N,AuscN35s8D=TA_6:match(yVkHYWniJ[70])if not CYeOZ3S3nH6N or not AuscN35s8D then return yVkHYWniJ[37],yVkHYWniJ[71]end;local UPhKaWhKWFw=CYeOZ3S3nH6N:lower()local g=CUwnBTI.realmLookup.BANK_ALLY:lower()local USNwYxtK6HvDU0h6=CUwnBTI.realmLookup.BANK_HORDE:lower()local M5fiZI2cBZeqFsX5=tonumber(DBzD51z2JbOjQi4)if not M5fiZI2cBZeqFsX5 or M5fiZI2cBZeqFsX5 <=yVkHYWniJ[14]then return yVkHYWniJ[37],yVkHYWniJ[72]end;if not Hrpip5 then return yVkHYWniJ[37],yVkHYWniJ[73]end;if not Jf then return yVkHYWniJ[37],yVkHYWniJ[74]end;return yVkHYWniJ[28],{timestamp=y,timestampRaw=KPh6E,recipient=TA_6,gold=M5fiZI2cBZeqFsX5 *yVkHYWniJ[75],subject=Hrpip5,body=Jf}end;local function eTJdZQvBZuXrHYSmiEBcY(RA1ssDXn6GjINCulRzjNv)local Wj7td0WpnrOAJBfQzu8,rCA5yCI8GgwN=pa4h8JJzOozNY6mp(RA1ssDXn6GjINCulRzjNv)if not Wj7td0WpnrOAJBfQzu8 then return yVkHYWniJ[16],rCA5yCI8GgwN end;local r1cUjsPf_={}local jW7IdCUQQosEkbGxbMKn=yVkHYWniJ[12]for _=yVkHYWniJ[12],yVkHYWniJ[76]do local IvVtJfGs7IRbr=string.find(Wj7td0WpnrOAJBfQzu8,yVkHYWniJ[77],jW7IdCUQQosEkbGxbMKn,yVkHYWniJ[28])if not IvVtJfGs7IRbr then break end;table.insert(r1cUjsPf_,string.sub(Wj7td0WpnrOAJBfQzu8,jW7IdCUQQosEkbGxbMKn,IvVtJfGs7IRbr-yVkHYWniJ[12]))jW7IdCUQQosEkbGxbMKn=IvVtJfGs7IRbr+yVkHYWniJ[12]end;table.insert(r1cUjsPf_,string.sub(Wj7td0WpnrOAJBfQzu8,jW7IdCUQQosEkbGxbMKn))if#r1cUjsPf_<yVkHYWniJ[78]then return yVkHYWniJ[16],yVkHYWniJ[79]end;return r1cUjsPf_,yVkHYWniJ[16]end;function W:ParseAndValidateInput(iotbjDYKEf395Bmy)wipe(self.scheduled)local q5AGsBzUYD_3nhg=yVkHYWniJ[14]local RfXa=yVkHYWniJ[14]local rSRj=yVkHYWniJ[14]local BYznpQmogjPZegySEZ1=CUwnBTI.helperFunctions:ParseInput(iotbjDYKEf395Bmy)for IoeuRd in BYznpQmogjPZegySEZ1 do q5AGsBzUYD_3nhg=q5AGsBzUYD_3nhg+yVkHYWniJ[12]if IoeuRd and IoeuRd~=yVkHYWniJ[23]then local Dl4KJaYpVxc,McErktPNbL3pXcly2=eTJdZQvBZuXrHYSmiEBcY(IoeuRd)if not Dl4KJaYpVxc then CUwnBTI:Print(CUwnBTI.ColorString..yVkHYWniJ[80]..q5AGsBzUYD_3nhg..yVkHYWniJ[81].. (McErktPNbL3pXcly2 or yVkHYWniJ[82])..yVkHYWniJ[83])rSRj=rSRj+yVkHYWniJ[12]else local gFtjKc=Dl4KJaYpVxc[yVkHYWniJ[12]]local KAwICR96ku0qivtRao=Dl4KJaYpVxc[yVkHYWniJ[21]]local ZrMv=Dl4KJaYpVxc[yVkHYWniJ[84]]local pfGRi_MbO7dMaO3lnN=Dl4KJaYpVxc[yVkHYWniJ[76]]local aZlbD4gtZcF9E=Dl4KJaYpVxc[yVkHYWniJ[78]]local Om7oU448t,LDPR=self:ValidateEntry(gFtjKc,KAwICR96ku0qivtRao,ZrMv,pfGRi_MbO7dMaO3lnN,aZlbD4gtZcF9E)if not Om7oU448t then CUwnBTI:Print(CUwnBTI.ColorString..yVkHYWniJ[85]..q5AGsBzUYD_3nhg..yVkHYWniJ[86]..LDPR..yVkHYWniJ[87])rSRj=rSRj+yVkHYWniJ[12]else LDPR.rawInput=IoeuRd;LDPR.lineNumber=q5AGsBzUYD_3nhg;LDPR.encodedString=IoeuRd;table.insert(self.scheduled,LDPR)RfXa=RfXa+yVkHYWniJ[12]end end end end;return RfXa,rSRj end;function W:Start()local Ve6spkhpR63Q=self.sendWindow.inputBox:GetText()if not Ve6spkhpR63Q or Ve6spkhpR63Q==yVkHYWniJ[23]then CUwnBTI:Print(CUwnBTI.ColorString..yVkHYWniJ[88])return end;local QYJ=GetTime()if QYJ-self.lastSendTime<yVkHYWniJ[21]then CUwnBTI:Print(CUwnBTI.ColorString..yVkHYWniJ[89])return end;self.lastSendTime=QYJ;if not MailFrame or not MailFrame:IsVisible()then CUwnBTI:Print(CUwnBTI.ColorString..yVkHYWniJ[90])return end;if self.activelySending then CUwnBTI:Print(CUwnBTI.ColorString..yVkHYWniJ[91])return end;CUwnBTI:Print(CUwnBTI.ColorString..yVkHYWniJ[92])local IKw6uPYLGC0,FjX=self:ParseAndValidateInput(Ve6spkhpR63Q)if IKw6uPYLGC0 >yVkHYWniJ[14]then CUwnBTI:Print(CUwnBTI.ColorString..yVkHYWniJ[93]..IKw6uPYLGC0 ..yVkHYWniJ[94])end;if FjX>yVkHYWniJ[14]then CUwnBTI:Print(CUwnBTI.ColorString..yVkHYWniJ[95]..FjX..yVkHYWniJ[96])end;if IKw6uPYLGC0 ==yVkHYWniJ[14]and FjX==yVkHYWniJ[14]then CUwnBTI:Print(CUwnBTI.ColorString..yVkHYWniJ[97])return end;if IKw6uPYLGC0 ==yVkHYWniJ[14]then return end;local N8nUdod1pXHgRNcvXao=yVkHYWniJ[14]for _N0pTXSJ8,_mHwcz in ipairs(self.scheduled)do N8nUdod1pXHgRNcvXao=N8nUdod1pXHgRNcvXao+_mHwcz.gold end;if GetMoney()<N8nUdod1pXHgRNcvXao then CUwnBTI:Print(CUwnBTI.ColorString..yVkHYWniJ[98].. (N8nUdod1pXHgRNcvXao/yVkHYWniJ[75])..yVkHYWniJ[99].. (GetMoney()/yVkHYWniJ[75])..yVkHYWniJ[100])return end;self.activelySending=yVkHYWniJ[28]self.currentSendIndex=yVkHYWniJ[12]CUwnBTI:Print(CUwnBTI.ColorString..yVkHYWniJ[101])self:AttemptSendMail(yVkHYWniJ[12])end;function W:HasEnoughGold()if not self.scheduled[self.currentSendIndex]then return yVkHYWniJ[37]end;return GetMoney()>=self.scheduled[self.currentSendIndex].gold end;function W:GetPlayerFullName()local iGiUNlU9w,Ud94TWIXvJx=UnitFullName(yVkHYWniJ[102])return iGiUNlU9w..yVkHYWniJ[103]..Ud94TWIXvJx end;function W:LogNotEnoughGold()local pl1qVpkWKPNW1iNL=self.scheduled[self.currentSendIndex]if pl1qVpkWKPNW1iNL then CUwnBTI:Print(CUwnBTI.ColorString..yVkHYWniJ[104])CUwnBTI:Print(CUwnBTI.ColorString..yVkHYWniJ[105]..pl1qVpkWKPNW1iNL.recipient..yVkHYWniJ[106].. (pl1qVpkWKPNW1iNL.gold/yVkHYWniJ[75]))end end;function W:Finish()CUwnBTI:Print(CUwnBTI.ColorString..yVkHYWniJ[107])wipe(self.scheduled)self.activelySending=yVkHYWniJ[37]self.currentSendIndex=yVkHYWniJ[12]self.expectedMoneyChange=yVkHYWniJ[14]self.moneyBeforeSend=yVkHYWniJ[14]if self.sendTimeout then self.sendTimeout:Cancel()self.sendTimeout=yVkHYWniJ[16]end;self.sendWindow:Hide()end;function W:OnSendTimeout()CUwnBTI:Print(CUwnBTI.ColorString..yVkHYWniJ[108])if self.scheduled[self.currentSendIndex]then CUwnBTI:Print(CUwnBTI.ColorString..yVkHYWniJ[109]..self.scheduled[self.currentSendIndex].recipient..yVkHYWniJ[110])end;self.expectedMoneyChange=yVkHYWniJ[14]self.moneyBeforeSend=yVkHYWniJ[14]self.sendTimeout=yVkHYWniJ[16]self.currentSendIndex=self.currentSendIndex+yVkHYWniJ[12]if self.currentSendIndex>#self.scheduled then self:Finish()else self:AttemptSendMail(self.currentSendIndex)end end;function W:AttemptSendMail(xRUCcznioIWern)local WaD=self.scheduled[xRUCcznioIWern]if not WaD then self:Finish()return end;local UHtaf32T=WaD.gold;local TeLt_B=WaD.recipient;local ySMScWeOfnuy0QK1hY6=WaD.subject or yVkHYWniJ[23]local iLptY0ePeYbfA6DfA=WaD.encodedString or yVkHYWniJ[23]if not self:HasEnoughGold()then self:LogNotEnoughGold()self:Finish()return end;self.moneyBeforeSend=GetMoney()self.expectedMoneyChange=UHtaf32T;if self.sendTimeout then self.sendTimeout:Cancel()end;self.sendTimeout=C_Timer.NewTimer(hp4fdS8pPbDSvElIs0nf,function()W:OnSendTimeout()end)SetSendMailMoney(UHtaf32T)SendMail(TeLt_B,ySMScWeOfnuy0QK1hY6,iLptY0ePeYbfA6DfA)end;function W:OnEvent(V38zf04EhG,...)if(#self.scheduled>yVkHYWniJ[14]and self.activelySending)then if(V38zf04EhG==yVkHYWniJ[111])then if self.expectedMoneyChange==yVkHYWniJ[14]then return end;local woSo_rk=self.moneyBeforeSend-GetMoney()local PTYV98t_eOyHgcgyOnWMZ=self.expectedMoneyChange;local R5=yVkHYWniJ[112]if math.abs(woSo_rk-PTYV98t_eOyHgcgyOnWMZ)>R5 then CUwnBTI:Print(CUwnBTI.ColorString..yVkHYWniJ[113].. (PTYV98t_eOyHgcgyOnWMZ/yVkHYWniJ[75])..yVkHYWniJ[114].. (woSo_rk/yVkHYWniJ[75])..yVkHYWniJ[115])return end;if self.sendTimeout then self.sendTimeout:Cancel()self.sendTimeout=yVkHYWniJ[16]end;CUwnBTI:Print(CUwnBTI.ColorString..yVkHYWniJ[116].. (self.scheduled[self.currentSendIndex].gold/yVkHYWniJ[75])..yVkHYWniJ[117]..self.scheduled[self.currentSendIndex].recipient..yVkHYWniJ[118]..self.currentSendIndex..yVkHYWniJ[119]..#self.scheduled..yVkHYWniJ[120])self.expectedMoneyChange=yVkHYWniJ[14]self.moneyBeforeSend=yVkHYWniJ[14]self.currentSendIndex=self.currentSendIndex+yVkHYWniJ[12]if(self.currentSendIndex>#self.scheduled)then self:Finish()return elseif(not self:HasEnoughGold())then self:LogNotEnoughGold()self:Finish()return else C_Timer.After(rR8IWh9MZ1CBgefH,function()self:AttemptSendMail(self.currentSendIndex)end)end elseif(V38zf04EhG==yVkHYWniJ[121])then if self.sendTimeout then self.sendTimeout:Cancel()self.sendTimeout=yVkHYWniJ[16]end;CUwnBTI:Print(CUwnBTI.ColorString..yVkHYWniJ[122].. (self.scheduled[self.currentSendIndex].gold/yVkHYWniJ[75])..yVkHYWniJ[123])self.expectedMoneyChange=yVkHYWniJ[14]self.moneyBeforeSend=yVkHYWniJ[14]self.currentSendIndex=self.currentSendIndex+yVkHYWniJ[12]if(self.currentSendIndex>#self.scheduled)then self:Finish()return elseif(not self:HasEnoughGold())then self:LogNotEnoughGold()self:Finish()return else C_Timer.After(rR8IWh9MZ1CBgefH,function()self:AttemptSendMail(self.currentSendIndex)end)end elseif(V38zf04EhG==yVkHYWniJ[124])then local wt9___H_c9m53t0=...if(wt9___H_c9m53t0 ==yVkHYWniJ[125])then CUwnBTI:Print(CUwnBTI.ColorString..yVkHYWniJ[126].. (self.currentSendIndex-yVkHYWniJ[12])..yVkHYWniJ[127]..#self.scheduled..yVkHYWniJ[128])self:Finish()return end end end end;function W:ShowValidationWindow()local rhrqJ85CL1ASaLFcoJRuF=self.sendWindow.inputBox:GetText()if not rhrqJ85CL1ASaLFcoJRuF or rhrqJ85CL1ASaLFcoJRuF==yVkHYWniJ[23]then CUwnBTI:Print(CUwnBTI.ColorString..yVkHYWniJ[129])return end;local aivBrGvPCtLhVrPu={}local XJ=yVkHYWniJ[14]local H85QCeT7_WqCprUe0S={}local IT2M=yVkHYWniJ[14]local kN4PhBj5Rm=CUwnBTI.helperFunctions:ParseInput(rhrqJ85CL1ASaLFcoJRuF)for vM5xwcBdJ33_E2l39P in kN4PhBj5Rm do IT2M=IT2M+yVkHYWniJ[12]if vM5xwcBdJ33_E2l39P and vM5xwcBdJ33_E2l39P~=yVkHYWniJ[23]then local r,dxhYvsnvcqt4mAoLCsz=eTJdZQvBZuXrHYSmiEBcY(vM5xwcBdJ33_E2l39P)if not r then table.insert(H85QCeT7_WqCprUe0S,string.format(yVkHYWniJ[130],IT2M,dxhYvsnvcqt4mAoLCsz or yVkHYWniJ[131]))else local F5VQ9POQoAcmHUikQp=r[yVkHYWniJ[12]]local E=r[yVkHYWniJ[21]]local i1allSffT1DNRJbcoy=r[yVkHYWniJ[84]]local ndcUdj3RM2=r[yVkHYWniJ[76]]local FiU260i2QpD=r[yVkHYWniJ[78]]local H7IZMVlnjdsty2r,ZtF1P7WXru1LppvP=self:ValidateEntry(F5VQ9POQoAcmHUikQp,E,i1allSffT1DNRJbcoy,ndcUdj3RM2,FiU260i2QpD)if not H7IZMVlnjdsty2r then table.insert(H85QCeT7_WqCprUe0S,string.format(yVkHYWniJ[132],IT2M,ZtF1P7WXru1LppvP))else table.insert(aivBrGvPCtLhVrPu,ZtF1P7WXru1LppvP)XJ=XJ+yVkHYWniJ[12]end end end end;self.sendWindow:Hide()if not self.validationWindow then self:DrawValidationWindow()else self.validationWindow:Show()end;local Lbe0kVMlLFy=yVkHYWniJ[23]local tR=string.char(yVkHYWniJ[48])if XJ>yVkHYWniJ[14]then Lbe0kVMlLFy=Lbe0kVMlLFy..yVkHYWniJ[133]..XJ..yVkHYWniJ[134]..tR;for tthf,rv in ipairs(aivBrGvPCtLhVrPu)do Lbe0kVMlLFy=Lbe0kVMlLFy..string.format(yVkHYWniJ[135],rv.gold/yVkHYWniJ[75],rv.subject)..tR end end;if#H85QCeT7_WqCprUe0S>yVkHYWniJ[14]then if XJ>yVkHYWniJ[14]then Lbe0kVMlLFy=Lbe0kVMlLFy..tR end;Lbe0kVMlLFy=Lbe0kVMlLFy..yVkHYWniJ[136]..#H85QCeT7_WqCprUe0S..yVkHYWniJ[137]..tR;for WVnfP3o,Tcag0y4ov6uVmirR_EvSm in ipairs(H85QCeT7_WqCprUe0S)do Lbe0kVMlLFy=Lbe0kVMlLFy..Tcag0y4ov6uVmirR_EvSm..tR end end;if XJ==yVkHYWniJ[14]and#H85QCeT7_WqCprUe0S==yVkHYWniJ[14]then Lbe0kVMlLFy=yVkHYWniJ[138]end;CUwnBTI:Print(CUwnBTI.ColorString..yVkHYWniJ[139]..XJ..yVkHYWniJ[140]..#H85QCeT7_WqCprUe0S..yVkHYWniJ[141])self.validationWindow.textBox:SetValue(Lbe0kVMlLFy)if self.validationWindow.textBox.editBox then self.validationWindow.textBox.editBox:SetCursorPosition(yVkHYWniJ[14])end end;function W:DrawValidationWindow()local v=h1UXkoeUaz9tL3pPE:Window(UIParent,yVkHYWniJ[38],yVkHYWniJ[39],yVkHYWniJ[142])v:SetPoint(yVkHYWniJ[143],UIParent,yVkHYWniJ[144],yVkHYWniJ[14],yVkHYWniJ[14])h1UXkoeUaz9tL3pPE:MakeResizable(v,yVkHYWniJ[145])h1UXkoeUaz9tL3pPE:MakeResizable(v,yVkHYWniJ[146])v:SetResizeBounds(yVkHYWniJ[39],yVkHYWniJ[45])local tLQ0oU68xOTe=h1UXkoeUaz9tL3pPE:MultiLineBox(v,yVkHYWniJ[46],yVkHYWniJ[45],yVkHYWniJ[23])h1UXkoeUaz9tL3pPE:AddLabel(v,tLQ0oU68xOTe,yVkHYWniJ[147])h1UXkoeUaz9tL3pPE:GlueAcross(tLQ0oU68xOTe,v,yVkHYWniJ[48],-yVkHYWniJ[49],-yVkHYWniJ[48],yVkHYWniJ[49])tLQ0oU68xOTe.editBox:SetEnabled(yVkHYWniJ[37])local NAfuaEFS=h1UXkoeUaz9tL3pPE:Button(v,yVkHYWniJ[50],yVkHYWniJ[51],yVkHYWniJ[148])h1UXkoeUaz9tL3pPE:GlueBottom(NAfuaEFS,v,-yVkHYWniJ[65],yVkHYWniJ[48],yVkHYWniJ[149])NAfuaEFS.isDisabledAfterSend=yVkHYWniJ[37]NAfuaEFS:SetScript(yVkHYWniJ[150],function(jOzOcMWvGsKy2MX)if jOzOcMWvGsKy2MX.isDisabledAfterSend then GameTooltip:SetOwner(jOzOcMWvGsKy2MX,yVkHYWniJ[151])GameTooltip:SetText(yVkHYWniJ[152],yVkHYWniJ[12],yVkHYWniJ[12],yVkHYWniJ[12])GameTooltip:Show()end end)NAfuaEFS:SetScript(yVkHYWniJ[153],function()GameTooltip:Hide()end)NAfuaEFS:SetScript(yVkHYWniJ[154],function()if NAfuaEFS.isDisabledAfterSend then return end;NAfuaEFS:SetText(yVkHYWniJ[155])NAfuaEFS:GetFontString():SetTextColor(yVkHYWniJ[11],yVkHYWniJ[11],yVkHYWniJ[11])NAfuaEFS.isDisabledAfterSend=yVkHYWniJ[28]W:Start()end)local Do3H=h1UXkoeUaz9tL3pPE:Button(v,yVkHYWniJ[50],yVkHYWniJ[51],yVkHYWniJ[156])h1UXkoeUaz9tL3pPE:GlueBottom(Do3H,v,yVkHYWniJ[65],yVkHYWniJ[48],yVkHYWniJ[157])Do3H:SetScript(yVkHYWniJ[158],function()if NAfuaEFS.isDisabledAfterSend then W.sendWindow.inputBox:SetText(yVkHYWniJ[23])end;NAfuaEFS.isDisabledAfterSend=yVkHYWniJ[37]NAfuaEFS:SetText(yVkHYWniJ[159])NAfuaEFS:GetFontString():SetTextColor(yVkHYWniJ[12],yVkHYWniJ[12],yVkHYWniJ[12])v:Hide()W.sendWindow:Show()end)local lKQI3ca=h1UXkoeUaz9tL3pPE:Frame(v,yVkHYWniJ[55],yVkHYWniJ[55])local hsw3qbpk3bkglzh=h1UXkoeUaz9tL3pPE:Texture(lKQI3ca,yVkHYWniJ[55],yVkHYWniJ[55],CUwnBTI.LogoPath)h1UXkoeUaz9tL3pPE:GlueTop(hsw3qbpk3bkglzh,lKQI3ca,yVkHYWniJ[14],yVkHYWniJ[14],yVkHYWniJ[160])h1UXkoeUaz9tL3pPE:GlueBottom(lKQI3ca,v,-yVkHYWniJ[48],yVkHYWniJ[48],yVkHYWniJ[161])self.validationWindow=v;self.validationWindow.textBox=tLQ0oU68xOTe;self.validationWindow.sendButton=NAfuaEFS;self.validationWindow.backButton=Do3H;v:SetFrameLevel(CUwnBTI:GetNextFrameLevel())v:SetScript(yVkHYWniJ[162],function(I4DamLvV9YUaCes3F)I4DamLvV9YUaCes3F:SetFrameLevel(CUwnBTI:GetNextFrameLevel())end)end