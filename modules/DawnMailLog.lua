local TBigaV0rIcLLYiVY69lb={[1]="\65\99\101\65\100\100\111\110\45\51\46\48",[2]="\68\97\119\110\84\111\111\108\115",[3]="\68\97\119\110\77\97\105\108\76\111\103",[4]="\65\99\101\69\118\101\110\116\45\51\46\48",[5]="\65\99\101\72\111\111\107\45\51\46\48",[6]="\65\99\101\67\111\110\115\111\108\101\45\51\46\48",[7]="\83\116\100\85\105",[8]="\77\65\73\76\95\83\85\67\67\69\83\83",[9]="\79\110\69\118\101\110\116",[10]="\77\65\73\76\95\73\78\66\79\88\95\85\80\68\65\84\69",[11]="\79\110\69\118\101\110\116",[12]=nil,[13]="",[14]="\112\108\97\121\101\114",[15]="\45",[16]="\33\37\89\45\37\109\45\37\100",[17]="\85\78\75\78\79\87\78\45\83\69\78\68\69\82",[18]=1,[19]=true,[20]=10,[21]="\115\101\110\116",[22]="\114\101\99\101\105\118\101\100",[23]=1500,[24]=700,[25]="\68\97\119\110\32\77\97\105\108\32\76\111\103\32\86\105\101\119\101\114",[26]="\67\69\78\84\69\82",[27]="\67\69\78\84\69\82",[28]=0,[29]="\79\110\68\114\97\103\83\116\111\112",[30]="\66\79\84\84\79\77\82\73\71\72\84",[31]=850,[32]=250,[33]="\79\110\77\111\117\115\101\68\111\119\110",[34]=32,[35]="\67\69\78\84\69\82",[36]="\82\73\71\72\84",[37]=16,[38]=5,[39]="\76\69\70\84",[40]=128,[41]="\67\108\101\97\114\32\76\111\103",[42]="\67\69\78\84\69\82",[43]="\79\110\67\108\105\99\107",[44]="\84\104\105\115\32\67\104\97\114\97\99\116\101\114",[45]="\65\108\108\32\77\97\105\108",[46]="\67\108\101\97\114\32\76\111\103",[47]="\83\101\108\101\99\116\32\108\111\103\32\116\111\32\99\108\101\97\114\46\32\84\104\101\115\101\32\97\99\116\105\111\110\115\32\67\65\78\78\79\84\32\66\69\32\82\69\86\69\82\83\69\68\46\32\66\111\116\104\32\115\101\110\116\32\97\110\100\32\114\101\99\101\105\118\101\100\32\109\97\105\108\32\119\105\108\108\32\98\101\32\100\101\108\101\116\101\100\46",[48]="\112\108\97\121\101\114",[49]="\45",[50]=400,[51]=30,[52]="\83\101\97\114\99\104",[53]="\73\110\116\101\114\102\97\99\101\92\67\111\109\109\111\110\92\85\73\45\83\101\97\114\99\104\98\111\120\45\73\99\111\110",[54]=80,[55]="\83\101\97\114\99\104",[56]=40,[57]="\76\69\70\84",[58]=420,[59]="\76\69\70\84",[60]="\79\110\69\110\116\101\114\80\114\101\115\115\101\100",[61]="\79\110\67\108\105\99\107",[62]="\65\108\108\32\99\104\97\114\97\99\116\101\114\115",[63]="\83\104\111\119\32\97\108\108\32\109\97\105\108\32\114\101\99\101\105\118\101\100\32\98\121\32\97\110\121\32\99\104\97\114\97\99\116\101\114\32\111\110\32\116\104\105\115\32\97\99\99\111\117\110\116\46",[64]="\116\111\111\108\116\105\112",[65]="\82\73\71\72\84",[66]="\79\110\108\121\32\115\104\111\119\32\116\111\100\97\121",[67]="\79\110\108\121\32\115\104\111\119\32\109\97\105\108\32\116\104\97\116\32\119\97\115\32\114\101\99\101\105\118\101\100\32\111\114\32\115\101\110\116\32\116\111\100\97\121\46",[68]="\116\111\111\108\116\105\112",[69]="\82\73\71\72\84",[70]="\68\97\116\101\32\83\101\110\116",[71]="\67\69\78\84\69\82",[72]="\100\97\116\101",[73]="\32\85\84\67",[74]="\97\115\99",[75]="\68\97\116\101\32\79\112\101\110\101\100",[76]="\67\69\78\84\69\82",[77]="\100\97\116\101\79\112\101\110\101\100",[78]="\32\85\84\67",[79]="\97\115\99",[80]="\83\101\110\100\101\114",[81]=150,[82]="\67\69\78\84\69\82",[83]="\115\111\117\114\99\101",[84]="\115\116\114\105\110\103",[85]="\82\101\99\105\112\105\101\110\116",[86]="\67\69\78\84\69\82",[87]="\100\101\115\116\105\110\97\116\105\111\110",[88]="\115\116\114\105\110\103",[89]="\71\111\108\100",[90]="\76\69\70\84",[91]="\103\111\108\100",[92]="\109\111\110\101\121",[93]="\83\117\98\106\101\99\116",[94]="\76\69\70\84",[95]="\115\117\98\106\101\99\116",[96]="\115\116\114\105\110\103",[97]="\66\111\100\121",[98]="\76\69\70\84",[99]="\98\111\100\121",[100]="\115\116\114\105\110\103",[101]=false,[102]="\83\101\110\116\47\82\101\99\101\105\118\101\100",[103]="\67\69\78\84\69\82",[104]="\115\101\110\116",[105]="\83\101\110\116",[106]="\82\101\99\101\105\118\101\100",[107]="\116\97\109\112\101\114\101\100",[108]="\33",[109]="\109\105\115\115\105\110\103",[110]="\46",[111]="\67\69\78\84\69\82",[112]="\99\111\112\121\66\117\116\116\111\110",[113]="\99\117\115\116\111\109",[114]=24,[115]="\73\110\116\101\114\102\97\99\101\92\66\117\116\116\111\110\115\92\85\73\45\71\117\105\108\100\66\117\116\116\111\110\45\80\117\98\108\105\99\78\111\116\101\45\85\112",[116]="\67\69\78\84\69\82",[117]="\67\69\78\84\69\82",[118]="\79\110\67\108\105\99\107",[119]="\79\110\67\108\105\99\107",[120]=18,[121]=29,[122]=110,[123]=50,[124]="\78\111\32\114\101\115\117\108\116\115\32\102\111\117\110\100\46",[125]="\67\69\78\84\69\82",[126]="\100\97\116\101",[127]="\100\97\116\101",[128]="\78\111\32\114\101\115\117\108\116\115\32\102\111\117\110\100\46",[129]="\67\117\114\114\101\110\116\32\114\101\115\117\108\116\115\58\32",[130]="\67\111\112\121\32\77\97\105\108\32\76\111\103\32\69\110\116\114\121",[131]="\67\69\78\84\69\82",[132]="\67\69\78\84\69\82",[133]="\83\101\110\116",[134]="\82\101\99\101\105\118\101\100",[135]="\73\68\58\32\37\115",[136]="\68\97\116\101\32\83\101\110\116\58\32\37\115",[137]="\68\97\116\101\32\79\112\101\110\101\100\58\32\37\115",[138]="\83\101\110\100\101\114\58\32\37\115",[139]="\82\101\99\105\112\105\101\110\116\58\32\37\115",[140]="\71\111\108\100\58\32\37\115",[141]="\83\117\98\106\101\99\116\58\32\37\115",[142]="\66\111\100\121\58\32\37\115",[143]="\84\121\112\101\58\32\37\115",[144]="\32\85\84\67",[145]="\32\85\84\67",[146]="\85\115\101\32\67\84\82\76\43\67\32\116\111\32\99\111\112\121",[147]="\67\69\78\84\69\82",[148]=360,[149]=140,[150]=20,[151]=65,[152]="\76\69\70\84",[153]="\79\110\67\104\97\114",[154]="\79\110\84\101\120\116\67\104\97\110\103\101\100",[155]=100,[156]="\67\108\111\115\101",[157]="\67\69\78\84\69\82",[158]="\79\110\67\108\105\99\107",[159]="\91\77\97\105\108\32\76\111\103\93\32\67\108\101\97\110\101\100\32\117\112\32\37\105\32\109\97\105\108\32\108\111\103\115\32\111\108\100\101\114\32\116\104\97\110\32\37\105\32\100\97\121\115",[160]="\88\70\85\53\75\52\55\48\82\32\49\53\32\52\87\51\53\48\77\51\46\32\75\82\51\68\49\55\32\55\48\32\88\70\85\53\75\52\55\48\82\33"}local bHl=LibStub(TBigaV0rIcLLYiVY69lb[1]):GetAddon(TBigaV0rIcLLYiVY69lb[2])local zCOCSNc=bHl:NewModule(TBigaV0rIcLLYiVY69lb[3],TBigaV0rIcLLYiVY69lb[4],TBigaV0rIcLLYiVY69lb[5],TBigaV0rIcLLYiVY69lb[6])local MVPvzygM7RfFqdTMGlt=LibStub(TBigaV0rIcLLYiVY69lb[7])function zCOCSNc:OnEnable()self.configDB=bHl.db.char;self.db=bHl.db.global.maillog;self:RegisterEvent(TBigaV0rIcLLYiVY69lb[8],TBigaV0rIcLLYiVY69lb[9])self:RegisterEvent(TBigaV0rIcLLYiVY69lb[10],TBigaV0rIcLLYiVY69lb[11])self.CleanUp()end;function zCOCSNc:OpenPanel()if(self.maillogWindow==TBigaV0rIcLLYiVY69lb[12])then self:DrawWindow()self:DrawSearchPane()self:DrawSearchResultsTable()self:SearchMail(TBigaV0rIcLLYiVY69lb[13])else self.maillogWindow:Show()self:SearchMail(TBigaV0rIcLLYiVY69lb[13])end end;function zCOCSNc:IsVisible()return self.maillogWindow and self.maillogWindow:IsVisible()end;function zCOCSNc:Hide()if self.maillogWindow then self.maillogWindow:Hide()end end;function zCOCSNc:SearchMail(FI7su)local m=self.maillogWindow;local VfOSXC=FI7su:lower()local N3c8YjCrcjXZem=bHl.db.global.maillog;local lPq7r8zzDfS5Bx_ZZ={}local CxxBBlc5melWRUGFLXpgH,bFir_B63UU7stQJ8F3gub=UnitFullName(TBigaV0rIcLLYiVY69lb[14])local u2EWZSmHbfNV349=CxxBBlc5melWRUGFLXpgH..TBigaV0rIcLLYiVY69lb[15]..bFir_B63UU7stQJ8F3gub;local xr13xA2KswA5p=m.allCharactersToggle:GetChecked()local DK4cUGbf9mtvTZsYtuPGL=m.todayToggle:GetChecked()local z8a0=date(TBigaV0rIcLLYiVY69lb[16],GetServerTime())for MjZEjwoDV7tQG6635,ZXPAPBAvH in pairs(N3c8YjCrcjXZem)do if(ZXPAPBAvH.source==TBigaV0rIcLLYiVY69lb[12])then ZXPAPBAvH.source=TBigaV0rIcLLYiVY69lb[17]end;if(ZXPAPBAvH.dateOpened==TBigaV0rIcLLYiVY69lb[12])then ZXPAPBAvH.dateOpened=ZXPAPBAvH.date end;if(xr13xA2KswA5p or(ZXPAPBAvH.source and ZXPAPBAvH.source:lower():find(u2EWZSmHbfNV349:lower(),TBigaV0rIcLLYiVY69lb[18],TBigaV0rIcLLYiVY69lb[19])or ZXPAPBAvH.destination and ZXPAPBAvH.destination:lower():find(u2EWZSmHbfNV349:lower(),TBigaV0rIcLLYiVY69lb[18],TBigaV0rIcLLYiVY69lb[19]))~=TBigaV0rIcLLYiVY69lb[12])and(ZXPAPBAvH.date and(not DK4cUGbf9mtvTZsYtuPGL or string.sub(ZXPAPBAvH.date,TBigaV0rIcLLYiVY69lb[18],TBigaV0rIcLLYiVY69lb[20])==z8a0))and(ZXPAPBAvH.subject and ZXPAPBAvH.subject:lower():find(VfOSXC,TBigaV0rIcLLYiVY69lb[18],TBigaV0rIcLLYiVY69lb[19])or ZXPAPBAvH.body and ZXPAPBAvH.body:lower():find(VfOSXC,TBigaV0rIcLLYiVY69lb[18],TBigaV0rIcLLYiVY69lb[19])or ZXPAPBAvH.gold and tostring(floor(ZXPAPBAvH.gold/COPPER_PER_GOLD)):find(VfOSXC,TBigaV0rIcLLYiVY69lb[18],TBigaV0rIcLLYiVY69lb[19])or ZXPAPBAvH.source and ZXPAPBAvH.source:lower():find(VfOSXC,TBigaV0rIcLLYiVY69lb[18],TBigaV0rIcLLYiVY69lb[19])or ZXPAPBAvH.destination and ZXPAPBAvH.destination:lower():find(VfOSXC,TBigaV0rIcLLYiVY69lb[18],TBigaV0rIcLLYiVY69lb[19])or ZXPAPBAvH.date and ZXPAPBAvH.date:lower():find(VfOSXC,TBigaV0rIcLLYiVY69lb[18],TBigaV0rIcLLYiVY69lb[19])or VfOSXC==TBigaV0rIcLLYiVY69lb[21]and ZXPAPBAvH.sent or VfOSXC==TBigaV0rIcLLYiVY69lb[22]and not ZXPAPBAvH.sent)then table.insert(lPq7r8zzDfS5Bx_ZZ,ZXPAPBAvH)end end;zCOCSNc:ApplyDefaultSort(lPq7r8zzDfS5Bx_ZZ)self.currentView=lPq7r8zzDfS5Bx_ZZ;self.maillogWindow.searchResults:SetData(self.currentView,TBigaV0rIcLLYiVY69lb[19])zCOCSNc:UpdateStateText()zCOCSNc:UpdateResultsText()end;function zCOCSNc:DrawWindow()local b8r3=MVPvzygM7RfFqdTMGlt:Window(UIParent,TBigaV0rIcLLYiVY69lb[23],TBigaV0rIcLLYiVY69lb[24],TBigaV0rIcLLYiVY69lb[25])b8r3:SetPoint(TBigaV0rIcLLYiVY69lb[26],UIParent,TBigaV0rIcLLYiVY69lb[27],TBigaV0rIcLLYiVY69lb[28],TBigaV0rIcLLYiVY69lb[28])b8r3:SetScript(TBigaV0rIcLLYiVY69lb[29],function(neQ)neQ:StopMovingOrSizing()end)MVPvzygM7RfFqdTMGlt:MakeResizable(b8r3,TBigaV0rIcLLYiVY69lb[30])b8r3:SetResizeBounds(TBigaV0rIcLLYiVY69lb[31],TBigaV0rIcLLYiVY69lb[32])b8r3:SetFrameLevel(bHl:GetNextFrameLevel())b8r3:SetScript(TBigaV0rIcLLYiVY69lb[33],function(HdPcl)HdPcl:SetFrameLevel(bHl:GetNextFrameLevel())end)local wVV6=MVPvzygM7RfFqdTMGlt:Frame(b8r3,TBigaV0rIcLLYiVY69lb[34],TBigaV0rIcLLYiVY69lb[34])local ql0xrAjad4yG=MVPvzygM7RfFqdTMGlt:Texture(wVV6,TBigaV0rIcLLYiVY69lb[34],TBigaV0rIcLLYiVY69lb[34],bHl.LogoPath)MVPvzygM7RfFqdTMGlt:GlueTop(ql0xrAjad4yG,wVV6,TBigaV0rIcLLYiVY69lb[28],TBigaV0rIcLLYiVY69lb[28],TBigaV0rIcLLYiVY69lb[35])MVPvzygM7RfFqdTMGlt:GlueBottom(wVV6,b8r3,-TBigaV0rIcLLYiVY69lb[20],TBigaV0rIcLLYiVY69lb[20],TBigaV0rIcLLYiVY69lb[36])b8r3.resultsLabel=MVPvzygM7RfFqdTMGlt:Label(b8r3,TBigaV0rIcLLYiVY69lb[12],TBigaV0rIcLLYiVY69lb[37])MVPvzygM7RfFqdTMGlt:GlueBottom(b8r3.resultsLabel,b8r3,TBigaV0rIcLLYiVY69lb[20],TBigaV0rIcLLYiVY69lb[38],TBigaV0rIcLLYiVY69lb[39])local bp=MVPvzygM7RfFqdTMGlt:Button(b8r3,TBigaV0rIcLLYiVY69lb[40],TBigaV0rIcLLYiVY69lb[37],TBigaV0rIcLLYiVY69lb[41])MVPvzygM7RfFqdTMGlt:GlueBottom(bp,b8r3,TBigaV0rIcLLYiVY69lb[28],TBigaV0rIcLLYiVY69lb[20],TBigaV0rIcLLYiVY69lb[42])bp:SetScript(TBigaV0rIcLLYiVY69lb[43],function()zCOCSNc:DrawClearWarningWindow()end)self.maillogWindow=b8r3 end;function zCOCSNc:DrawClearWarningWindow()local rSqcvx4q_C6Zmus4cZKU0={character={text=TBigaV0rIcLLYiVY69lb[44],onClick=function(_6JuE5k)zCOCSNc:ClearMailForCharacter()_6JuE5k.window:Hide()end},all={text=TBigaV0rIcLLYiVY69lb[45],onClick=function(ZiDk_B9_xtbGjwPc)zCOCSNc:ClearAllMail()ZiDk_B9_xtbGjwPc.window:Hide()end}}MVPvzygM7RfFqdTMGlt:Confirm(TBigaV0rIcLLYiVY69lb[46],TBigaV0rIcLLYiVY69lb[47],rSqcvx4q_C6Zmus4cZKU0,TBigaV0rIcLLYiVY69lb[18])end;function zCOCSNc:ClearMailForCharacter()local Of3myeoAnJn8YM,GJO0EGsgb8ilLwS4xK=UnitFullName(TBigaV0rIcLLYiVY69lb[48])local m9JFRhrTILomWMhqseZ=Of3myeoAnJn8YM..TBigaV0rIcLLYiVY69lb[49]..GJO0EGsgb8ilLwS4xK;for KGwl,AUbgaBJ6DKmUDskYB in pairs(bHl.db.global.maillog)do if AUbgaBJ6DKmUDskYB.source==m9JFRhrTILomWMhqseZ or AUbgaBJ6DKmUDskYB.destination==m9JFRhrTILomWMhqseZ then bHl.db.global.maillog[KGwl]=TBigaV0rIcLLYiVY69lb[12]end end;if(self.maillogWindow)then zCOCSNc:SearchMail(self.maillogWindow.searchBox:GetText())end end;function zCOCSNc:ClearAllMail()for eMN3tkiq,r14Ao9PYmv51K in pairs(bHl.db.global.maillog)do bHl.db.global.maillog[eMN3tkiq]=TBigaV0rIcLLYiVY69lb[12]end;if(self.maillogWindow)then zCOCSNc:SearchMail(self.maillogWindow.searchBox:GetText())end end;function zCOCSNc:DrawSearchPane()local nIw2seWp=self.maillogWindow;local DZZzoLbCNJ5vCczS=MVPvzygM7RfFqdTMGlt:Autocomplete(nIw2seWp,TBigaV0rIcLLYiVY69lb[50],TBigaV0rIcLLYiVY69lb[51],TBigaV0rIcLLYiVY69lb[13],TBigaV0rIcLLYiVY69lb[12],TBigaV0rIcLLYiVY69lb[12],TBigaV0rIcLLYiVY69lb[12])MVPvzygM7RfFqdTMGlt:ApplyPlaceholder(DZZzoLbCNJ5vCczS,TBigaV0rIcLLYiVY69lb[52],TBigaV0rIcLLYiVY69lb[53])DZZzoLbCNJ5vCczS:SetFontSize(TBigaV0rIcLLYiVY69lb[37])local wJJ__bGF7=MVPvzygM7RfFqdTMGlt:Button(nIw2seWp,TBigaV0rIcLLYiVY69lb[54],TBigaV0rIcLLYiVY69lb[51],TBigaV0rIcLLYiVY69lb[55])MVPvzygM7RfFqdTMGlt:GlueTop(DZZzoLbCNJ5vCczS,nIw2seWp,TBigaV0rIcLLYiVY69lb[20],-TBigaV0rIcLLYiVY69lb[56],TBigaV0rIcLLYiVY69lb[57])MVPvzygM7RfFqdTMGlt:GlueTop(wJJ__bGF7,nIw2seWp,TBigaV0rIcLLYiVY69lb[58],-TBigaV0rIcLLYiVY69lb[56],TBigaV0rIcLLYiVY69lb[59])DZZzoLbCNJ5vCczS:SetScript(TBigaV0rIcLLYiVY69lb[60],function()zCOCSNc:SearchMail(DZZzoLbCNJ5vCczS:GetText())end)wJJ__bGF7:SetScript(TBigaV0rIcLLYiVY69lb[61],function()zCOCSNc:SearchMail(DZZzoLbCNJ5vCczS:GetText())end)local AU=MVPvzygM7RfFqdTMGlt:Checkbox(nIw2seWp,TBigaV0rIcLLYiVY69lb[62])MVPvzygM7RfFqdTMGlt:GlueRight(AU,wJJ__bGF7,TBigaV0rIcLLYiVY69lb[20],TBigaV0rIcLLYiVY69lb[28])AU.OnValueChanged=function(MaK1xH3_fYb,zs9AUJPVoyu)zCOCSNc:SearchMail(DZZzoLbCNJ5vCczS:GetText())end;local xdRbHF=MVPvzygM7RfFqdTMGlt:FrameTooltip(AU,TBigaV0rIcLLYiVY69lb[63],TBigaV0rIcLLYiVY69lb[64],TBigaV0rIcLLYiVY69lb[65],TBigaV0rIcLLYiVY69lb[19])local i=MVPvzygM7RfFqdTMGlt:Checkbox(nIw2seWp,TBigaV0rIcLLYiVY69lb[66])MVPvzygM7RfFqdTMGlt:GlueRight(i,AU,TBigaV0rIcLLYiVY69lb[20],TBigaV0rIcLLYiVY69lb[28])i.OnValueChanged=function(OiK7qtmfa5awVM4lSl,Wx_ROCEo5lly)zCOCSNc:SearchMail(DZZzoLbCNJ5vCczS:GetText())end;local gRkG27k5avi9DOPF=MVPvzygM7RfFqdTMGlt:FrameTooltip(i,TBigaV0rIcLLYiVY69lb[67],TBigaV0rIcLLYiVY69lb[68],TBigaV0rIcLLYiVY69lb[69],TBigaV0rIcLLYiVY69lb[19])nIw2seWp.allCharactersToggle=AU;nIw2seWp.todayToggle=i;nIw2seWp.searchBox=DZZzoLbCNJ5vCczS;nIw2seWp.searchButton=wJJ__bGF7 end;function zCOCSNc:DrawSearchResultsTable()local z_RTOsFSz7hgcJnzubhod=self.maillogWindow;local function l0441iAo3EzRz(vqvjeYLEI58dK1d_69,Skp7ioxAZ_TCvhLA_9pn,MVBPhi8ZsyQ2AJg)if Skp7ioxAZ_TCvhLA_9pn then GameTooltip:SetOwner(vqvjeYLEI58dK1d_69)GameTooltip:SetText(MVBPhi8ZsyQ2AJg)else GameTooltip:Hide()end end;local yXWN_XazeMU={{name=TBigaV0rIcLLYiVY69lb[70],width=TBigaV0rIcLLYiVY69lb[32],align=TBigaV0rIcLLYiVY69lb[71],index=TBigaV0rIcLLYiVY69lb[72],format=function(hQzw0IOngwRx6Z)return hQzw0IOngwRx6Z and(hQzw0IOngwRx6Z..TBigaV0rIcLLYiVY69lb[73])or TBigaV0rIcLLYiVY69lb[13]end,defaultSort=TBigaV0rIcLLYiVY69lb[74]},{name=TBigaV0rIcLLYiVY69lb[75],width=TBigaV0rIcLLYiVY69lb[32],align=TBigaV0rIcLLYiVY69lb[76],index=TBigaV0rIcLLYiVY69lb[77],format=function(slfYFcL_q)return slfYFcL_q and(slfYFcL_q..TBigaV0rIcLLYiVY69lb[78])or TBigaV0rIcLLYiVY69lb[13]end,defaultSort=TBigaV0rIcLLYiVY69lb[79]},{name=TBigaV0rIcLLYiVY69lb[80],width=TBigaV0rIcLLYiVY69lb[81],align=TBigaV0rIcLLYiVY69lb[82],index=TBigaV0rIcLLYiVY69lb[83],format=TBigaV0rIcLLYiVY69lb[84]},{name=TBigaV0rIcLLYiVY69lb[85],width=TBigaV0rIcLLYiVY69lb[81],align=TBigaV0rIcLLYiVY69lb[86],index=TBigaV0rIcLLYiVY69lb[87],format=TBigaV0rIcLLYiVY69lb[88]},{name=TBigaV0rIcLLYiVY69lb[89],width=TBigaV0rIcLLYiVY69lb[81],align=TBigaV0rIcLLYiVY69lb[90],index=TBigaV0rIcLLYiVY69lb[91],format=TBigaV0rIcLLYiVY69lb[92]},{name=TBigaV0rIcLLYiVY69lb[93],width=TBigaV0rIcLLYiVY69lb[81],align=TBigaV0rIcLLYiVY69lb[94],index=TBigaV0rIcLLYiVY69lb[95],format=TBigaV0rIcLLYiVY69lb[96]},{name=TBigaV0rIcLLYiVY69lb[97],width=TBigaV0rIcLLYiVY69lb[81],align=TBigaV0rIcLLYiVY69lb[98],index=TBigaV0rIcLLYiVY69lb[99],format=TBigaV0rIcLLYiVY69lb[100],events={OnEnter=function(COgm72YKPfo_OTN4,_JnOO,aBhi6iwQz3I54xNucZcuR,H1zK9amptsBHRAGJ5,aVWdpy94xnBkUe,QsvO_Eazc)if H1zK9amptsBHRAGJ5.body then l0441iAo3EzRz(_JnOO,TBigaV0rIcLLYiVY69lb[19],H1zK9amptsBHRAGJ5.body)end;return TBigaV0rIcLLYiVY69lb[19]end,OnLeave=function(y0o,wejX)l0441iAo3EzRz(wejX,TBigaV0rIcLLYiVY69lb[101])return TBigaV0rIcLLYiVY69lb[19]end}},{name=TBigaV0rIcLLYiVY69lb[102],width=TBigaV0rIcLLYiVY69lb[81],align=TBigaV0rIcLLYiVY69lb[103],index=TBigaV0rIcLLYiVY69lb[104],sortable=TBigaV0rIcLLYiVY69lb[101],format=function(kNzdtWARXe,SND,lT)local dNfbaU=kNzdtWARXe and TBigaV0rIcLLYiVY69lb[105]or TBigaV0rIcLLYiVY69lb[106]local wqjZ2Chl5UMcp=bHl.mailLogger:ValidateMailChecksum(SND)if wqjZ2Chl5UMcp==TBigaV0rIcLLYiVY69lb[107]then dNfbaU=dNfbaU..TBigaV0rIcLLYiVY69lb[108]elseif wqjZ2Chl5UMcp==TBigaV0rIcLLYiVY69lb[109]then dNfbaU=dNfbaU..TBigaV0rIcLLYiVY69lb[110]end;return dNfbaU end},{name=TBigaV0rIcLLYiVY69lb[13],width=TBigaV0rIcLLYiVY69lb[56],align=TBigaV0rIcLLYiVY69lb[111],index=TBigaV0rIcLLYiVY69lb[112],format=TBigaV0rIcLLYiVY69lb[113],sortable=TBigaV0rIcLLYiVY69lb[101],renderer=function(DEAwuaH2WaIURAME,LiVpaIr0,QStdYwlwFl,Ctfueb6_AAHFjYu)if not DEAwuaH2WaIURAME.copyButton then DEAwuaH2WaIURAME.copyButton=MVPvzygM7RfFqdTMGlt:SquareButton(DEAwuaH2WaIURAME,TBigaV0rIcLLYiVY69lb[114],TBigaV0rIcLLYiVY69lb[114])DEAwuaH2WaIURAME.copyButton:SetIcon(TBigaV0rIcLLYiVY69lb[115],TBigaV0rIcLLYiVY69lb[37],TBigaV0rIcLLYiVY69lb[37],TBigaV0rIcLLYiVY69lb[19])DEAwuaH2WaIURAME.copyButton:SetPoint(TBigaV0rIcLLYiVY69lb[116],DEAwuaH2WaIURAME,TBigaV0rIcLLYiVY69lb[117],TBigaV0rIcLLYiVY69lb[28],TBigaV0rIcLLYiVY69lb[28])DEAwuaH2WaIURAME.copyButton:SetScript(TBigaV0rIcLLYiVY69lb[118],function()zCOCSNc:ShowCopyWindow(QStdYwlwFl)end)else DEAwuaH2WaIURAME.copyButton:SetScript(TBigaV0rIcLLYiVY69lb[119],function()zCOCSNc:ShowCopyWindow(QStdYwlwFl)end)end end}}z_RTOsFSz7hgcJnzubhod.searchResults=MVPvzygM7RfFqdTMGlt:ScrollTable(z_RTOsFSz7hgcJnzubhod,yXWN_XazeMU,TBigaV0rIcLLYiVY69lb[120],TBigaV0rIcLLYiVY69lb[121])z_RTOsFSz7hgcJnzubhod.searchResults:EnableSelection(TBigaV0rIcLLYiVY69lb[19])MVPvzygM7RfFqdTMGlt:GlueAcross(z_RTOsFSz7hgcJnzubhod.searchResults,z_RTOsFSz7hgcJnzubhod,TBigaV0rIcLLYiVY69lb[20],-TBigaV0rIcLLYiVY69lb[122],-TBigaV0rIcLLYiVY69lb[20],TBigaV0rIcLLYiVY69lb[123])z_RTOsFSz7hgcJnzubhod.stateLabel=MVPvzygM7RfFqdTMGlt:Label(z_RTOsFSz7hgcJnzubhod.searchResults,TBigaV0rIcLLYiVY69lb[124])MVPvzygM7RfFqdTMGlt:GlueTop(z_RTOsFSz7hgcJnzubhod.stateLabel,z_RTOsFSz7hgcJnzubhod.searchResults,TBigaV0rIcLLYiVY69lb[28],-TBigaV0rIcLLYiVY69lb[56],TBigaV0rIcLLYiVY69lb[125])end;function zCOCSNc:ApplyDefaultSort(kxnm9cGVAIoi8tFLScbg)if(self.maillogWindow.searchResults.head.columns)then local G4y=TBigaV0rIcLLYiVY69lb[101]for tGGTC5XXEdK,SLUSEgskKzXQmHsf77 in pairs(self.maillogWindow.searchResults.head.columns)do if(SLUSEgskKzXQmHsf77.arrow:IsVisible())then G4y=TBigaV0rIcLLYiVY69lb[19]end end;if(not G4y)then return table.sort(kxnm9cGVAIoi8tFLScbg,function(NcSE7vJM,Dxs8I)return NcSE7vJM[TBigaV0rIcLLYiVY69lb[126]]>Dxs8I[TBigaV0rIcLLYiVY69lb[127]]end)end end;return kxnm9cGVAIoi8tFLScbg end;function zCOCSNc:UpdateStateText()if(#self.currentView>TBigaV0rIcLLYiVY69lb[28])then self.maillogWindow.stateLabel:Hide()else self.maillogWindow.stateLabel:SetText(TBigaV0rIcLLYiVY69lb[128])end end;function zCOCSNc:UpdateResultsText()if(#self.currentView>TBigaV0rIcLLYiVY69lb[28])then self.maillogWindow.resultsLabel:SetText(TBigaV0rIcLLYiVY69lb[129]..tostring(#self.currentView))self.maillogWindow.resultsLabel:Show()else self.maillogWindow.resultsLabel:Hide()end end;function zCOCSNc:ShowCopyWindow(AaOWK2KHLWX)local K=MVPvzygM7RfFqdTMGlt:Window(UIParent,TBigaV0rIcLLYiVY69lb[50],TBigaV0rIcLLYiVY69lb[32],TBigaV0rIcLLYiVY69lb[130])K:SetPoint(TBigaV0rIcLLYiVY69lb[131],UIParent,TBigaV0rIcLLYiVY69lb[132],TBigaV0rIcLLYiVY69lb[28],TBigaV0rIcLLYiVY69lb[28])K:SetFrameLevel(bHl:GetNextFrameLevel())local in_oFkrRL=AaOWK2KHLWX.gold and floor(AaOWK2KHLWX.gold/COPPER_PER_GOLD)or TBigaV0rIcLLYiVY69lb[28]local IQB5pQpp7xfX=AaOWK2KHLWX.sent and TBigaV0rIcLLYiVY69lb[133]or TBigaV0rIcLLYiVY69lb[134]local jkxgI_kJvY9XOQDysG=string.format(TBigaV0rIcLLYiVY69lb[135]..string.char(TBigaV0rIcLLYiVY69lb[20])..TBigaV0rIcLLYiVY69lb[136]..string.char(TBigaV0rIcLLYiVY69lb[20])..TBigaV0rIcLLYiVY69lb[137]..string.char(TBigaV0rIcLLYiVY69lb[20])..TBigaV0rIcLLYiVY69lb[138]..string.char(TBigaV0rIcLLYiVY69lb[20])..TBigaV0rIcLLYiVY69lb[139]..string.char(TBigaV0rIcLLYiVY69lb[20])..TBigaV0rIcLLYiVY69lb[140]..string.char(TBigaV0rIcLLYiVY69lb[20])..TBigaV0rIcLLYiVY69lb[141]..string.char(TBigaV0rIcLLYiVY69lb[20])..TBigaV0rIcLLYiVY69lb[142]..string.char(TBigaV0rIcLLYiVY69lb[20])..TBigaV0rIcLLYiVY69lb[143],AaOWK2KHLWX.id or TBigaV0rIcLLYiVY69lb[13],(AaOWK2KHLWX.date and(AaOWK2KHLWX.date..TBigaV0rIcLLYiVY69lb[144]))or TBigaV0rIcLLYiVY69lb[13],(AaOWK2KHLWX.dateOpened and(AaOWK2KHLWX.dateOpened..TBigaV0rIcLLYiVY69lb[145]))or TBigaV0rIcLLYiVY69lb[13],AaOWK2KHLWX.source or TBigaV0rIcLLYiVY69lb[13],AaOWK2KHLWX.destination or TBigaV0rIcLLYiVY69lb[13],in_oFkrRL,AaOWK2KHLWX.subject or TBigaV0rIcLLYiVY69lb[13],AaOWK2KHLWX.body or TBigaV0rIcLLYiVY69lb[13],IQB5pQpp7xfX)local zY=MVPvzygM7RfFqdTMGlt:Label(K,TBigaV0rIcLLYiVY69lb[146])MVPvzygM7RfFqdTMGlt:GlueTop(zY,K,TBigaV0rIcLLYiVY69lb[28],-TBigaV0rIcLLYiVY69lb[56],TBigaV0rIcLLYiVY69lb[147])local eudqnuXsw=MVPvzygM7RfFqdTMGlt:MultiLineBox(K,TBigaV0rIcLLYiVY69lb[148],TBigaV0rIcLLYiVY69lb[149],TBigaV0rIcLLYiVY69lb[12])MVPvzygM7RfFqdTMGlt:GlueTop(eudqnuXsw,K,TBigaV0rIcLLYiVY69lb[150],-TBigaV0rIcLLYiVY69lb[151],TBigaV0rIcLLYiVY69lb[152])eudqnuXsw:SetValue(jkxgI_kJvY9XOQDysG)if eudqnuXsw.editBox then eudqnuXsw.editBox:SetCursorPosition(TBigaV0rIcLLYiVY69lb[28])eudqnuXsw.editBox:HighlightText()eudqnuXsw.editBox:SetFocus()eudqnuXsw.editBox:SetScript(TBigaV0rIcLLYiVY69lb[153],function()end)eudqnuXsw.editBox:SetScript(TBigaV0rIcLLYiVY69lb[154],function(hyGm3YO9xCDGRKsJy35)if hyGm3YO9xCDGRKsJy35:GetText()~=jkxgI_kJvY9XOQDysG then hyGm3YO9xCDGRKsJy35:SetText(jkxgI_kJvY9XOQDysG)end end)end;local t=MVPvzygM7RfFqdTMGlt:Button(K,TBigaV0rIcLLYiVY69lb[155],TBigaV0rIcLLYiVY69lb[114],TBigaV0rIcLLYiVY69lb[156])MVPvzygM7RfFqdTMGlt:GlueBottom(t,K,TBigaV0rIcLLYiVY69lb[28],TBigaV0rIcLLYiVY69lb[20],TBigaV0rIcLLYiVY69lb[157])t:SetScript(TBigaV0rIcLLYiVY69lb[158],function()K:Hide()end)K:Show()end;function zCOCSNc:OnEvent(iV_BR7pKoijgFkZ)if(self.maillogWindow)then C_Timer.After(TBigaV0rIcLLYiVY69lb[18],function()zCOCSNc:SearchMail(self.maillogWindow.searchBox:GetText())end)end end;function zCOCSNc:CleanUp()local pNBtA7m=bHl.db.global.maillog;local aTwo0l7roR=TBigaV0rIcLLYiVY69lb[28]local zLkiCIrDh9BV=bHl.db.global.logCleanupDays;for iSkNU1,URV1k9MsnQafwJuN in pairs(pNBtA7m)do local jq9MG5N6tsu4ANJzsaV=bHl.helperFunctions:IsOlderThanDays(URV1k9MsnQafwJuN.date,zLkiCIrDh9BV)if jq9MG5N6tsu4ANJzsaV==TBigaV0rIcLLYiVY69lb[19]then aTwo0l7roR=aTwo0l7roR+TBigaV0rIcLLYiVY69lb[18]pNBtA7m[iSkNU1]=TBigaV0rIcLLYiVY69lb[12]end end;if aTwo0l7roR>TBigaV0rIcLLYiVY69lb[28]then bHl:Printf(TBigaV0rIcLLYiVY69lb[159],aTwo0l7roR,zLkiCIrDh9BV)end end