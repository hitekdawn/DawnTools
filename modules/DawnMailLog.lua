local EKH_2Yg8k1w5V31pVk={[1]="\65\99\101\65\100\100\111\110\45\51\46\48",[2]="\68\97\119\110\84\111\111\108\115",[3]="\68\97\119\110\77\97\105\108\76\111\103",[4]="\65\99\101\69\118\101\110\116\45\51\46\48",[5]="\65\99\101\72\111\111\107\45\51\46\48",[6]="\65\99\101\67\111\110\115\111\108\101\45\51\46\48",[7]="\83\116\100\85\105",[8]="\77\65\73\76\95\83\85\67\67\69\83\83",[9]="\79\110\69\118\101\110\116",[10]="\77\65\73\76\95\73\78\66\79\88\95\85\80\68\65\84\69",[11]="\79\110\69\118\101\110\116",[12]=nil,[13]="",[14]="\112\108\97\121\101\114",[15]="\45",[16]="\33\37\89\45\37\109\45\37\100",[17]="\85\78\75\78\79\87\78\45\83\69\78\68\69\82",[18]=1,[19]=true,[20]=10,[21]="\115\101\110\116",[22]="\114\101\99\101\105\118\101\100",[23]=1500,[24]=700,[25]="\68\97\119\110\32\77\97\105\108\32\76\111\103\32\86\105\101\119\101\114",[26]="\67\69\78\84\69\82",[27]="\67\69\78\84\69\82",[28]=0,[29]="\79\110\68\114\97\103\83\116\111\112",[30]="\66\79\84\84\79\77\82\73\71\72\84",[31]="\84\79\80\76\69\70\84",[32]=850,[33]=250,[34]="\79\110\77\111\117\115\101\68\111\119\110",[35]=32,[36]="\67\69\78\84\69\82",[37]="\82\73\71\72\84",[38]=16,[39]=5,[40]="\76\69\70\84",[41]=128,[42]="\67\108\101\97\114\32\76\111\103",[43]="\67\69\78\84\69\82",[44]="\79\110\67\108\105\99\107",[45]="\84\104\105\115\32\67\104\97\114\97\99\116\101\114",[46]="\65\108\108\32\77\97\105\108",[47]="\67\108\101\97\114\32\76\111\103",[48]="\83\101\108\101\99\116\32\108\111\103\32\116\111\32\99\108\101\97\114\46\32\84\104\101\115\101\32\97\99\116\105\111\110\115\32\67\65\78\78\79\84\32\66\69\32\82\69\86\69\82\83\69\68\46\32\66\111\116\104\32\115\101\110\116\32\97\110\100\32\114\101\99\101\105\118\101\100\32\109\97\105\108\32\119\105\108\108\32\98\101\32\100\101\108\101\116\101\100\46",[49]="\112\108\97\121\101\114",[50]="\45",[51]=400,[52]=30,[53]="\83\101\97\114\99\104",[54]="\73\110\116\101\114\102\97\99\101\92\67\111\109\109\111\110\92\85\73\45\83\101\97\114\99\104\98\111\120\45\73\99\111\110",[55]=80,[56]="\83\101\97\114\99\104",[57]=40,[58]="\76\69\70\84",[59]=420,[60]="\76\69\70\84",[61]="\79\110\69\110\116\101\114\80\114\101\115\115\101\100",[62]="\79\110\67\108\105\99\107",[63]="\65\108\108\32\99\104\97\114\97\99\116\101\114\115",[64]="\83\104\111\119\32\97\108\108\32\109\97\105\108\32\114\101\99\101\105\118\101\100\32\98\121\32\97\110\121\32\99\104\97\114\97\99\116\101\114\32\111\110\32\116\104\105\115\32\97\99\99\111\117\110\116\46",[65]="\116\111\111\108\116\105\112",[66]="\82\73\71\72\84",[67]="\79\110\108\121\32\115\104\111\119\32\116\111\100\97\121",[68]="\79\110\108\121\32\115\104\111\119\32\109\97\105\108\32\116\104\97\116\32\119\97\115\32\114\101\99\101\105\118\101\100\32\111\114\32\115\101\110\116\32\116\111\100\97\121\46",[69]="\116\111\111\108\116\105\112",[70]="\82\73\71\72\84",[71]="\68\97\116\101\32\83\101\110\116",[72]="\67\69\78\84\69\82",[73]="\100\97\116\101",[74]="\32\85\84\67",[75]="\97\115\99",[76]="\68\97\116\101\32\79\112\101\110\101\100",[77]="\67\69\78\84\69\82",[78]="\100\97\116\101\79\112\101\110\101\100",[79]="\32\85\84\67",[80]="\97\115\99",[81]="\83\101\110\100\101\114",[82]=150,[83]="\67\69\78\84\69\82",[84]="\115\111\117\114\99\101",[85]="\115\116\114\105\110\103",[86]="\82\101\99\105\112\105\101\110\116",[87]="\67\69\78\84\69\82",[88]="\100\101\115\116\105\110\97\116\105\111\110",[89]="\115\116\114\105\110\103",[90]="\71\111\108\100",[91]="\76\69\70\84",[92]="\103\111\108\100",[93]="\109\111\110\101\121",[94]="\83\117\98\106\101\99\116",[95]="\76\69\70\84",[96]="\115\117\98\106\101\99\116",[97]="\115\116\114\105\110\103",[98]="\66\111\100\121",[99]="\76\69\70\84",[100]="\98\111\100\121",[101]="\115\116\114\105\110\103",[102]=false,[103]="\83\101\110\116\47\82\101\99\101\105\118\101\100",[104]="\67\69\78\84\69\82",[105]="\115\101\110\116",[106]="\83\101\110\116",[107]="\82\101\99\101\105\118\101\100",[108]="\116\97\109\112\101\114\101\100",[109]="\33",[110]="\109\105\115\115\105\110\103",[111]="\46",[112]="\67\69\78\84\69\82",[113]="\99\111\112\121\66\117\116\116\111\110",[114]="\99\117\115\116\111\109",[115]=24,[116]="\73\110\116\101\114\102\97\99\101\92\66\117\116\116\111\110\115\92\85\73\45\71\117\105\108\100\66\117\116\116\111\110\45\80\117\98\108\105\99\78\111\116\101\45\85\112",[117]="\67\69\78\84\69\82",[118]="\67\69\78\84\69\82",[119]="\79\110\67\108\105\99\107",[120]="\79\110\67\108\105\99\107",[121]=18,[122]=29,[123]="\79\110\83\105\122\101\67\104\97\110\103\101\100",[124]=110,[125]=50,[126]="\78\111\32\114\101\115\117\108\116\115\32\102\111\117\110\100\46",[127]="\67\69\78\84\69\82",[128]="\100\97\116\101",[129]="\100\97\116\101",[130]="\78\111\32\114\101\115\117\108\116\115\32\102\111\117\110\100\46",[131]="\67\117\114\114\101\110\116\32\114\101\115\117\108\116\115\58\32",[132]="\67\111\112\121\32\77\97\105\108\32\76\111\103\32\69\110\116\114\121",[133]="\67\69\78\84\69\82",[134]="\67\69\78\84\69\82",[135]="\83\101\110\116",[136]="\82\101\99\101\105\118\101\100",[137]="\73\68\58\32\37\115",[138]="\68\97\116\101\32\83\101\110\116\58\32\37\115",[139]="\68\97\116\101\32\79\112\101\110\101\100\58\32\37\115",[140]="\83\101\110\100\101\114\58\32\37\115",[141]="\82\101\99\105\112\105\101\110\116\58\32\37\115",[142]="\71\111\108\100\58\32\37\115",[143]="\83\117\98\106\101\99\116\58\32\37\115",[144]="\66\111\100\121\58\32\37\115",[145]="\84\121\112\101\58\32\37\115",[146]="\32\85\84\67",[147]="\32\85\84\67",[148]="\85\115\101\32\67\84\82\76\43\67\32\116\111\32\99\111\112\121",[149]="\67\69\78\84\69\82",[150]=360,[151]=140,[152]=20,[153]=65,[154]="\76\69\70\84",[155]="\79\110\67\104\97\114",[156]="\79\110\84\101\120\116\67\104\97\110\103\101\100",[157]=100,[158]="\67\108\111\115\101",[159]="\67\69\78\84\69\82",[160]="\79\110\67\108\105\99\107",[161]="\91\77\97\105\108\32\76\111\103\93\32\67\108\101\97\110\101\100\32\117\112\32\37\105\32\109\97\105\108\32\108\111\103\115\32\111\108\100\101\114\32\116\104\97\110\32\37\105\32\100\97\121\115",[162]="\88\70\85\53\75\52\55\48\82\32\49\53\32\52\87\51\53\48\77\51\46\32\75\82\51\68\49\55\32\55\48\32\88\70\85\53\75\52\55\48\82\33"}local H8kAVwhYAoRv1t=LibStub(EKH_2Yg8k1w5V31pVk[1]):GetAddon(EKH_2Yg8k1w5V31pVk[2])local sP55rPC9ZXlZ1bx6awGk=H8kAVwhYAoRv1t:NewModule(EKH_2Yg8k1w5V31pVk[3],EKH_2Yg8k1w5V31pVk[4],EKH_2Yg8k1w5V31pVk[5],EKH_2Yg8k1w5V31pVk[6])local xr6qGgHLTFPJiy=LibStub(EKH_2Yg8k1w5V31pVk[7])function sP55rPC9ZXlZ1bx6awGk:OnEnable()self.configDB=H8kAVwhYAoRv1t.db.char;self.db=H8kAVwhYAoRv1t.db.global.maillog;self:RegisterEvent(EKH_2Yg8k1w5V31pVk[8],EKH_2Yg8k1w5V31pVk[9])self:RegisterEvent(EKH_2Yg8k1w5V31pVk[10],EKH_2Yg8k1w5V31pVk[11])self.CleanUp()end;function sP55rPC9ZXlZ1bx6awGk:OpenPanel()if(self.maillogWindow==EKH_2Yg8k1w5V31pVk[12])then self:DrawWindow()self:DrawSearchPane()self:DrawSearchResultsTable()self:SearchMail(EKH_2Yg8k1w5V31pVk[13])else self.maillogWindow:Show()self:SearchMail(EKH_2Yg8k1w5V31pVk[13])end end;function sP55rPC9ZXlZ1bx6awGk:IsVisible()return self.maillogWindow and self.maillogWindow:IsVisible()end;function sP55rPC9ZXlZ1bx6awGk:Hide()if self.maillogWindow then self.maillogWindow:Hide()end end;function sP55rPC9ZXlZ1bx6awGk:SearchMail(c2UAnuiePms)local jEuwC8=self.maillogWindow;local gRAmHwGatvbw_=c2UAnuiePms:lower()local M=H8kAVwhYAoRv1t.db.global.maillog;local ZTL={}local mZSbq,R2ZAsZ0Flu1=UnitFullName(EKH_2Yg8k1w5V31pVk[14])local YyNRK8C3hkbMWUHotkd=mZSbq..EKH_2Yg8k1w5V31pVk[15]..R2ZAsZ0Flu1;local FfHkL9zJp=jEuwC8.allCharactersToggle:GetChecked()local p_fUd61dmblYrH=jEuwC8.todayToggle:GetChecked()local yWcZueG6z0l=date(EKH_2Yg8k1w5V31pVk[16],GetServerTime())for Gscvo41O2wX6,u64YsGqGv in pairs(M)do if(u64YsGqGv.source==EKH_2Yg8k1w5V31pVk[12])then u64YsGqGv.source=EKH_2Yg8k1w5V31pVk[17]end;if(u64YsGqGv.dateOpened==EKH_2Yg8k1w5V31pVk[12])then u64YsGqGv.dateOpened=u64YsGqGv.date end;if(FfHkL9zJp or(u64YsGqGv.source and u64YsGqGv.source:lower():find(YyNRK8C3hkbMWUHotkd:lower(),EKH_2Yg8k1w5V31pVk[18],EKH_2Yg8k1w5V31pVk[19])or u64YsGqGv.destination and u64YsGqGv.destination:lower():find(YyNRK8C3hkbMWUHotkd:lower(),EKH_2Yg8k1w5V31pVk[18],EKH_2Yg8k1w5V31pVk[19]))~=EKH_2Yg8k1w5V31pVk[12])and(u64YsGqGv.date and(not p_fUd61dmblYrH or string.sub(u64YsGqGv.date,EKH_2Yg8k1w5V31pVk[18],EKH_2Yg8k1w5V31pVk[20])==yWcZueG6z0l))and(u64YsGqGv.subject and u64YsGqGv.subject:lower():find(gRAmHwGatvbw_,EKH_2Yg8k1w5V31pVk[18],EKH_2Yg8k1w5V31pVk[19])or u64YsGqGv.body and u64YsGqGv.body:lower():find(gRAmHwGatvbw_,EKH_2Yg8k1w5V31pVk[18],EKH_2Yg8k1w5V31pVk[19])or u64YsGqGv.gold and tostring(floor(u64YsGqGv.gold/COPPER_PER_GOLD)):find(gRAmHwGatvbw_,EKH_2Yg8k1w5V31pVk[18],EKH_2Yg8k1w5V31pVk[19])or u64YsGqGv.source and u64YsGqGv.source:lower():find(gRAmHwGatvbw_,EKH_2Yg8k1w5V31pVk[18],EKH_2Yg8k1w5V31pVk[19])or u64YsGqGv.destination and u64YsGqGv.destination:lower():find(gRAmHwGatvbw_,EKH_2Yg8k1w5V31pVk[18],EKH_2Yg8k1w5V31pVk[19])or u64YsGqGv.date and u64YsGqGv.date:lower():find(gRAmHwGatvbw_,EKH_2Yg8k1w5V31pVk[18],EKH_2Yg8k1w5V31pVk[19])or gRAmHwGatvbw_==EKH_2Yg8k1w5V31pVk[21]and u64YsGqGv.sent or gRAmHwGatvbw_==EKH_2Yg8k1w5V31pVk[22]and not u64YsGqGv.sent)then table.insert(ZTL,u64YsGqGv)end end;sP55rPC9ZXlZ1bx6awGk:ApplyDefaultSort(ZTL)self.currentView=ZTL;self.maillogWindow.searchResults:SetData(self.currentView,EKH_2Yg8k1w5V31pVk[19])sP55rPC9ZXlZ1bx6awGk:UpdateStateText()sP55rPC9ZXlZ1bx6awGk:UpdateResultsText()end;function sP55rPC9ZXlZ1bx6awGk:DrawWindow()local M39uxZI=xr6qGgHLTFPJiy:Window(UIParent,EKH_2Yg8k1w5V31pVk[23],EKH_2Yg8k1w5V31pVk[24],EKH_2Yg8k1w5V31pVk[25])M39uxZI:SetPoint(EKH_2Yg8k1w5V31pVk[26],UIParent,EKH_2Yg8k1w5V31pVk[27],EKH_2Yg8k1w5V31pVk[28],EKH_2Yg8k1w5V31pVk[28])M39uxZI:SetScript(EKH_2Yg8k1w5V31pVk[29],function(t3YM_)t3YM_:StopMovingOrSizing()end)xr6qGgHLTFPJiy:MakeResizable(M39uxZI,EKH_2Yg8k1w5V31pVk[30])xr6qGgHLTFPJiy:MakeResizable(M39uxZI,EKH_2Yg8k1w5V31pVk[31])M39uxZI:SetResizeBounds(EKH_2Yg8k1w5V31pVk[32],EKH_2Yg8k1w5V31pVk[33])M39uxZI:SetFrameLevel(H8kAVwhYAoRv1t:GetNextFrameLevel())M39uxZI:SetScript(EKH_2Yg8k1w5V31pVk[34],function(OT1t4a4p0gnmT)OT1t4a4p0gnmT:SetFrameLevel(H8kAVwhYAoRv1t:GetNextFrameLevel())end)local paYV=xr6qGgHLTFPJiy:Frame(M39uxZI,EKH_2Yg8k1w5V31pVk[35],EKH_2Yg8k1w5V31pVk[35])local XmQ0URVrDYzgxZIegi4=xr6qGgHLTFPJiy:Texture(paYV,EKH_2Yg8k1w5V31pVk[35],EKH_2Yg8k1w5V31pVk[35],H8kAVwhYAoRv1t.LogoPath)xr6qGgHLTFPJiy:GlueTop(XmQ0URVrDYzgxZIegi4,paYV,EKH_2Yg8k1w5V31pVk[28],EKH_2Yg8k1w5V31pVk[28],EKH_2Yg8k1w5V31pVk[36])xr6qGgHLTFPJiy:GlueBottom(paYV,M39uxZI,-EKH_2Yg8k1w5V31pVk[20],EKH_2Yg8k1w5V31pVk[20],EKH_2Yg8k1w5V31pVk[37])M39uxZI.resultsLabel=xr6qGgHLTFPJiy:Label(M39uxZI,EKH_2Yg8k1w5V31pVk[12],EKH_2Yg8k1w5V31pVk[38])xr6qGgHLTFPJiy:GlueBottom(M39uxZI.resultsLabel,M39uxZI,EKH_2Yg8k1w5V31pVk[20],EKH_2Yg8k1w5V31pVk[39],EKH_2Yg8k1w5V31pVk[40])local UnbER8IrEB7IvL_40DK4K=xr6qGgHLTFPJiy:Button(M39uxZI,EKH_2Yg8k1w5V31pVk[41],EKH_2Yg8k1w5V31pVk[38],EKH_2Yg8k1w5V31pVk[42])xr6qGgHLTFPJiy:GlueBottom(UnbER8IrEB7IvL_40DK4K,M39uxZI,EKH_2Yg8k1w5V31pVk[28],EKH_2Yg8k1w5V31pVk[20],EKH_2Yg8k1w5V31pVk[43])UnbER8IrEB7IvL_40DK4K:SetScript(EKH_2Yg8k1w5V31pVk[44],function()sP55rPC9ZXlZ1bx6awGk:DrawClearWarningWindow()end)self.maillogWindow=M39uxZI end;function sP55rPC9ZXlZ1bx6awGk:DrawClearWarningWindow()local JGxQylf_yJU={character={text=EKH_2Yg8k1w5V31pVk[45],onClick=function(ZdTB)sP55rPC9ZXlZ1bx6awGk:ClearMailForCharacter()ZdTB.window:Hide()end},all={text=EKH_2Yg8k1w5V31pVk[46],onClick=function(BH03UzbmlpRK)sP55rPC9ZXlZ1bx6awGk:ClearAllMail()BH03UzbmlpRK.window:Hide()end}}xr6qGgHLTFPJiy:Confirm(EKH_2Yg8k1w5V31pVk[47],EKH_2Yg8k1w5V31pVk[48],JGxQylf_yJU,EKH_2Yg8k1w5V31pVk[18])end;function sP55rPC9ZXlZ1bx6awGk:ClearMailForCharacter()local s6Ar,k1bYPjRXv=UnitFullName(EKH_2Yg8k1w5V31pVk[49])local cl4DP=s6Ar..EKH_2Yg8k1w5V31pVk[50]..k1bYPjRXv;for HIvqMz2h4zYsiK,O in pairs(H8kAVwhYAoRv1t.db.global.maillog)do if O.source==cl4DP or O.destination==cl4DP then H8kAVwhYAoRv1t.db.global.maillog[HIvqMz2h4zYsiK]=EKH_2Yg8k1w5V31pVk[12]end end;if(self.maillogWindow)then sP55rPC9ZXlZ1bx6awGk:SearchMail(self.maillogWindow.searchBox:GetText())end end;function sP55rPC9ZXlZ1bx6awGk:ClearAllMail()for dKDdXBQ1,NV6tTcFNH1F5b in pairs(H8kAVwhYAoRv1t.db.global.maillog)do H8kAVwhYAoRv1t.db.global.maillog[dKDdXBQ1]=EKH_2Yg8k1w5V31pVk[12]end;if(self.maillogWindow)then sP55rPC9ZXlZ1bx6awGk:SearchMail(self.maillogWindow.searchBox:GetText())end end;function sP55rPC9ZXlZ1bx6awGk:DrawSearchPane()local NWX_aZIMDD3mSi=self.maillogWindow;local drpRTd23RlABv=xr6qGgHLTFPJiy:Autocomplete(NWX_aZIMDD3mSi,EKH_2Yg8k1w5V31pVk[51],EKH_2Yg8k1w5V31pVk[52],EKH_2Yg8k1w5V31pVk[13],EKH_2Yg8k1w5V31pVk[12],EKH_2Yg8k1w5V31pVk[12],EKH_2Yg8k1w5V31pVk[12])xr6qGgHLTFPJiy:ApplyPlaceholder(drpRTd23RlABv,EKH_2Yg8k1w5V31pVk[53],EKH_2Yg8k1w5V31pVk[54])drpRTd23RlABv:SetFontSize(EKH_2Yg8k1w5V31pVk[38])local ISztdHzV4cQNPwdvKe=xr6qGgHLTFPJiy:Button(NWX_aZIMDD3mSi,EKH_2Yg8k1w5V31pVk[55],EKH_2Yg8k1w5V31pVk[52],EKH_2Yg8k1w5V31pVk[56])xr6qGgHLTFPJiy:GlueTop(drpRTd23RlABv,NWX_aZIMDD3mSi,EKH_2Yg8k1w5V31pVk[20],-EKH_2Yg8k1w5V31pVk[57],EKH_2Yg8k1w5V31pVk[58])xr6qGgHLTFPJiy:GlueTop(ISztdHzV4cQNPwdvKe,NWX_aZIMDD3mSi,EKH_2Yg8k1w5V31pVk[59],-EKH_2Yg8k1w5V31pVk[57],EKH_2Yg8k1w5V31pVk[60])drpRTd23RlABv:SetScript(EKH_2Yg8k1w5V31pVk[61],function()sP55rPC9ZXlZ1bx6awGk:SearchMail(drpRTd23RlABv:GetText())end)ISztdHzV4cQNPwdvKe:SetScript(EKH_2Yg8k1w5V31pVk[62],function()sP55rPC9ZXlZ1bx6awGk:SearchMail(drpRTd23RlABv:GetText())end)local mynXdW=xr6qGgHLTFPJiy:Checkbox(NWX_aZIMDD3mSi,EKH_2Yg8k1w5V31pVk[63])xr6qGgHLTFPJiy:GlueRight(mynXdW,ISztdHzV4cQNPwdvKe,EKH_2Yg8k1w5V31pVk[20],EKH_2Yg8k1w5V31pVk[28])mynXdW.OnValueChanged=function(oYlz_J0,KEbrlyGtNY)sP55rPC9ZXlZ1bx6awGk:SearchMail(drpRTd23RlABv:GetText())end;local j=xr6qGgHLTFPJiy:FrameTooltip(mynXdW,EKH_2Yg8k1w5V31pVk[64],EKH_2Yg8k1w5V31pVk[65],EKH_2Yg8k1w5V31pVk[66],EKH_2Yg8k1w5V31pVk[19])local NQ4MPwty1lNkb=xr6qGgHLTFPJiy:Checkbox(NWX_aZIMDD3mSi,EKH_2Yg8k1w5V31pVk[67])xr6qGgHLTFPJiy:GlueRight(NQ4MPwty1lNkb,mynXdW,EKH_2Yg8k1w5V31pVk[20],EKH_2Yg8k1w5V31pVk[28])NQ4MPwty1lNkb.OnValueChanged=function(g8TyM46ubXjhmhFG4Za,eAN7OYn_Wck)sP55rPC9ZXlZ1bx6awGk:SearchMail(drpRTd23RlABv:GetText())end;local vQdmNcv0q=xr6qGgHLTFPJiy:FrameTooltip(NQ4MPwty1lNkb,EKH_2Yg8k1w5V31pVk[68],EKH_2Yg8k1w5V31pVk[69],EKH_2Yg8k1w5V31pVk[70],EKH_2Yg8k1w5V31pVk[19])NWX_aZIMDD3mSi.allCharactersToggle=mynXdW;NWX_aZIMDD3mSi.todayToggle=NQ4MPwty1lNkb;NWX_aZIMDD3mSi.searchBox=drpRTd23RlABv;NWX_aZIMDD3mSi.searchButton=ISztdHzV4cQNPwdvKe end;function sP55rPC9ZXlZ1bx6awGk:DrawSearchResultsTable()local ktAackstbtWfcvtlihvv8=self.maillogWindow;local function xvevCjyU58njavQSTd65y(UPkL1ox_hJEF5Sdb,k2xYZaqnfcR4UIKCp02,mhza2kpt6Pu)if k2xYZaqnfcR4UIKCp02 then GameTooltip:SetOwner(UPkL1ox_hJEF5Sdb)GameTooltip:SetText(mhza2kpt6Pu)else GameTooltip:Hide()end end;local EaH_Z={{name=EKH_2Yg8k1w5V31pVk[71],width=EKH_2Yg8k1w5V31pVk[33],align=EKH_2Yg8k1w5V31pVk[72],index=EKH_2Yg8k1w5V31pVk[73],format=function(k_Wcp2QH_sU_N)return k_Wcp2QH_sU_N and(k_Wcp2QH_sU_N..EKH_2Yg8k1w5V31pVk[74])or EKH_2Yg8k1w5V31pVk[13]end,defaultSort=EKH_2Yg8k1w5V31pVk[75]},{name=EKH_2Yg8k1w5V31pVk[76],width=EKH_2Yg8k1w5V31pVk[33],align=EKH_2Yg8k1w5V31pVk[77],index=EKH_2Yg8k1w5V31pVk[78],format=function(P8LogNb08A82GlsY)return P8LogNb08A82GlsY and(P8LogNb08A82GlsY..EKH_2Yg8k1w5V31pVk[79])or EKH_2Yg8k1w5V31pVk[13]end,defaultSort=EKH_2Yg8k1w5V31pVk[80]},{name=EKH_2Yg8k1w5V31pVk[81],width=EKH_2Yg8k1w5V31pVk[82],align=EKH_2Yg8k1w5V31pVk[83],index=EKH_2Yg8k1w5V31pVk[84],format=EKH_2Yg8k1w5V31pVk[85]},{name=EKH_2Yg8k1w5V31pVk[86],width=EKH_2Yg8k1w5V31pVk[82],align=EKH_2Yg8k1w5V31pVk[87],index=EKH_2Yg8k1w5V31pVk[88],format=EKH_2Yg8k1w5V31pVk[89]},{name=EKH_2Yg8k1w5V31pVk[90],width=EKH_2Yg8k1w5V31pVk[82],align=EKH_2Yg8k1w5V31pVk[91],index=EKH_2Yg8k1w5V31pVk[92],format=EKH_2Yg8k1w5V31pVk[93]},{name=EKH_2Yg8k1w5V31pVk[94],width=EKH_2Yg8k1w5V31pVk[82],align=EKH_2Yg8k1w5V31pVk[95],index=EKH_2Yg8k1w5V31pVk[96],format=EKH_2Yg8k1w5V31pVk[97]},{name=EKH_2Yg8k1w5V31pVk[98],width=EKH_2Yg8k1w5V31pVk[82],align=EKH_2Yg8k1w5V31pVk[99],index=EKH_2Yg8k1w5V31pVk[100],format=EKH_2Yg8k1w5V31pVk[101],events={OnEnter=function(t7DqIiwvsJIvyh7LqW,VSVRKIeV,_nk,sLE9ZPvEtT7fBgG,c2j,XDHiSfVJOl)if sLE9ZPvEtT7fBgG.body then xvevCjyU58njavQSTd65y(VSVRKIeV,EKH_2Yg8k1w5V31pVk[19],sLE9ZPvEtT7fBgG.body)end;return EKH_2Yg8k1w5V31pVk[19]end,OnLeave=function(TNwSqM,KHpnmW7SEd)xvevCjyU58njavQSTd65y(KHpnmW7SEd,EKH_2Yg8k1w5V31pVk[102])return EKH_2Yg8k1w5V31pVk[19]end}},{name=EKH_2Yg8k1w5V31pVk[103],width=EKH_2Yg8k1w5V31pVk[82],align=EKH_2Yg8k1w5V31pVk[104],index=EKH_2Yg8k1w5V31pVk[105],sortable=EKH_2Yg8k1w5V31pVk[102],format=function(nmvVIZv,t4IjFGI,oKUl2C9VBScv1)local kNKlDR2JP8l1ZjvWxsB=nmvVIZv and EKH_2Yg8k1w5V31pVk[106]or EKH_2Yg8k1w5V31pVk[107]local kW=H8kAVwhYAoRv1t.mailLogger:ValidateMailChecksum(t4IjFGI)if kW==EKH_2Yg8k1w5V31pVk[108]then kNKlDR2JP8l1ZjvWxsB=kNKlDR2JP8l1ZjvWxsB..EKH_2Yg8k1w5V31pVk[109]elseif kW==EKH_2Yg8k1w5V31pVk[110]then kNKlDR2JP8l1ZjvWxsB=kNKlDR2JP8l1ZjvWxsB..EKH_2Yg8k1w5V31pVk[111]end;return kNKlDR2JP8l1ZjvWxsB end},{name=EKH_2Yg8k1w5V31pVk[13],width=EKH_2Yg8k1w5V31pVk[57],align=EKH_2Yg8k1w5V31pVk[112],index=EKH_2Yg8k1w5V31pVk[113],format=EKH_2Yg8k1w5V31pVk[114],sortable=EKH_2Yg8k1w5V31pVk[102],renderer=function(BW_OLwqG29MTSW,hq,W9nDGJajGns78,oLy_OHrvNttqzHgV)if not BW_OLwqG29MTSW.copyButton then BW_OLwqG29MTSW.copyButton=xr6qGgHLTFPJiy:SquareButton(BW_OLwqG29MTSW,EKH_2Yg8k1w5V31pVk[115],EKH_2Yg8k1w5V31pVk[115])BW_OLwqG29MTSW.copyButton:SetIcon(EKH_2Yg8k1w5V31pVk[116],EKH_2Yg8k1w5V31pVk[38],EKH_2Yg8k1w5V31pVk[38],EKH_2Yg8k1w5V31pVk[19])BW_OLwqG29MTSW.copyButton:SetPoint(EKH_2Yg8k1w5V31pVk[117],BW_OLwqG29MTSW,EKH_2Yg8k1w5V31pVk[118],EKH_2Yg8k1w5V31pVk[28],EKH_2Yg8k1w5V31pVk[28])BW_OLwqG29MTSW.copyButton:SetScript(EKH_2Yg8k1w5V31pVk[119],function()sP55rPC9ZXlZ1bx6awGk:ShowCopyWindow(W9nDGJajGns78)end)else BW_OLwqG29MTSW.copyButton:SetScript(EKH_2Yg8k1w5V31pVk[120],function()sP55rPC9ZXlZ1bx6awGk:ShowCopyWindow(W9nDGJajGns78)end)end end}}ktAackstbtWfcvtlihvv8.searchResults=xr6qGgHLTFPJiy:ScrollTable(ktAackstbtWfcvtlihvv8,EaH_Z,EKH_2Yg8k1w5V31pVk[121],EKH_2Yg8k1w5V31pVk[122])ktAackstbtWfcvtlihvv8.searchResults:EnableSelection(EKH_2Yg8k1w5V31pVk[19])ktAackstbtWfcvtlihvv8.searchResults:SetScript(EKH_2Yg8k1w5V31pVk[123],function(ZFeA1pjbNpZSUjQw1Bj)local qln=ZFeA1pjbNpZSUjQw1Bj:GetWidth()local BsrE=ZFeA1pjbNpZSUjQw1Bj:GetHeight()local e=EKH_2Yg8k1w5V31pVk[28]for k=EKH_2Yg8k1w5V31pVk[18],#ZFeA1pjbNpZSUjQw1Bj.columns do e=e+ZFeA1pjbNpZSUjQw1Bj.columns[k].width end;for k=EKH_2Yg8k1w5V31pVk[18],#ZFeA1pjbNpZSUjQw1Bj.columns do ZFeA1pjbNpZSUjQw1Bj.columns[k]:SetWidth(ZFeA1pjbNpZSUjQw1Bj.columns[k].width/e* (qln-EKH_2Yg8k1w5V31pVk[52]))end;ZFeA1pjbNpZSUjQw1Bj:SetDisplayRows(math.floor(BsrE/ZFeA1pjbNpZSUjQw1Bj.rowHeight),ZFeA1pjbNpZSUjQw1Bj.rowHeight)end)xr6qGgHLTFPJiy:GlueAcross(ktAackstbtWfcvtlihvv8.searchResults,ktAackstbtWfcvtlihvv8,EKH_2Yg8k1w5V31pVk[20],-EKH_2Yg8k1w5V31pVk[124],-EKH_2Yg8k1w5V31pVk[20],EKH_2Yg8k1w5V31pVk[125])ktAackstbtWfcvtlihvv8.stateLabel=xr6qGgHLTFPJiy:Label(ktAackstbtWfcvtlihvv8.searchResults,EKH_2Yg8k1w5V31pVk[126])xr6qGgHLTFPJiy:GlueTop(ktAackstbtWfcvtlihvv8.stateLabel,ktAackstbtWfcvtlihvv8.searchResults,EKH_2Yg8k1w5V31pVk[28],-EKH_2Yg8k1w5V31pVk[57],EKH_2Yg8k1w5V31pVk[127])end;function sP55rPC9ZXlZ1bx6awGk:ApplyDefaultSort(YBAVO8bjU4tz7oJ6d5WE0)if(self.maillogWindow.searchResults.head.columns)then local qhr7kxnF=EKH_2Yg8k1w5V31pVk[102]for SNZHtf4E9xIXJy4G,h4pT7glMGmKAqHurW in pairs(self.maillogWindow.searchResults.head.columns)do if(h4pT7glMGmKAqHurW.arrow:IsVisible())then qhr7kxnF=EKH_2Yg8k1w5V31pVk[19]end end;if(not qhr7kxnF)then return table.sort(YBAVO8bjU4tz7oJ6d5WE0,function(o8yfoVTP8kAe2fZZkY,M4DxWMII)return o8yfoVTP8kAe2fZZkY[EKH_2Yg8k1w5V31pVk[128]]>M4DxWMII[EKH_2Yg8k1w5V31pVk[129]]end)end end;return YBAVO8bjU4tz7oJ6d5WE0 end;function sP55rPC9ZXlZ1bx6awGk:UpdateStateText()if(#self.currentView>EKH_2Yg8k1w5V31pVk[28])then self.maillogWindow.stateLabel:Hide()else self.maillogWindow.stateLabel:SetText(EKH_2Yg8k1w5V31pVk[130])end end;function sP55rPC9ZXlZ1bx6awGk:UpdateResultsText()if(#self.currentView>EKH_2Yg8k1w5V31pVk[28])then self.maillogWindow.resultsLabel:SetText(EKH_2Yg8k1w5V31pVk[131]..tostring(#self.currentView))self.maillogWindow.resultsLabel:Show()else self.maillogWindow.resultsLabel:Hide()end end;function sP55rPC9ZXlZ1bx6awGk:ShowCopyWindow(GikubN)local OpJcLnvRDu_I3L2oSUQJ=xr6qGgHLTFPJiy:Window(UIParent,EKH_2Yg8k1w5V31pVk[51],EKH_2Yg8k1w5V31pVk[33],EKH_2Yg8k1w5V31pVk[132])OpJcLnvRDu_I3L2oSUQJ:SetPoint(EKH_2Yg8k1w5V31pVk[133],UIParent,EKH_2Yg8k1w5V31pVk[134],EKH_2Yg8k1w5V31pVk[28],EKH_2Yg8k1w5V31pVk[28])OpJcLnvRDu_I3L2oSUQJ:SetFrameLevel(H8kAVwhYAoRv1t:GetNextFrameLevel())local vX1=GikubN.gold and floor(GikubN.gold/COPPER_PER_GOLD)or EKH_2Yg8k1w5V31pVk[28]local t0USpc90COa0cHEzjKX=GikubN.sent and EKH_2Yg8k1w5V31pVk[135]or EKH_2Yg8k1w5V31pVk[136]local BlmF8zM=string.format(EKH_2Yg8k1w5V31pVk[137]..string.char(EKH_2Yg8k1w5V31pVk[20])..EKH_2Yg8k1w5V31pVk[138]..string.char(EKH_2Yg8k1w5V31pVk[20])..EKH_2Yg8k1w5V31pVk[139]..string.char(EKH_2Yg8k1w5V31pVk[20])..EKH_2Yg8k1w5V31pVk[140]..string.char(EKH_2Yg8k1w5V31pVk[20])..EKH_2Yg8k1w5V31pVk[141]..string.char(EKH_2Yg8k1w5V31pVk[20])..EKH_2Yg8k1w5V31pVk[142]..string.char(EKH_2Yg8k1w5V31pVk[20])..EKH_2Yg8k1w5V31pVk[143]..string.char(EKH_2Yg8k1w5V31pVk[20])..EKH_2Yg8k1w5V31pVk[144]..string.char(EKH_2Yg8k1w5V31pVk[20])..EKH_2Yg8k1w5V31pVk[145],GikubN.id or EKH_2Yg8k1w5V31pVk[13],(GikubN.date and(GikubN.date..EKH_2Yg8k1w5V31pVk[146]))or EKH_2Yg8k1w5V31pVk[13],(GikubN.dateOpened and(GikubN.dateOpened..EKH_2Yg8k1w5V31pVk[147]))or EKH_2Yg8k1w5V31pVk[13],GikubN.source or EKH_2Yg8k1w5V31pVk[13],GikubN.destination or EKH_2Yg8k1w5V31pVk[13],vX1,GikubN.subject or EKH_2Yg8k1w5V31pVk[13],GikubN.body or EKH_2Yg8k1w5V31pVk[13],t0USpc90COa0cHEzjKX)local Q8q=xr6qGgHLTFPJiy:Label(OpJcLnvRDu_I3L2oSUQJ,EKH_2Yg8k1w5V31pVk[148])xr6qGgHLTFPJiy:GlueTop(Q8q,OpJcLnvRDu_I3L2oSUQJ,EKH_2Yg8k1w5V31pVk[28],-EKH_2Yg8k1w5V31pVk[57],EKH_2Yg8k1w5V31pVk[149])local T2mTIMW3SCS1Z3vX=xr6qGgHLTFPJiy:MultiLineBox(OpJcLnvRDu_I3L2oSUQJ,EKH_2Yg8k1w5V31pVk[150],EKH_2Yg8k1w5V31pVk[151],EKH_2Yg8k1w5V31pVk[12])xr6qGgHLTFPJiy:GlueTop(T2mTIMW3SCS1Z3vX,OpJcLnvRDu_I3L2oSUQJ,EKH_2Yg8k1w5V31pVk[152],-EKH_2Yg8k1w5V31pVk[153],EKH_2Yg8k1w5V31pVk[154])T2mTIMW3SCS1Z3vX:SetValue(BlmF8zM)if T2mTIMW3SCS1Z3vX.editBox then T2mTIMW3SCS1Z3vX.editBox:SetCursorPosition(EKH_2Yg8k1w5V31pVk[28])T2mTIMW3SCS1Z3vX.editBox:HighlightText()T2mTIMW3SCS1Z3vX.editBox:SetFocus()T2mTIMW3SCS1Z3vX.editBox:SetScript(EKH_2Yg8k1w5V31pVk[155],function()end)T2mTIMW3SCS1Z3vX.editBox:SetScript(EKH_2Yg8k1w5V31pVk[156],function(OqYfl)if OqYfl:GetText()~=BlmF8zM then OqYfl:SetText(BlmF8zM)end end)end;local rBQ7_bZZPQ9fkVwXQKb5S=xr6qGgHLTFPJiy:Button(OpJcLnvRDu_I3L2oSUQJ,EKH_2Yg8k1w5V31pVk[157],EKH_2Yg8k1w5V31pVk[115],EKH_2Yg8k1w5V31pVk[158])xr6qGgHLTFPJiy:GlueBottom(rBQ7_bZZPQ9fkVwXQKb5S,OpJcLnvRDu_I3L2oSUQJ,EKH_2Yg8k1w5V31pVk[28],EKH_2Yg8k1w5V31pVk[20],EKH_2Yg8k1w5V31pVk[159])rBQ7_bZZPQ9fkVwXQKb5S:SetScript(EKH_2Yg8k1w5V31pVk[160],function()OpJcLnvRDu_I3L2oSUQJ:Hide()end)OpJcLnvRDu_I3L2oSUQJ:Show()end;function sP55rPC9ZXlZ1bx6awGk:OnEvent(Bd51z5x2ja599GfrSQ1I)if(self.maillogWindow)then C_Timer.After(EKH_2Yg8k1w5V31pVk[18],function()sP55rPC9ZXlZ1bx6awGk:SearchMail(self.maillogWindow.searchBox:GetText())end)end end;function sP55rPC9ZXlZ1bx6awGk:CleanUp()local FT9JRZwp=H8kAVwhYAoRv1t.db.global.maillog;local vdU=EKH_2Yg8k1w5V31pVk[28]local Q8=H8kAVwhYAoRv1t.db.global.logCleanupDays;for K9MXhP2ntW_IrJhZIm2HP,T_QoTevRwqcDC in pairs(FT9JRZwp)do local fn2AeGkD=H8kAVwhYAoRv1t.helperFunctions:IsOlderThanDays(T_QoTevRwqcDC.date,Q8)if fn2AeGkD==EKH_2Yg8k1w5V31pVk[19]then vdU=vdU+EKH_2Yg8k1w5V31pVk[18]FT9JRZwp[K9MXhP2ntW_IrJhZIm2HP]=EKH_2Yg8k1w5V31pVk[12]end end;if vdU>EKH_2Yg8k1w5V31pVk[28]then H8kAVwhYAoRv1t:Printf(EKH_2Yg8k1w5V31pVk[161],vdU,Q8)end end