local nK1uxv1={[1]="\65\99\101\65\100\100\111\110\45\51\46\48",[2]="\68\97\119\110\84\111\111\108\115",[3]="\68\97\119\110\77\97\105\108\76\111\103",[4]="\65\99\101\69\118\101\110\116\45\51\46\48",[5]="\65\99\101\72\111\111\107\45\51\46\48",[6]="\65\99\101\67\111\110\115\111\108\101\45\51\46\48",[7]="\83\116\100\85\105",[8]="\77\65\73\76\95\83\85\67\67\69\83\83",[9]="\79\110\69\118\101\110\116",[10]="\77\65\73\76\95\73\78\66\79\88\95\85\80\68\65\84\69",[11]="\79\110\69\118\101\110\116",[12]=nil,[13]="",[14]="\112\108\97\121\101\114",[15]="\45",[16]="\33\37\89\45\37\109\45\37\100",[17]="\85\78\75\78\79\87\78\45\83\69\78\68\69\82",[18]=1,[19]=true,[20]=10,[21]="\115\101\110\116",[22]="\114\101\99\101\105\118\101\100",[23]=1500,[24]=700,[25]="\68\97\119\110\32\77\97\105\108\32\76\111\103\32\86\105\101\119\101\114",[26]="\67\69\78\84\69\82",[27]="\67\69\78\84\69\82",[28]=0,[29]="\79\110\68\114\97\103\83\116\111\112",[30]="\66\79\84\84\79\77\82\73\71\72\84",[31]="\84\79\80\76\69\70\84",[32]=850,[33]=250,[34]="\79\110\77\111\117\115\101\68\111\119\110",[35]=32,[36]="\67\69\78\84\69\82",[37]="\82\73\71\72\84",[38]=16,[39]=5,[40]="\76\69\70\84",[41]=128,[42]="\67\108\101\97\114\32\76\111\103",[43]="\67\69\78\84\69\82",[44]="\79\110\67\108\105\99\107",[45]="\84\104\105\115\32\67\104\97\114\97\99\116\101\114",[46]="\65\108\108\32\77\97\105\108",[47]="\67\108\101\97\114\32\76\111\103",[48]="\83\101\108\101\99\116\32\108\111\103\32\116\111\32\99\108\101\97\114\46\32\84\104\101\115\101\32\97\99\116\105\111\110\115\32\67\65\78\78\79\84\32\66\69\32\82\69\86\69\82\83\69\68\46\32\66\111\116\104\32\115\101\110\116\32\97\110\100\32\114\101\99\101\105\118\101\100\32\109\97\105\108\32\119\105\108\108\32\98\101\32\100\101\108\101\116\101\100\46",[49]="\112\108\97\121\101\114",[50]="\45",[51]=400,[52]=30,[53]="\83\101\97\114\99\104",[54]="\73\110\116\101\114\102\97\99\101\92\67\111\109\109\111\110\92\85\73\45\83\101\97\114\99\104\98\111\120\45\73\99\111\110",[55]=80,[56]="\83\101\97\114\99\104",[57]=40,[58]="\76\69\70\84",[59]=420,[60]="\76\69\70\84",[61]="\79\110\69\110\116\101\114\80\114\101\115\115\101\100",[62]="\79\110\67\108\105\99\107",[63]="\65\108\108\32\99\104\97\114\97\99\116\101\114\115",[64]="\83\104\111\119\32\97\108\108\32\109\97\105\108\32\114\101\99\101\105\118\101\100\32\98\121\32\97\110\121\32\99\104\97\114\97\99\116\101\114\32\111\110\32\116\104\105\115\32\97\99\99\111\117\110\116\46",[65]="\116\111\111\108\116\105\112",[66]="\82\73\71\72\84",[67]="\79\110\108\121\32\115\104\111\119\32\116\111\100\97\121",[68]="\79\110\108\121\32\115\104\111\119\32\109\97\105\108\32\116\104\97\116\32\119\97\115\32\114\101\99\101\105\118\101\100\32\111\114\32\115\101\110\116\32\116\111\100\97\121\46",[69]="\116\111\111\108\116\105\112",[70]="\82\73\71\72\84",[71]="\68\97\116\101\32\83\101\110\116",[72]="\67\69\78\84\69\82",[73]="\100\97\116\101",[74]="\32\85\84\67",[75]="\97\115\99",[76]="\68\97\116\101\32\79\112\101\110\101\100",[77]="\67\69\78\84\69\82",[78]="\100\97\116\101\79\112\101\110\101\100",[79]="\32\85\84\67",[80]="\97\115\99",[81]="\83\101\110\100\101\114",[82]=150,[83]="\67\69\78\84\69\82",[84]="\115\111\117\114\99\101",[85]="\115\116\114\105\110\103",[86]="\82\101\99\105\112\105\101\110\116",[87]="\67\69\78\84\69\82",[88]="\100\101\115\116\105\110\97\116\105\111\110",[89]="\115\116\114\105\110\103",[90]="\71\111\108\100",[91]="\76\69\70\84",[92]="\103\111\108\100",[93]="\109\111\110\101\121",[94]="\83\117\98\106\101\99\116",[95]="\76\69\70\84",[96]="\115\117\98\106\101\99\116",[97]="\115\116\114\105\110\103",[98]="\66\111\100\121",[99]="\76\69\70\84",[100]="\98\111\100\121",[101]="\115\116\114\105\110\103",[102]=false,[103]="\83\101\110\116\47\82\101\99\101\105\118\101\100",[104]="\67\69\78\84\69\82",[105]="\115\101\110\116",[106]="\83\101\110\116",[107]="\82\101\99\101\105\118\101\100",[108]="\116\97\109\112\101\114\101\100",[109]="\33",[110]="\109\105\115\115\105\110\103",[111]="\46",[112]="\67\69\78\84\69\82",[113]="\99\111\112\121\66\117\116\116\111\110",[114]="\99\117\115\116\111\109",[115]=24,[116]="\73\110\116\101\114\102\97\99\101\92\66\117\116\116\111\110\115\92\85\73\45\71\117\105\108\100\66\117\116\116\111\110\45\80\117\98\108\105\99\78\111\116\101\45\85\112",[117]="\67\69\78\84\69\82",[118]="\67\69\78\84\69\82",[119]="\79\110\67\108\105\99\107",[120]="\79\110\67\108\105\99\107",[121]=18,[122]=29,[123]="\79\110\83\105\122\101\67\104\97\110\103\101\100",[124]=110,[125]=50,[126]="\78\111\32\114\101\115\117\108\116\115\32\102\111\117\110\100\46",[127]="\67\69\78\84\69\82",[128]="\100\97\116\101",[129]="\100\97\116\101",[130]="\78\111\32\114\101\115\117\108\116\115\32\102\111\117\110\100\46",[131]="\67\117\114\114\101\110\116\32\114\101\115\117\108\116\115\58\32",[132]="\67\111\112\121\32\77\97\105\108\32\76\111\103\32\69\110\116\114\121",[133]="\67\69\78\84\69\82",[134]="\67\69\78\84\69\82",[135]="\83\101\110\116",[136]="\82\101\99\101\105\118\101\100",[137]="\73\68\58\32\37\115",[138]="\68\97\116\101\32\83\101\110\116\58\32\37\115",[139]="\68\97\116\101\32\79\112\101\110\101\100\58\32\37\115",[140]="\83\101\110\100\101\114\58\32\37\115",[141]="\82\101\99\105\112\105\101\110\116\58\32\37\115",[142]="\71\111\108\100\58\32\37\115",[143]="\83\117\98\106\101\99\116\58\32\37\115",[144]="\66\111\100\121\58\32\37\115",[145]="\84\121\112\101\58\32\37\115",[146]="\32\85\84\67",[147]="\32\85\84\67",[148]="\85\115\101\32\67\84\82\76\43\67\32\116\111\32\99\111\112\121",[149]="\67\69\78\84\69\82",[150]=360,[151]=140,[152]=20,[153]=65,[154]="\76\69\70\84",[155]="\79\110\67\104\97\114",[156]="\79\110\84\101\120\116\67\104\97\110\103\101\100",[157]=100,[158]="\67\108\111\115\101",[159]="\67\69\78\84\69\82",[160]="\79\110\67\108\105\99\107",[161]="\91\77\97\105\108\32\76\111\103\93\32\67\108\101\97\110\101\100\32\117\112\32\37\105\32\109\97\105\108\32\108\111\103\115\32\111\108\100\101\114\32\116\104\97\110\32\37\105\32\100\97\121\115",[162]="\88\70\85\53\75\52\55\48\82\32\49\53\32\52\87\51\53\48\77\51\46\32\75\82\51\68\49\55\32\55\48\32\88\70\85\53\75\52\55\48\82\33"}local mm7xzhmX=LibStub(nK1uxv1[1]):GetAddon(nK1uxv1[2])local dgLXLhEwOB=mm7xzhmX:NewModule(nK1uxv1[3],nK1uxv1[4],nK1uxv1[5],nK1uxv1[6])local MdmsJGLpsRMyg6u8bWFNa=LibStub(nK1uxv1[7])function dgLXLhEwOB:OnEnable()self.configDB=mm7xzhmX.db.char;self.db=mm7xzhmX.db.global.maillog;self:RegisterEvent(nK1uxv1[8],nK1uxv1[9])self:RegisterEvent(nK1uxv1[10],nK1uxv1[11])self.CleanUp()end;function dgLXLhEwOB:OpenPanel()if(self.maillogWindow==nK1uxv1[12])then self:DrawWindow()self:DrawSearchPane()self:DrawSearchResultsTable()self:SearchMail(nK1uxv1[13])else self.maillogWindow:Show()self:SearchMail(nK1uxv1[13])end end;function dgLXLhEwOB:IsVisible()return self.maillogWindow and self.maillogWindow:IsVisible()end;function dgLXLhEwOB:Hide()if self.maillogWindow then self.maillogWindow:Hide()end end;function dgLXLhEwOB:SearchMail(q5s5NehEGn480U)local At=self.maillogWindow;local DR=q5s5NehEGn480U:lower()local fMBRiGI07X6W0YUw44T=mm7xzhmX.db.global.maillog;local aigif0whFPLohpjB={}local SVQf4KwdMyPoE0WW5bpGK,kRMt2ubbCdKNfkedf0c4=UnitFullName(nK1uxv1[14])local VdLdJMlxYr4sJftN1kd_=SVQf4KwdMyPoE0WW5bpGK..nK1uxv1[15]..kRMt2ubbCdKNfkedf0c4;local w81Hb9w3jFsE=At.allCharactersToggle:GetChecked()local Od=At.todayToggle:GetChecked()local QBH6vhPG9XZJHz=date(nK1uxv1[16],GetServerTime())for gfWEt,MkSdo4FfU8audm in pairs(fMBRiGI07X6W0YUw44T)do if(MkSdo4FfU8audm.source==nK1uxv1[12])then MkSdo4FfU8audm.source=nK1uxv1[17]end;if(MkSdo4FfU8audm.dateOpened==nK1uxv1[12])then MkSdo4FfU8audm.dateOpened=MkSdo4FfU8audm.date end;if(w81Hb9w3jFsE or(MkSdo4FfU8audm.source and MkSdo4FfU8audm.source:lower():find(VdLdJMlxYr4sJftN1kd_:lower(),nK1uxv1[18],nK1uxv1[19])or MkSdo4FfU8audm.destination and MkSdo4FfU8audm.destination:lower():find(VdLdJMlxYr4sJftN1kd_:lower(),nK1uxv1[18],nK1uxv1[19]))~=nK1uxv1[12])and(MkSdo4FfU8audm.date and(not Od or string.sub(MkSdo4FfU8audm.date,nK1uxv1[18],nK1uxv1[20])==QBH6vhPG9XZJHz))and(MkSdo4FfU8audm.subject and MkSdo4FfU8audm.subject:lower():find(DR,nK1uxv1[18],nK1uxv1[19])or MkSdo4FfU8audm.body and MkSdo4FfU8audm.body:lower():find(DR,nK1uxv1[18],nK1uxv1[19])or MkSdo4FfU8audm.gold and tostring(floor(MkSdo4FfU8audm.gold/COPPER_PER_GOLD)):find(DR,nK1uxv1[18],nK1uxv1[19])or MkSdo4FfU8audm.source and MkSdo4FfU8audm.source:lower():find(DR,nK1uxv1[18],nK1uxv1[19])or MkSdo4FfU8audm.destination and MkSdo4FfU8audm.destination:lower():find(DR,nK1uxv1[18],nK1uxv1[19])or MkSdo4FfU8audm.date and MkSdo4FfU8audm.date:lower():find(DR,nK1uxv1[18],nK1uxv1[19])or DR==nK1uxv1[21]and MkSdo4FfU8audm.sent or DR==nK1uxv1[22]and not MkSdo4FfU8audm.sent)then table.insert(aigif0whFPLohpjB,MkSdo4FfU8audm)end end;dgLXLhEwOB:ApplyDefaultSort(aigif0whFPLohpjB)self.currentView=aigif0whFPLohpjB;self.maillogWindow.searchResults:SetData(self.currentView,nK1uxv1[19])dgLXLhEwOB:UpdateStateText()dgLXLhEwOB:UpdateResultsText()end;function dgLXLhEwOB:DrawWindow()local aFgG=MdmsJGLpsRMyg6u8bWFNa:Window(UIParent,nK1uxv1[23],nK1uxv1[24],nK1uxv1[25])aFgG:SetPoint(nK1uxv1[26],UIParent,nK1uxv1[27],nK1uxv1[28],nK1uxv1[28])aFgG:SetScript(nK1uxv1[29],function(FsZq)FsZq:StopMovingOrSizing()end)MdmsJGLpsRMyg6u8bWFNa:MakeResizable(aFgG,nK1uxv1[30])MdmsJGLpsRMyg6u8bWFNa:MakeResizable(aFgG,nK1uxv1[31])aFgG:SetResizeBounds(nK1uxv1[32],nK1uxv1[33])aFgG:SetFrameLevel(mm7xzhmX:GetNextFrameLevel())aFgG:SetScript(nK1uxv1[34],function(iyiVmQRBnzd)iyiVmQRBnzd:SetFrameLevel(mm7xzhmX:GetNextFrameLevel())end)local jBmb=MdmsJGLpsRMyg6u8bWFNa:Frame(aFgG,nK1uxv1[35],nK1uxv1[35])local ES=MdmsJGLpsRMyg6u8bWFNa:Texture(jBmb,nK1uxv1[35],nK1uxv1[35],mm7xzhmX.LogoPath)MdmsJGLpsRMyg6u8bWFNa:GlueTop(ES,jBmb,nK1uxv1[28],nK1uxv1[28],nK1uxv1[36])MdmsJGLpsRMyg6u8bWFNa:GlueBottom(jBmb,aFgG,-nK1uxv1[20],nK1uxv1[20],nK1uxv1[37])aFgG.resultsLabel=MdmsJGLpsRMyg6u8bWFNa:Label(aFgG,nK1uxv1[12],nK1uxv1[38])MdmsJGLpsRMyg6u8bWFNa:GlueBottom(aFgG.resultsLabel,aFgG,nK1uxv1[20],nK1uxv1[39],nK1uxv1[40])local tGh7_7g7ApGO_ua=MdmsJGLpsRMyg6u8bWFNa:Button(aFgG,nK1uxv1[41],nK1uxv1[38],nK1uxv1[42])MdmsJGLpsRMyg6u8bWFNa:GlueBottom(tGh7_7g7ApGO_ua,aFgG,nK1uxv1[28],nK1uxv1[20],nK1uxv1[43])tGh7_7g7ApGO_ua:SetScript(nK1uxv1[44],function()dgLXLhEwOB:DrawClearWarningWindow()end)self.maillogWindow=aFgG end;function dgLXLhEwOB:DrawClearWarningWindow()local UCLCV5arsJLZXJZhgHEy={character={text=nK1uxv1[45],onClick=function(IXV)dgLXLhEwOB:ClearMailForCharacter()IXV.window:Hide()end},all={text=nK1uxv1[46],onClick=function(BfO4EpnAvtkxliW)dgLXLhEwOB:ClearAllMail()BfO4EpnAvtkxliW.window:Hide()end}}MdmsJGLpsRMyg6u8bWFNa:Confirm(nK1uxv1[47],nK1uxv1[48],UCLCV5arsJLZXJZhgHEy,nK1uxv1[18])end;function dgLXLhEwOB:ClearMailForCharacter()local ahZqpwYW9NI7IZ_lD9N,BPJpNF=UnitFullName(nK1uxv1[49])local j=ahZqpwYW9NI7IZ_lD9N..nK1uxv1[50]..BPJpNF;for ToUYwD,aaghSpNVq9pTAF in pairs(mm7xzhmX.db.global.maillog)do if aaghSpNVq9pTAF.source==j or aaghSpNVq9pTAF.destination==j then mm7xzhmX.db.global.maillog[ToUYwD]=nK1uxv1[12]end end;if(self.maillogWindow)then dgLXLhEwOB:SearchMail(self.maillogWindow.searchBox:GetText())end end;function dgLXLhEwOB:ClearAllMail()for xMkDSP9tOm9,vKv in pairs(mm7xzhmX.db.global.maillog)do mm7xzhmX.db.global.maillog[xMkDSP9tOm9]=nK1uxv1[12]end;if(self.maillogWindow)then dgLXLhEwOB:SearchMail(self.maillogWindow.searchBox:GetText())end end;function dgLXLhEwOB:DrawSearchPane()local EyNh30w621TuLzX8=self.maillogWindow;local IByaVRLYR=MdmsJGLpsRMyg6u8bWFNa:Autocomplete(EyNh30w621TuLzX8,nK1uxv1[51],nK1uxv1[52],nK1uxv1[13],nK1uxv1[12],nK1uxv1[12],nK1uxv1[12])MdmsJGLpsRMyg6u8bWFNa:ApplyPlaceholder(IByaVRLYR,nK1uxv1[53],nK1uxv1[54])IByaVRLYR:SetFontSize(nK1uxv1[38])local U9Jy=MdmsJGLpsRMyg6u8bWFNa:Button(EyNh30w621TuLzX8,nK1uxv1[55],nK1uxv1[52],nK1uxv1[56])MdmsJGLpsRMyg6u8bWFNa:GlueTop(IByaVRLYR,EyNh30w621TuLzX8,nK1uxv1[20],-nK1uxv1[57],nK1uxv1[58])MdmsJGLpsRMyg6u8bWFNa:GlueTop(U9Jy,EyNh30w621TuLzX8,nK1uxv1[59],-nK1uxv1[57],nK1uxv1[60])IByaVRLYR:SetScript(nK1uxv1[61],function()dgLXLhEwOB:SearchMail(IByaVRLYR:GetText())end)U9Jy:SetScript(nK1uxv1[62],function()dgLXLhEwOB:SearchMail(IByaVRLYR:GetText())end)local tWOe=MdmsJGLpsRMyg6u8bWFNa:Checkbox(EyNh30w621TuLzX8,nK1uxv1[63])MdmsJGLpsRMyg6u8bWFNa:GlueRight(tWOe,U9Jy,nK1uxv1[20],nK1uxv1[28])tWOe.OnValueChanged=function(_c5SAwhwDEjzcHhbNz,Ki)dgLXLhEwOB:SearchMail(IByaVRLYR:GetText())end;local os88OfnSVWspTFSKxuG4=MdmsJGLpsRMyg6u8bWFNa:FrameTooltip(tWOe,nK1uxv1[64],nK1uxv1[65],nK1uxv1[66],nK1uxv1[19])local QyMGGIL0b=MdmsJGLpsRMyg6u8bWFNa:Checkbox(EyNh30w621TuLzX8,nK1uxv1[67])MdmsJGLpsRMyg6u8bWFNa:GlueRight(QyMGGIL0b,tWOe,nK1uxv1[20],nK1uxv1[28])QyMGGIL0b.OnValueChanged=function(Sq,xUb1kG6TuBByk80sYX)dgLXLhEwOB:SearchMail(IByaVRLYR:GetText())end;local j9cqS6EsA=MdmsJGLpsRMyg6u8bWFNa:FrameTooltip(QyMGGIL0b,nK1uxv1[68],nK1uxv1[69],nK1uxv1[70],nK1uxv1[19])EyNh30w621TuLzX8.allCharactersToggle=tWOe;EyNh30w621TuLzX8.todayToggle=QyMGGIL0b;EyNh30w621TuLzX8.searchBox=IByaVRLYR;EyNh30w621TuLzX8.searchButton=U9Jy end;function dgLXLhEwOB:DrawSearchResultsTable()local D5C9ARr7n1=self.maillogWindow;local function A(APTBwwPe9P2Fur9EXd,dYArCl9PE4cfU0cH5kvG,Pv0X)if dYArCl9PE4cfU0cH5kvG then GameTooltip:SetOwner(APTBwwPe9P2Fur9EXd)GameTooltip:SetText(Pv0X)else GameTooltip:Hide()end end;local EXO9I35n7F={{name=nK1uxv1[71],width=nK1uxv1[33],align=nK1uxv1[72],index=nK1uxv1[73],format=function(AOnU7exowFsIRh30FQtA)return AOnU7exowFsIRh30FQtA and(AOnU7exowFsIRh30FQtA..nK1uxv1[74])or nK1uxv1[13]end,defaultSort=nK1uxv1[75]},{name=nK1uxv1[76],width=nK1uxv1[33],align=nK1uxv1[77],index=nK1uxv1[78],format=function(SBOrxIA)return SBOrxIA and(SBOrxIA..nK1uxv1[79])or nK1uxv1[13]end,defaultSort=nK1uxv1[80]},{name=nK1uxv1[81],width=nK1uxv1[82],align=nK1uxv1[83],index=nK1uxv1[84],format=nK1uxv1[85]},{name=nK1uxv1[86],width=nK1uxv1[82],align=nK1uxv1[87],index=nK1uxv1[88],format=nK1uxv1[89]},{name=nK1uxv1[90],width=nK1uxv1[82],align=nK1uxv1[91],index=nK1uxv1[92],format=nK1uxv1[93]},{name=nK1uxv1[94],width=nK1uxv1[82],align=nK1uxv1[95],index=nK1uxv1[96],format=nK1uxv1[97]},{name=nK1uxv1[98],width=nK1uxv1[82],align=nK1uxv1[99],index=nK1uxv1[100],format=nK1uxv1[101],events={OnEnter=function(g,tYGpeWGVnyGCZwqB,wjjcyg6,d36KJ4pyHji5,NS8SHVDLO_szmgta,YOg4)if d36KJ4pyHji5.body then A(tYGpeWGVnyGCZwqB,nK1uxv1[19],d36KJ4pyHji5.body)end;return nK1uxv1[19]end,OnLeave=function(Yu8Ni,X_C9FQ89WcRQ8R)A(X_C9FQ89WcRQ8R,nK1uxv1[102])return nK1uxv1[19]end}},{name=nK1uxv1[103],width=nK1uxv1[82],align=nK1uxv1[104],index=nK1uxv1[105],sortable=nK1uxv1[102],format=function(M0dCOPEqIRI_0Pr,jv,eBJ0yRCNrTlAdPlakFz)local m7sKwK6azfBp6aPx=M0dCOPEqIRI_0Pr and nK1uxv1[106]or nK1uxv1[107]local EWYZD=mm7xzhmX.mailLogger:ValidateMailChecksum(jv)if EWYZD==nK1uxv1[108]then m7sKwK6azfBp6aPx=m7sKwK6azfBp6aPx..nK1uxv1[109]elseif EWYZD==nK1uxv1[110]then m7sKwK6azfBp6aPx=m7sKwK6azfBp6aPx..nK1uxv1[111]end;return m7sKwK6azfBp6aPx end},{name=nK1uxv1[13],width=nK1uxv1[57],align=nK1uxv1[112],index=nK1uxv1[113],format=nK1uxv1[114],sortable=nK1uxv1[102],renderer=function(SnxQgniLzWxY3rIZ,KQ7vSOjG266osSgbFdbJn,sy1_gExwnEca06g863Q,JBREPg04MLa0T6sPx_ZL)if not SnxQgniLzWxY3rIZ.copyButton then SnxQgniLzWxY3rIZ.copyButton=MdmsJGLpsRMyg6u8bWFNa:SquareButton(SnxQgniLzWxY3rIZ,nK1uxv1[115],nK1uxv1[115])SnxQgniLzWxY3rIZ.copyButton:SetIcon(nK1uxv1[116],nK1uxv1[38],nK1uxv1[38],nK1uxv1[19])SnxQgniLzWxY3rIZ.copyButton:SetPoint(nK1uxv1[117],SnxQgniLzWxY3rIZ,nK1uxv1[118],nK1uxv1[28],nK1uxv1[28])SnxQgniLzWxY3rIZ.copyButton:SetScript(nK1uxv1[119],function()dgLXLhEwOB:ShowCopyWindow(sy1_gExwnEca06g863Q)end)else SnxQgniLzWxY3rIZ.copyButton:SetScript(nK1uxv1[120],function()dgLXLhEwOB:ShowCopyWindow(sy1_gExwnEca06g863Q)end)end end}}D5C9ARr7n1.searchResults=MdmsJGLpsRMyg6u8bWFNa:ScrollTable(D5C9ARr7n1,EXO9I35n7F,nK1uxv1[121],nK1uxv1[122])D5C9ARr7n1.searchResults:EnableSelection(nK1uxv1[19])D5C9ARr7n1.searchResults:SetScript(nK1uxv1[123],function(N0WQsid5uKA5TY3oUT9q)local LU40cXnGy43ey1kjM56Z=N0WQsid5uKA5TY3oUT9q:GetWidth()local J1TbEFVUUM8YV0OWlLI=N0WQsid5uKA5TY3oUT9q:GetHeight()local nSu1aXDYr_6rjz=nK1uxv1[28]for k=nK1uxv1[18],#N0WQsid5uKA5TY3oUT9q.columns do nSu1aXDYr_6rjz=nSu1aXDYr_6rjz+N0WQsid5uKA5TY3oUT9q.columns[k].width end;for k=nK1uxv1[18],#N0WQsid5uKA5TY3oUT9q.columns do N0WQsid5uKA5TY3oUT9q.columns[k]:SetWidth(N0WQsid5uKA5TY3oUT9q.columns[k].width/nSu1aXDYr_6rjz* (LU40cXnGy43ey1kjM56Z-nK1uxv1[52]))end;N0WQsid5uKA5TY3oUT9q:SetDisplayRows(math.floor(J1TbEFVUUM8YV0OWlLI/N0WQsid5uKA5TY3oUT9q.rowHeight),N0WQsid5uKA5TY3oUT9q.rowHeight)end)MdmsJGLpsRMyg6u8bWFNa:GlueAcross(D5C9ARr7n1.searchResults,D5C9ARr7n1,nK1uxv1[20],-nK1uxv1[124],-nK1uxv1[20],nK1uxv1[125])D5C9ARr7n1.stateLabel=MdmsJGLpsRMyg6u8bWFNa:Label(D5C9ARr7n1.searchResults,nK1uxv1[126])MdmsJGLpsRMyg6u8bWFNa:GlueTop(D5C9ARr7n1.stateLabel,D5C9ARr7n1.searchResults,nK1uxv1[28],-nK1uxv1[57],nK1uxv1[127])end;function dgLXLhEwOB:ApplyDefaultSort(k70WoD8pG)if(self.maillogWindow.searchResults.head.columns)then local UPL3aJpR0eB=nK1uxv1[102]for zmdKEB5TyFyFXThbx,N7YZUvpCimi6 in pairs(self.maillogWindow.searchResults.head.columns)do if(N7YZUvpCimi6.arrow:IsVisible())then UPL3aJpR0eB=nK1uxv1[19]end end;if(not UPL3aJpR0eB)then return table.sort(k70WoD8pG,function(Szv,etThgHx4jA)return Szv[nK1uxv1[128]]>etThgHx4jA[nK1uxv1[129]]end)end end;return k70WoD8pG end;function dgLXLhEwOB:UpdateStateText()if(#self.currentView>nK1uxv1[28])then self.maillogWindow.stateLabel:Hide()else self.maillogWindow.stateLabel:SetText(nK1uxv1[130])end end;function dgLXLhEwOB:UpdateResultsText()if(#self.currentView>nK1uxv1[28])then self.maillogWindow.resultsLabel:SetText(nK1uxv1[131]..tostring(#self.currentView))self.maillogWindow.resultsLabel:Show()else self.maillogWindow.resultsLabel:Hide()end end;function dgLXLhEwOB:ShowCopyWindow(bRN6py7Fm)local q9XbrTLWz=MdmsJGLpsRMyg6u8bWFNa:Window(UIParent,nK1uxv1[51],nK1uxv1[33],nK1uxv1[132])q9XbrTLWz:SetPoint(nK1uxv1[133],UIParent,nK1uxv1[134],nK1uxv1[28],nK1uxv1[28])q9XbrTLWz:SetFrameLevel(mm7xzhmX:GetNextFrameLevel())local DJg3LwWL=bRN6py7Fm.gold and floor(bRN6py7Fm.gold/COPPER_PER_GOLD)or nK1uxv1[28]local k8=bRN6py7Fm.sent and nK1uxv1[135]or nK1uxv1[136]local B1hIYj_6i8_fd8=string.format(nK1uxv1[137]..string.char(nK1uxv1[20])..nK1uxv1[138]..string.char(nK1uxv1[20])..nK1uxv1[139]..string.char(nK1uxv1[20])..nK1uxv1[140]..string.char(nK1uxv1[20])..nK1uxv1[141]..string.char(nK1uxv1[20])..nK1uxv1[142]..string.char(nK1uxv1[20])..nK1uxv1[143]..string.char(nK1uxv1[20])..nK1uxv1[144]..string.char(nK1uxv1[20])..nK1uxv1[145],bRN6py7Fm.id or nK1uxv1[13],(bRN6py7Fm.date and(bRN6py7Fm.date..nK1uxv1[146]))or nK1uxv1[13],(bRN6py7Fm.dateOpened and(bRN6py7Fm.dateOpened..nK1uxv1[147]))or nK1uxv1[13],bRN6py7Fm.source or nK1uxv1[13],bRN6py7Fm.destination or nK1uxv1[13],DJg3LwWL,bRN6py7Fm.subject or nK1uxv1[13],bRN6py7Fm.body or nK1uxv1[13],k8)local RJvoXRIuE=MdmsJGLpsRMyg6u8bWFNa:Label(q9XbrTLWz,nK1uxv1[148])MdmsJGLpsRMyg6u8bWFNa:GlueTop(RJvoXRIuE,q9XbrTLWz,nK1uxv1[28],-nK1uxv1[57],nK1uxv1[149])local N63=MdmsJGLpsRMyg6u8bWFNa:MultiLineBox(q9XbrTLWz,nK1uxv1[150],nK1uxv1[151],nK1uxv1[12])MdmsJGLpsRMyg6u8bWFNa:GlueTop(N63,q9XbrTLWz,nK1uxv1[152],-nK1uxv1[153],nK1uxv1[154])N63:SetValue(B1hIYj_6i8_fd8)if N63.editBox then N63.editBox:SetCursorPosition(nK1uxv1[28])N63.editBox:HighlightText()N63.editBox:SetFocus()N63.editBox:SetScript(nK1uxv1[155],function()end)N63.editBox:SetScript(nK1uxv1[156],function(iI2hS7E3lhD)if iI2hS7E3lhD:GetText()~=B1hIYj_6i8_fd8 then iI2hS7E3lhD:SetText(B1hIYj_6i8_fd8)end end)end;local Jcb4sARFKQ3Adwb=MdmsJGLpsRMyg6u8bWFNa:Button(q9XbrTLWz,nK1uxv1[157],nK1uxv1[115],nK1uxv1[158])MdmsJGLpsRMyg6u8bWFNa:GlueBottom(Jcb4sARFKQ3Adwb,q9XbrTLWz,nK1uxv1[28],nK1uxv1[20],nK1uxv1[159])Jcb4sARFKQ3Adwb:SetScript(nK1uxv1[160],function()q9XbrTLWz:Hide()end)q9XbrTLWz:Show()end;function dgLXLhEwOB:OnEvent(CUX)if(self.maillogWindow)then C_Timer.After(nK1uxv1[18],function()dgLXLhEwOB:SearchMail(self.maillogWindow.searchBox:GetText())end)end end;function dgLXLhEwOB:CleanUp()local ZRjkznzZfJ8N23d=mm7xzhmX.db.global.maillog;local q4vhxsZCNRwFMdN=nK1uxv1[28]local z88_bL9QE=mm7xzhmX.db.global.logCleanupDays;for bfB1o2TJ1,Hl6DqBSza3bQt in pairs(ZRjkznzZfJ8N23d)do local RpCtkH=mm7xzhmX.helperFunctions:IsOlderThanDays(Hl6DqBSza3bQt.date,z88_bL9QE)if RpCtkH==nK1uxv1[19]then q4vhxsZCNRwFMdN=q4vhxsZCNRwFMdN+nK1uxv1[18]ZRjkznzZfJ8N23d[bfB1o2TJ1]=nK1uxv1[12]end end;if q4vhxsZCNRwFMdN>nK1uxv1[28]then mm7xzhmX:Printf(nK1uxv1[161],q4vhxsZCNRwFMdN,z88_bL9QE)end end