local ZgUWOp={[1]="\65\99\101\65\100\100\111\110\45\51\46\48",[2]="\68\97\119\110\84\111\111\108\115",[3]="\68\97\119\110\77\97\105\108\76\111\103",[4]="\65\99\101\69\118\101\110\116\45\51\46\48",[5]="\65\99\101\72\111\111\107\45\51\46\48",[6]="\65\99\101\67\111\110\115\111\108\101\45\51\46\48",[7]="\83\116\100\85\105",[8]="\77\65\73\76\95\83\85\67\67\69\83\83",[9]="\79\110\69\118\101\110\116",[10]="\77\65\73\76\95\73\78\66\79\88\95\85\80\68\65\84\69",[11]="\79\110\69\118\101\110\116",[12]=nil,[13]="",[14]="\112\108\97\121\101\114",[15]="\45",[16]="\33\37\89\45\37\109\45\37\100",[17]="\85\78\75\78\79\87\78\45\83\69\78\68\69\82",[18]=1,[19]=true,[20]=10,[21]="\115\101\110\116",[22]="\114\101\99\101\105\118\101\100",[23]=1500,[24]=700,[25]="\68\97\119\110\32\77\97\105\108\32\76\111\103\32\86\105\101\119\101\114",[26]="\67\69\78\84\69\82",[27]="\67\69\78\84\69\82",[28]=0,[29]="\79\110\68\114\97\103\83\116\111\112",[30]="\66\79\84\84\79\77\82\73\71\72\84",[31]="\84\79\80\76\69\70\84",[32]=850,[33]=250,[34]="\79\110\77\111\117\115\101\68\111\119\110",[35]=32,[36]="\67\69\78\84\69\82",[37]="\82\73\71\72\84",[38]=16,[39]=5,[40]="\76\69\70\84",[41]=128,[42]="\67\108\101\97\114\32\76\111\103",[43]="\67\69\78\84\69\82",[44]="\79\110\67\108\105\99\107",[45]="\84\104\105\115\32\67\104\97\114\97\99\116\101\114",[46]="\65\108\108\32\77\97\105\108",[47]="\67\108\101\97\114\32\76\111\103",[48]="\83\101\108\101\99\116\32\108\111\103\32\116\111\32\99\108\101\97\114\46\32\84\104\101\115\101\32\97\99\116\105\111\110\115\32\67\65\78\78\79\84\32\66\69\32\82\69\86\69\82\83\69\68\46\32\66\111\116\104\32\115\101\110\116\32\97\110\100\32\114\101\99\101\105\118\101\100\32\109\97\105\108\32\119\105\108\108\32\98\101\32\100\101\108\101\116\101\100\46",[49]="\112\108\97\121\101\114",[50]="\45",[51]=400,[52]=30,[53]="\83\101\97\114\99\104",[54]="\73\110\116\101\114\102\97\99\101\92\67\111\109\109\111\110\92\85\73\45\83\101\97\114\99\104\98\111\120\45\73\99\111\110",[55]=80,[56]="\83\101\97\114\99\104",[57]=40,[58]="\76\69\70\84",[59]=420,[60]="\76\69\70\84",[61]="\79\110\69\110\116\101\114\80\114\101\115\115\101\100",[62]="\79\110\67\108\105\99\107",[63]="\65\108\108\32\99\104\97\114\97\99\116\101\114\115",[64]="\83\104\111\119\32\97\108\108\32\109\97\105\108\32\114\101\99\101\105\118\101\100\32\98\121\32\97\110\121\32\99\104\97\114\97\99\116\101\114\32\111\110\32\116\104\105\115\32\97\99\99\111\117\110\116\46",[65]="\116\111\111\108\116\105\112",[66]="\82\73\71\72\84",[67]="\79\110\108\121\32\115\104\111\119\32\116\111\100\97\121",[68]="\79\110\108\121\32\115\104\111\119\32\109\97\105\108\32\116\104\97\116\32\119\97\115\32\114\101\99\101\105\118\101\100\32\111\114\32\115\101\110\116\32\116\111\100\97\121\46",[69]="\116\111\111\108\116\105\112",[70]="\82\73\71\72\84",[71]="\68\97\116\101\32\83\101\110\116",[72]="\67\69\78\84\69\82",[73]="\100\97\116\101",[74]="\32\85\84\67",[75]="\97\115\99",[76]="\68\97\116\101\32\79\112\101\110\101\100",[77]="\67\69\78\84\69\82",[78]="\100\97\116\101\79\112\101\110\101\100",[79]="\32\85\84\67",[80]="\97\115\99",[81]="\83\101\110\100\101\114",[82]=150,[83]="\67\69\78\84\69\82",[84]="\115\111\117\114\99\101",[85]="\115\116\114\105\110\103",[86]="\82\101\99\105\112\105\101\110\116",[87]="\67\69\78\84\69\82",[88]="\100\101\115\116\105\110\97\116\105\111\110",[89]="\115\116\114\105\110\103",[90]="\71\111\108\100",[91]="\76\69\70\84",[92]="\103\111\108\100",[93]="\109\111\110\101\121",[94]="\83\117\98\106\101\99\116",[95]="\76\69\70\84",[96]="\115\117\98\106\101\99\116",[97]="\115\116\114\105\110\103",[98]="\66\111\100\121",[99]="\76\69\70\84",[100]="\98\111\100\121",[101]="\115\116\114\105\110\103",[102]=false,[103]="\83\101\110\116\47\82\101\99\101\105\118\101\100",[104]="\67\69\78\84\69\82",[105]="\115\101\110\116",[106]="\83\101\110\116",[107]="\82\101\99\101\105\118\101\100",[108]="\116\97\109\112\101\114\101\100",[109]="\33",[110]="\109\105\115\115\105\110\103",[111]="\46",[112]="\67\69\78\84\69\82",[113]="\99\111\112\121\66\117\116\116\111\110",[114]="\99\117\115\116\111\109",[115]=24,[116]="\73\110\116\101\114\102\97\99\101\92\66\117\116\116\111\110\115\92\85\73\45\71\117\105\108\100\66\117\116\116\111\110\45\80\117\98\108\105\99\78\111\116\101\45\85\112",[117]="\67\69\78\84\69\82",[118]="\67\69\78\84\69\82",[119]="\79\110\67\108\105\99\107",[120]="\79\110\67\108\105\99\107",[121]=18,[122]=29,[123]="\79\110\83\105\122\101\67\104\97\110\103\101\100",[124]=110,[125]=50,[126]="\78\111\32\114\101\115\117\108\116\115\32\102\111\117\110\100\46",[127]="\67\69\78\84\69\82",[128]="\100\97\116\101",[129]="\100\97\116\101",[130]="\78\111\32\114\101\115\117\108\116\115\32\102\111\117\110\100\46",[131]="\67\117\114\114\101\110\116\32\114\101\115\117\108\116\115\58\32",[132]="\67\111\112\121\32\77\97\105\108\32\76\111\103\32\69\110\116\114\121",[133]="\67\69\78\84\69\82",[134]="\67\69\78\84\69\82",[135]="\83\101\110\116",[136]="\82\101\99\101\105\118\101\100",[137]="\73\68\58\32\37\115",[138]="\68\97\116\101\32\83\101\110\116\58\32\37\115",[139]="\68\97\116\101\32\79\112\101\110\101\100\58\32\37\115",[140]="\83\101\110\100\101\114\58\32\37\115",[141]="\82\101\99\105\112\105\101\110\116\58\32\37\115",[142]="\71\111\108\100\58\32\37\115",[143]="\83\117\98\106\101\99\116\58\32\37\115",[144]="\66\111\100\121\58\32\37\115",[145]="\84\121\112\101\58\32\37\115",[146]="\32\85\84\67",[147]="\32\85\84\67",[148]="\85\115\101\32\67\84\82\76\43\67\32\116\111\32\99\111\112\121",[149]="\67\69\78\84\69\82",[150]=360,[151]=140,[152]=20,[153]=65,[154]="\76\69\70\84",[155]="\79\110\67\104\97\114",[156]="\79\110\84\101\120\116\67\104\97\110\103\101\100",[157]=100,[158]="\67\108\111\115\101",[159]="\67\69\78\84\69\82",[160]="\79\110\67\108\105\99\107",[161]="\91\77\97\105\108\32\76\111\103\93\32\67\108\101\97\110\101\100\32\117\112\32\37\105\32\109\97\105\108\32\108\111\103\115\32\111\108\100\101\114\32\116\104\97\110\32\37\105\32\100\97\121\115",[162]="\88\70\85\53\75\52\55\48\82\32\49\53\32\52\87\51\53\48\77\51\46\32\75\82\51\68\49\55\32\55\48\32\88\70\85\53\75\52\55\48\82\33"}local rUYvG4wrIyA5KB=LibStub(ZgUWOp[1]):GetAddon(ZgUWOp[2])local Ygarrr=rUYvG4wrIyA5KB:NewModule(ZgUWOp[3],ZgUWOp[4],ZgUWOp[5],ZgUWOp[6])local HZC_H5dCeH=LibStub(ZgUWOp[7])function Ygarrr:OnEnable()self.configDB=rUYvG4wrIyA5KB.db.char;self.db=rUYvG4wrIyA5KB.db.global.maillog;self:RegisterEvent(ZgUWOp[8],ZgUWOp[9])self:RegisterEvent(ZgUWOp[10],ZgUWOp[11])self.CleanUp()end;function Ygarrr:OpenPanel()if(self.maillogWindow==ZgUWOp[12])then self:DrawWindow()self:DrawSearchPane()self:DrawSearchResultsTable()self:SearchMail(ZgUWOp[13])else self.maillogWindow:Show()self:SearchMail(ZgUWOp[13])end end;function Ygarrr:IsVisible()return self.maillogWindow and self.maillogWindow:IsVisible()end;function Ygarrr:Hide()if self.maillogWindow then self.maillogWindow:Hide()end end;function Ygarrr:SearchMail(e8niiwSBoKoVqU66l5Afd)local vRw5XGsqJ3=self.maillogWindow;local CX6L2HniJwRjc=e8niiwSBoKoVqU66l5Afd:lower()local GtJYC=rUYvG4wrIyA5KB.db.global.maillog;local TScf0whlycqBJ3Wk={}local j6Urm2hL_E7FqGadfLS,d98Ufp5YKlBMI8=UnitFullName(ZgUWOp[14])local vDy=j6Urm2hL_E7FqGadfLS..ZgUWOp[15]..d98Ufp5YKlBMI8;local p9duVjPF=vRw5XGsqJ3.allCharactersToggle:GetChecked()local fDfikiKUxCUIfoOcc=vRw5XGsqJ3.todayToggle:GetChecked()local jNMbrWn9bDwU4kJ=date(ZgUWOp[16],GetServerTime())for oLHzpztuELB018BxOZ,qLaFiVI5KyRorwT_ in pairs(GtJYC)do if(qLaFiVI5KyRorwT_.source==ZgUWOp[12])then qLaFiVI5KyRorwT_.source=ZgUWOp[17]end;if(qLaFiVI5KyRorwT_.dateOpened==ZgUWOp[12])then qLaFiVI5KyRorwT_.dateOpened=qLaFiVI5KyRorwT_.date end;if(p9duVjPF or(qLaFiVI5KyRorwT_.source and qLaFiVI5KyRorwT_.source:lower():find(vDy:lower(),ZgUWOp[18],ZgUWOp[19])or qLaFiVI5KyRorwT_.destination and qLaFiVI5KyRorwT_.destination:lower():find(vDy:lower(),ZgUWOp[18],ZgUWOp[19]))~=ZgUWOp[12])and(qLaFiVI5KyRorwT_.date and(not fDfikiKUxCUIfoOcc or string.sub(qLaFiVI5KyRorwT_.date,ZgUWOp[18],ZgUWOp[20])==jNMbrWn9bDwU4kJ))and(qLaFiVI5KyRorwT_.subject and qLaFiVI5KyRorwT_.subject:lower():find(CX6L2HniJwRjc,ZgUWOp[18],ZgUWOp[19])or qLaFiVI5KyRorwT_.body and qLaFiVI5KyRorwT_.body:lower():find(CX6L2HniJwRjc,ZgUWOp[18],ZgUWOp[19])or qLaFiVI5KyRorwT_.gold and tostring(floor(qLaFiVI5KyRorwT_.gold/COPPER_PER_GOLD)):find(CX6L2HniJwRjc,ZgUWOp[18],ZgUWOp[19])or qLaFiVI5KyRorwT_.source and qLaFiVI5KyRorwT_.source:lower():find(CX6L2HniJwRjc,ZgUWOp[18],ZgUWOp[19])or qLaFiVI5KyRorwT_.destination and qLaFiVI5KyRorwT_.destination:lower():find(CX6L2HniJwRjc,ZgUWOp[18],ZgUWOp[19])or qLaFiVI5KyRorwT_.date and qLaFiVI5KyRorwT_.date:lower():find(CX6L2HniJwRjc,ZgUWOp[18],ZgUWOp[19])or CX6L2HniJwRjc==ZgUWOp[21]and qLaFiVI5KyRorwT_.sent or CX6L2HniJwRjc==ZgUWOp[22]and not qLaFiVI5KyRorwT_.sent)then table.insert(TScf0whlycqBJ3Wk,qLaFiVI5KyRorwT_)end end;Ygarrr:ApplyDefaultSort(TScf0whlycqBJ3Wk)self.currentView=TScf0whlycqBJ3Wk;self.maillogWindow.searchResults:SetData(self.currentView,ZgUWOp[19])Ygarrr:UpdateStateText()Ygarrr:UpdateResultsText()end;function Ygarrr:DrawWindow()local UjSq1yI=HZC_H5dCeH:Window(UIParent,ZgUWOp[23],ZgUWOp[24],ZgUWOp[25])UjSq1yI:SetPoint(ZgUWOp[26],UIParent,ZgUWOp[27],ZgUWOp[28],ZgUWOp[28])UjSq1yI:SetScript(ZgUWOp[29],function(aIsr_N67vmP4PJv8XvWw)aIsr_N67vmP4PJv8XvWw:StopMovingOrSizing()end)HZC_H5dCeH:MakeResizable(UjSq1yI,ZgUWOp[30])HZC_H5dCeH:MakeResizable(UjSq1yI,ZgUWOp[31])UjSq1yI:SetResizeBounds(ZgUWOp[32],ZgUWOp[33])UjSq1yI:SetFrameLevel(rUYvG4wrIyA5KB:GetNextFrameLevel())UjSq1yI:SetScript(ZgUWOp[34],function(LHjV_YKTlU2iK)LHjV_YKTlU2iK:SetFrameLevel(rUYvG4wrIyA5KB:GetNextFrameLevel())end)local IsX=HZC_H5dCeH:Frame(UjSq1yI,ZgUWOp[35],ZgUWOp[35])local O=HZC_H5dCeH:Texture(IsX,ZgUWOp[35],ZgUWOp[35],rUYvG4wrIyA5KB.LogoPath)HZC_H5dCeH:GlueTop(O,IsX,ZgUWOp[28],ZgUWOp[28],ZgUWOp[36])HZC_H5dCeH:GlueBottom(IsX,UjSq1yI,-ZgUWOp[20],ZgUWOp[20],ZgUWOp[37])UjSq1yI.resultsLabel=HZC_H5dCeH:Label(UjSq1yI,ZgUWOp[12],ZgUWOp[38])HZC_H5dCeH:GlueBottom(UjSq1yI.resultsLabel,UjSq1yI,ZgUWOp[20],ZgUWOp[39],ZgUWOp[40])local zw7J4y3rC7Ct4PHn1wg=HZC_H5dCeH:Button(UjSq1yI,ZgUWOp[41],ZgUWOp[38],ZgUWOp[42])HZC_H5dCeH:GlueBottom(zw7J4y3rC7Ct4PHn1wg,UjSq1yI,ZgUWOp[28],ZgUWOp[20],ZgUWOp[43])zw7J4y3rC7Ct4PHn1wg:SetScript(ZgUWOp[44],function()Ygarrr:DrawClearWarningWindow()end)self.maillogWindow=UjSq1yI end;function Ygarrr:DrawClearWarningWindow()local gvL7ShDVFKfkrx_uAv2k={character={text=ZgUWOp[45],onClick=function(uVnJlp_pdGLBqpLH)Ygarrr:ClearMailForCharacter()uVnJlp_pdGLBqpLH.window:Hide()end},all={text=ZgUWOp[46],onClick=function(yrerG_3P3)Ygarrr:ClearAllMail()yrerG_3P3.window:Hide()end}}HZC_H5dCeH:Confirm(ZgUWOp[47],ZgUWOp[48],gvL7ShDVFKfkrx_uAv2k,ZgUWOp[18])end;function Ygarrr:ClearMailForCharacter()local TbiKQjOGVxjyFc0,wkRjMAFN=UnitFullName(ZgUWOp[49])local DvMgN=TbiKQjOGVxjyFc0 ..ZgUWOp[50]..wkRjMAFN;for k6_ixcBZZIA,Ry9FcH in pairs(rUYvG4wrIyA5KB.db.global.maillog)do if Ry9FcH.source==DvMgN or Ry9FcH.destination==DvMgN then rUYvG4wrIyA5KB.db.global.maillog[k6_ixcBZZIA]=ZgUWOp[12]end end;if(self.maillogWindow)then Ygarrr:SearchMail(self.maillogWindow.searchBox:GetText())end end;function Ygarrr:ClearAllMail()for ZOLhIEWGDcfE_pzj9,bDh80b in pairs(rUYvG4wrIyA5KB.db.global.maillog)do rUYvG4wrIyA5KB.db.global.maillog[ZOLhIEWGDcfE_pzj9]=ZgUWOp[12]end;if(self.maillogWindow)then Ygarrr:SearchMail(self.maillogWindow.searchBox:GetText())end end;function Ygarrr:DrawSearchPane()local VuXDLCU5p00SBHfj3Fr=self.maillogWindow;local Z1O=HZC_H5dCeH:Autocomplete(VuXDLCU5p00SBHfj3Fr,ZgUWOp[51],ZgUWOp[52],ZgUWOp[13],ZgUWOp[12],ZgUWOp[12],ZgUWOp[12])HZC_H5dCeH:ApplyPlaceholder(Z1O,ZgUWOp[53],ZgUWOp[54])Z1O:SetFontSize(ZgUWOp[38])local TGWpPXvB=HZC_H5dCeH:Button(VuXDLCU5p00SBHfj3Fr,ZgUWOp[55],ZgUWOp[52],ZgUWOp[56])HZC_H5dCeH:GlueTop(Z1O,VuXDLCU5p00SBHfj3Fr,ZgUWOp[20],-ZgUWOp[57],ZgUWOp[58])HZC_H5dCeH:GlueTop(TGWpPXvB,VuXDLCU5p00SBHfj3Fr,ZgUWOp[59],-ZgUWOp[57],ZgUWOp[60])Z1O:SetScript(ZgUWOp[61],function()Ygarrr:SearchMail(Z1O:GetText())end)TGWpPXvB:SetScript(ZgUWOp[62],function()Ygarrr:SearchMail(Z1O:GetText())end)local uo6y1qbA0IAVDvHL=HZC_H5dCeH:Checkbox(VuXDLCU5p00SBHfj3Fr,ZgUWOp[63])HZC_H5dCeH:GlueRight(uo6y1qbA0IAVDvHL,TGWpPXvB,ZgUWOp[20],ZgUWOp[28])uo6y1qbA0IAVDvHL.OnValueChanged=function(xMW47,jmxeG)Ygarrr:SearchMail(Z1O:GetText())end;local WIQ8dLW3oP3BhxSUDQ=HZC_H5dCeH:FrameTooltip(uo6y1qbA0IAVDvHL,ZgUWOp[64],ZgUWOp[65],ZgUWOp[66],ZgUWOp[19])local hJ4zOhtWYFyRSWoOkmP=HZC_H5dCeH:Checkbox(VuXDLCU5p00SBHfj3Fr,ZgUWOp[67])HZC_H5dCeH:GlueRight(hJ4zOhtWYFyRSWoOkmP,uo6y1qbA0IAVDvHL,ZgUWOp[20],ZgUWOp[28])hJ4zOhtWYFyRSWoOkmP.OnValueChanged=function(Z26o9YDSx,j_EEejiprTTpE8KqWd)Ygarrr:SearchMail(Z1O:GetText())end;local qZPAZTr73kxew_3lz=HZC_H5dCeH:FrameTooltip(hJ4zOhtWYFyRSWoOkmP,ZgUWOp[68],ZgUWOp[69],ZgUWOp[70],ZgUWOp[19])VuXDLCU5p00SBHfj3Fr.allCharactersToggle=uo6y1qbA0IAVDvHL;VuXDLCU5p00SBHfj3Fr.todayToggle=hJ4zOhtWYFyRSWoOkmP;VuXDLCU5p00SBHfj3Fr.searchBox=Z1O;VuXDLCU5p00SBHfj3Fr.searchButton=TGWpPXvB end;function Ygarrr:DrawSearchResultsTable()local MJt3caBfzWJn6QmyQxC=self.maillogWindow;local function sw(nfL6k5Dg5OwQ,A1RU_QP3,Z6qK0dt4OyJ6Sn3U)if A1RU_QP3 then GameTooltip:SetOwner(nfL6k5Dg5OwQ)GameTooltip:SetText(Z6qK0dt4OyJ6Sn3U)else GameTooltip:Hide()end end;local OgR3Nb63Aw={{name=ZgUWOp[71],width=ZgUWOp[33],align=ZgUWOp[72],index=ZgUWOp[73],format=function(pWXaxwlUED2mucuRNpP)return pWXaxwlUED2mucuRNpP and(pWXaxwlUED2mucuRNpP..ZgUWOp[74])or ZgUWOp[13]end,defaultSort=ZgUWOp[75]},{name=ZgUWOp[76],width=ZgUWOp[33],align=ZgUWOp[77],index=ZgUWOp[78],format=function(hCMW9lQj6)return hCMW9lQj6 and(hCMW9lQj6 ..ZgUWOp[79])or ZgUWOp[13]end,defaultSort=ZgUWOp[80]},{name=ZgUWOp[81],width=ZgUWOp[82],align=ZgUWOp[83],index=ZgUWOp[84],format=ZgUWOp[85]},{name=ZgUWOp[86],width=ZgUWOp[82],align=ZgUWOp[87],index=ZgUWOp[88],format=ZgUWOp[89]},{name=ZgUWOp[90],width=ZgUWOp[82],align=ZgUWOp[91],index=ZgUWOp[92],format=ZgUWOp[93]},{name=ZgUWOp[94],width=ZgUWOp[82],align=ZgUWOp[95],index=ZgUWOp[96],format=ZgUWOp[97]},{name=ZgUWOp[98],width=ZgUWOp[82],align=ZgUWOp[99],index=ZgUWOp[100],format=ZgUWOp[101],events={OnEnter=function(yZMxOs,wfXGGZy1TKbTfXKg,RS,CqVX8EV_ut4OA_OT,Up25hOpHLVCR5zsCn,p7nEdYeBar)if CqVX8EV_ut4OA_OT.body then sw(wfXGGZy1TKbTfXKg,ZgUWOp[19],CqVX8EV_ut4OA_OT.body)end;return ZgUWOp[19]end,OnLeave=function(m6W0,WPGNLGxK3ydngUQ)sw(WPGNLGxK3ydngUQ,ZgUWOp[102])return ZgUWOp[19]end}},{name=ZgUWOp[103],width=ZgUWOp[82],align=ZgUWOp[104],index=ZgUWOp[105],sortable=ZgUWOp[102],format=function(ZL,eXwHgmGhWYN_r5,V1gzw30Cs)local yS8vuo2rO3K1qn8rs7N0M=ZL and ZgUWOp[106]or ZgUWOp[107]local Pm3S=rUYvG4wrIyA5KB.mailLogger:ValidateMailChecksum(eXwHgmGhWYN_r5)if Pm3S==ZgUWOp[108]then yS8vuo2rO3K1qn8rs7N0M=yS8vuo2rO3K1qn8rs7N0M..ZgUWOp[109]elseif Pm3S==ZgUWOp[110]then yS8vuo2rO3K1qn8rs7N0M=yS8vuo2rO3K1qn8rs7N0M..ZgUWOp[111]end;return yS8vuo2rO3K1qn8rs7N0M end},{name=ZgUWOp[13],width=ZgUWOp[57],align=ZgUWOp[112],index=ZgUWOp[113],format=ZgUWOp[114],sortable=ZgUWOp[102],renderer=function(L1V9ZX6mcVQ,YZ9Rk3ZmD_zmGolYdDZ,iE,ESD02)if not L1V9ZX6mcVQ.copyButton then L1V9ZX6mcVQ.copyButton=HZC_H5dCeH:SquareButton(L1V9ZX6mcVQ,ZgUWOp[115],ZgUWOp[115])L1V9ZX6mcVQ.copyButton:SetIcon(ZgUWOp[116],ZgUWOp[38],ZgUWOp[38],ZgUWOp[19])L1V9ZX6mcVQ.copyButton:SetPoint(ZgUWOp[117],L1V9ZX6mcVQ,ZgUWOp[118],ZgUWOp[28],ZgUWOp[28])L1V9ZX6mcVQ.copyButton:SetScript(ZgUWOp[119],function()Ygarrr:ShowCopyWindow(iE)end)else L1V9ZX6mcVQ.copyButton:SetScript(ZgUWOp[120],function()Ygarrr:ShowCopyWindow(iE)end)end end}}MJt3caBfzWJn6QmyQxC.searchResults=HZC_H5dCeH:ScrollTable(MJt3caBfzWJn6QmyQxC,OgR3Nb63Aw,ZgUWOp[121],ZgUWOp[122])MJt3caBfzWJn6QmyQxC.searchResults:EnableSelection(ZgUWOp[19])MJt3caBfzWJn6QmyQxC.searchResults:SetScript(ZgUWOp[123],function(jnGD9lZW9aa8yQy)local Zg=jnGD9lZW9aa8yQy:GetWidth()local MdUuQoxxtRXuh5v_3=jnGD9lZW9aa8yQy:GetHeight()local A315fvplN9TSOLkZm=ZgUWOp[28]for k=ZgUWOp[18],#jnGD9lZW9aa8yQy.columns do A315fvplN9TSOLkZm=A315fvplN9TSOLkZm+jnGD9lZW9aa8yQy.columns[k].width end;for k=ZgUWOp[18],#jnGD9lZW9aa8yQy.columns do jnGD9lZW9aa8yQy.columns[k]:SetWidth(jnGD9lZW9aa8yQy.columns[k].width/A315fvplN9TSOLkZm* (Zg-ZgUWOp[52]))end;jnGD9lZW9aa8yQy:SetDisplayRows(math.floor(MdUuQoxxtRXuh5v_3 /jnGD9lZW9aa8yQy.rowHeight),jnGD9lZW9aa8yQy.rowHeight)end)HZC_H5dCeH:GlueAcross(MJt3caBfzWJn6QmyQxC.searchResults,MJt3caBfzWJn6QmyQxC,ZgUWOp[20],-ZgUWOp[124],-ZgUWOp[20],ZgUWOp[125])MJt3caBfzWJn6QmyQxC.stateLabel=HZC_H5dCeH:Label(MJt3caBfzWJn6QmyQxC.searchResults,ZgUWOp[126])HZC_H5dCeH:GlueTop(MJt3caBfzWJn6QmyQxC.stateLabel,MJt3caBfzWJn6QmyQxC.searchResults,ZgUWOp[28],-ZgUWOp[57],ZgUWOp[127])end;function Ygarrr:ApplyDefaultSort(Nxuyu)if(self.maillogWindow.searchResults.head.columns)then local FN4=ZgUWOp[102]for nSV4YbLHf_n2a,xMkOi0WEHqHPj in pairs(self.maillogWindow.searchResults.head.columns)do if(xMkOi0WEHqHPj.arrow:IsVisible())then FN4=ZgUWOp[19]end end;if(not FN4)then return table.sort(Nxuyu,function(QGiEzGT6UATQ8ViTUTfx,ZYuoQ)return QGiEzGT6UATQ8ViTUTfx[ZgUWOp[128]]>ZYuoQ[ZgUWOp[129]]end)end end;return Nxuyu end;function Ygarrr:UpdateStateText()if(#self.currentView>ZgUWOp[28])then self.maillogWindow.stateLabel:Hide()else self.maillogWindow.stateLabel:SetText(ZgUWOp[130])end end;function Ygarrr:UpdateResultsText()if(#self.currentView>ZgUWOp[28])then self.maillogWindow.resultsLabel:SetText(ZgUWOp[131]..tostring(#self.currentView))self.maillogWindow.resultsLabel:Show()else self.maillogWindow.resultsLabel:Hide()end end;function Ygarrr:ShowCopyWindow(RlQPtt8T3VoiT1Bul)local ugbQukiouv=HZC_H5dCeH:Window(UIParent,ZgUWOp[51],ZgUWOp[33],ZgUWOp[132])ugbQukiouv:SetPoint(ZgUWOp[133],UIParent,ZgUWOp[134],ZgUWOp[28],ZgUWOp[28])ugbQukiouv:SetFrameLevel(rUYvG4wrIyA5KB:GetNextFrameLevel())local uJHe70yc2jo=RlQPtt8T3VoiT1Bul.gold and floor(RlQPtt8T3VoiT1Bul.gold/COPPER_PER_GOLD)or ZgUWOp[28]local eNJ9p3Nvw5E=RlQPtt8T3VoiT1Bul.sent and ZgUWOp[135]or ZgUWOp[136]local eNF=string.format(ZgUWOp[137]..string.char(ZgUWOp[20])..ZgUWOp[138]..string.char(ZgUWOp[20])..ZgUWOp[139]..string.char(ZgUWOp[20])..ZgUWOp[140]..string.char(ZgUWOp[20])..ZgUWOp[141]..string.char(ZgUWOp[20])..ZgUWOp[142]..string.char(ZgUWOp[20])..ZgUWOp[143]..string.char(ZgUWOp[20])..ZgUWOp[144]..string.char(ZgUWOp[20])..ZgUWOp[145],RlQPtt8T3VoiT1Bul.id or ZgUWOp[13],(RlQPtt8T3VoiT1Bul.date and(RlQPtt8T3VoiT1Bul.date..ZgUWOp[146]))or ZgUWOp[13],(RlQPtt8T3VoiT1Bul.dateOpened and(RlQPtt8T3VoiT1Bul.dateOpened..ZgUWOp[147]))or ZgUWOp[13],RlQPtt8T3VoiT1Bul.source or ZgUWOp[13],RlQPtt8T3VoiT1Bul.destination or ZgUWOp[13],uJHe70yc2jo,RlQPtt8T3VoiT1Bul.subject or ZgUWOp[13],RlQPtt8T3VoiT1Bul.body or ZgUWOp[13],eNJ9p3Nvw5E)local uo=HZC_H5dCeH:Label(ugbQukiouv,ZgUWOp[148])HZC_H5dCeH:GlueTop(uo,ugbQukiouv,ZgUWOp[28],-ZgUWOp[57],ZgUWOp[149])local UL12MpzUnMwly8h_DbZ=HZC_H5dCeH:MultiLineBox(ugbQukiouv,ZgUWOp[150],ZgUWOp[151],ZgUWOp[12])HZC_H5dCeH:GlueTop(UL12MpzUnMwly8h_DbZ,ugbQukiouv,ZgUWOp[152],-ZgUWOp[153],ZgUWOp[154])UL12MpzUnMwly8h_DbZ:SetValue(eNF)if UL12MpzUnMwly8h_DbZ.editBox then UL12MpzUnMwly8h_DbZ.editBox:SetCursorPosition(ZgUWOp[28])UL12MpzUnMwly8h_DbZ.editBox:HighlightText()UL12MpzUnMwly8h_DbZ.editBox:SetFocus()UL12MpzUnMwly8h_DbZ.editBox:SetScript(ZgUWOp[155],function()end)UL12MpzUnMwly8h_DbZ.editBox:SetScript(ZgUWOp[156],function(VqrxnJdKmm)if VqrxnJdKmm:GetText()~=eNF then VqrxnJdKmm:SetText(eNF)end end)end;local TEAfvw72Oipx3kQiU=HZC_H5dCeH:Button(ugbQukiouv,ZgUWOp[157],ZgUWOp[115],ZgUWOp[158])HZC_H5dCeH:GlueBottom(TEAfvw72Oipx3kQiU,ugbQukiouv,ZgUWOp[28],ZgUWOp[20],ZgUWOp[159])TEAfvw72Oipx3kQiU:SetScript(ZgUWOp[160],function()ugbQukiouv:Hide()end)ugbQukiouv:Show()end;function Ygarrr:OnEvent(FrwLnXtv)if(self.maillogWindow)then C_Timer.After(ZgUWOp[18],function()Ygarrr:SearchMail(self.maillogWindow.searchBox:GetText())end)end end;function Ygarrr:CleanUp()local AwarwDQNYBCZO6p=rUYvG4wrIyA5KB.db.global.maillog;local gHCmD=ZgUWOp[28]local zVK3K4Uyn8S=rUYvG4wrIyA5KB.db.global.logCleanupDays;for KTaPj3jY,LXAcfwzGsklDA2VAJ in pairs(AwarwDQNYBCZO6p)do local b0pGywNpK6jJ2bSHd=rUYvG4wrIyA5KB.helperFunctions:IsOlderThanDays(LXAcfwzGsklDA2VAJ.date,zVK3K4Uyn8S)if b0pGywNpK6jJ2bSHd==ZgUWOp[19]then gHCmD=gHCmD+ZgUWOp[18]AwarwDQNYBCZO6p[KTaPj3jY]=ZgUWOp[12]end end;if gHCmD>ZgUWOp[28]then rUYvG4wrIyA5KB:Printf(ZgUWOp[161],gHCmD,zVK3K4Uyn8S)end end