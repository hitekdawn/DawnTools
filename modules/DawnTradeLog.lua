local QAI={[1]="\65\99\101\65\100\100\111\110\45\51\46\48",[2]="\68\97\119\110\84\111\111\108\115",[3]="\68\97\119\110\84\114\97\100\101\76\111\103",[4]="\65\99\101\69\118\101\110\116\45\51\46\48",[5]="\65\99\101\72\111\111\107\45\51\46\48",[6]="\65\99\101\67\111\110\115\111\108\101\45\51\46\48",[7]="\83\116\100\85\105",[8]="",[9]="\84\82\65\68\69\95\65\67\67\69\80\84\95\85\80\68\65\84\69",[10]="\79\110\69\118\101\110\116",[11]="\85\73\95\73\78\70\79\95\77\69\83\83\65\71\69",[12]="\79\110\69\118\101\110\116",[13]="\85\73\95\69\82\82\79\82\95\77\69\83\83\65\71\69",[14]="\79\110\69\118\101\110\116",[15]="\84\82\65\68\69\95\83\72\79\87",[16]="\79\110\69\118\101\110\116",[17]="\85\73\95\69\82\82\79\82\95\77\69\83\83\65\71\69",[18]="\124\67\70\70\70\70\48\48\48\48\91\68\97\119\110\84\114\97\100\101\76\111\103\93\58\32\84\114\97\100\101\32\119\105\116\104\32",[19]="\32\119\97\115\32\99\97\110\99\101\108\108\101\100\58\32",[20]="\85\73\95\73\78\70\79\95\77\69\83\83\65\71\69",[21]="\124\67\70\70\70\70\48\48\48\48\91\68\97\119\110\84\114\97\100\101\76\111\103\93\58\32\84\114\97\100\101\32\119\105\116\104\32",[22]="\32\119\97\115\32\99\97\110\99\101\108\108\101\100\46",[23]="\124\67\70\70\48\48\70\70\48\48\91\68\97\119\110\84\114\97\100\101\76\111\103\93\58\32\84\114\97\100\101\32\119\105\116\104\32",[24]="\32\119\97\115\32\115\117\99\99\101\115\115\102\117\108\46",[25]=1,[26]=0,[27]="\71\97\118\101\32",[28]="\32\116\111\32",[29]="\32\105\110\32\97\32\116\114\97\100\101\46",[30]="\87\72\73\83\80\69\82",[31]=nil,[32]="\82\101\99\101\105\118\101\100\32",[33]="\32\102\114\111\109\32",[34]="\32\105\110\32\97\32\116\114\97\100\101\46",[35]="\87\72\73\83\80\69\82",[36]="\84\82\65\68\69\95\83\72\79\87",[37]="\78\80\67",[38]="\45",[39]="\84\82\65\68\69\95\65\67\67\69\80\84\95\85\80\68\65\84\69",[40]=6,[41]="\124\114\32\120\32",[42]="\124\110",[43]="\124\114\32\120\32",[44]="\124\110",[45]="\37\89\45\37\109\45\37\100\32\37\88\32\40\37\65\41",[46]="\112\108\97\121\101\114",[47]=true,[48]="\94\40\45\63\37\100\43\41\40\37\100\37\100\37\100\41",[49]="\37\49\44\37\50",[50]=10000,[51]=100,[52]=1000,[53]="\32\71\111\108\100\32",[54]="\32\83\105\108\118\101\114\32",[55]="\32\67\111\112\112\101\114",[56]="\124\67\70\70\70\70\70\70\48\48\32\71\97\118\101\58",[57]="\32\32\32\32\124\67\70\70\70\70\70\70\48\48",[58]="\103",[59]="\32\32\32\32",[60]="\124\67\70\70\70\70\70\70\48\48\32\82\101\99\101\105\118\101\100\58",[61]="\32\32\32\32\124\67\70\70\70\70\70\70\48\48",[62]="\103",[63]="\32\32\32\32",[64]="\112\108\97\121\101\114",[65]="\45",[66]="\37\89\45\37\109\45\37\100",[67]=10,[68]=1100,[69]=700,[70]="\68\97\119\110\32\84\114\97\100\101\32\76\111\103\32\86\105\101\119\101\114",[71]="\67\69\78\84\69\82",[72]="\67\69\78\84\69\82",[73]="\79\110\68\114\97\103\83\116\111\112",[74]="\66\79\84\84\79\77\82\73\71\72\84",[75]="\84\79\80\76\69\70\84",[76]=850,[77]=250,[78]="\79\110\77\111\117\115\101\68\111\119\110",[79]=32,[80]="\67\69\78\84\69\82",[81]="\82\73\71\72\84",[82]=16,[83]=5,[84]="\76\69\70\84",[85]=128,[86]="\67\108\101\97\114\32\76\111\103",[87]="\67\69\78\84\69\82",[88]="\79\110\67\108\105\99\107",[89]="\84\104\105\115\32\67\104\97\114\97\99\116\101\114",[90]="\65\108\108\32\77\97\105\108",[91]="\67\108\101\97\114\32\76\111\103",[92]="\83\101\108\101\99\116\32\108\111\103\32\116\111\32\99\108\101\97\114\46\32\84\104\101\115\101\32\97\99\116\105\111\110\115\32\67\65\78\78\79\84\32\66\69\32\82\69\86\69\82\83\69\68\46\32\66\111\116\104\32\115\101\110\116\32\97\110\100\32\114\101\99\101\105\118\101\100\32\109\97\105\108\32\119\105\108\108\32\98\101\32\100\101\108\101\116\101\100\46",[93]="\112\108\97\121\101\114",[94]="\45",[95]=400,[96]=30,[97]="\83\101\97\114\99\104",[98]="\73\110\116\101\114\102\97\99\101\92\67\111\109\109\111\110\92\85\73\45\83\101\97\114\99\104\98\111\120\45\73\99\111\110",[99]=80,[100]="\83\101\97\114\99\104",[101]=40,[102]="\76\69\70\84",[103]=420,[104]="\76\69\70\84",[105]="\79\110\69\110\116\101\114\80\114\101\115\115\101\100",[106]="\79\110\67\108\105\99\107",[107]="\65\108\108\32\99\104\97\114\97\99\116\101\114\115",[108]="\83\104\111\119\32\97\108\108\32\116\114\97\100\101\115\32\98\121\32\97\110\121\32\99\104\97\114\97\99\116\101\114\32\111\110\32\116\104\105\115\32\97\99\99\111\117\110\116\46",[109]="\116\111\111\108\116\105\112",[110]="\82\73\71\72\84",[111]="\79\110\108\121\32\115\104\111\119\32\116\111\100\97\121",[112]="\79\110\108\121\32\115\104\111\119\32\116\114\97\100\101\115\32\116\104\97\116\32\119\97\115\32\114\101\99\101\105\118\101\100\32\111\114\32\115\101\110\116\32\116\111\100\97\121\46",[113]="\116\111\111\108\116\105\112",[114]="\82\73\71\72\84",[115]="\68\97\116\101",[116]=225,[117]="\67\69\78\84\69\82",[118]="\100\97\116\101",[119]="\115\116\114\105\110\103",[120]="\97\115\99",[121]="\80\108\97\121\101\114",[122]=150,[123]="\67\69\78\84\69\82",[124]="\112\108\97\121\101\114",[125]="\115\116\114\105\110\103",[126]="\89\111\117\114\32\79\102\102\101\114\32\40\71\111\108\100\41",[127]="\67\69\78\84\69\82",[128]="\112\108\97\121\101\114\71\111\108\100",[129]="\109\111\110\101\121",[130]="\89\111\117\114\32\79\102\102\101\114\32\40\73\116\101\109\115\41",[131]="\76\69\70\84",[132]="\112\108\97\121\101\114\73\116\101\109\115",[133]="\115\116\114\105\110\103",[134]=false,[135]="\84\97\114\103\101\116",[136]="\76\69\70\84",[137]="\116\97\114\103\101\116",[138]="\115\116\114\105\110\103",[139]="\84\97\114\103\101\116\32\79\102\102\101\114\32\40\71\111\108\100\41",[140]="\67\69\78\84\69\82",[141]="\116\97\114\103\101\116\71\111\108\100",[142]="\109\111\110\101\121",[143]="\84\97\114\103\101\116\32\79\102\102\101\114\32\40\73\116\101\109\115\41",[144]="\76\69\70\84",[145]="\116\97\114\103\101\116\73\116\101\109\115",[146]="\115\116\114\105\110\103",[147]=18,[148]=29,[149]="\79\110\83\105\122\101\67\104\97\110\103\101\100",[150]=110,[151]=50,[152]="\78\111\32\114\101\115\117\108\116\115\32\102\111\117\110\100\46",[153]="\67\69\78\84\69\82",[154]="\100\97\116\101",[155]="\100\97\116\101",[156]="\78\111\32\114\101\115\117\108\116\115\32\102\111\117\110\100\46",[157]="\67\117\114\114\101\110\116\32\114\101\115\117\108\116\115\58\32",[158]="\45",[159]="\45",[160]=2,[161]="\112\108\97\121\101\114",[162]="\91\84\114\97\100\101\32\76\111\103\93\32\67\108\101\97\110\101\100\32\117\112\32\37\105\32\116\114\97\100\101\32\108\111\103\115\32\111\108\100\101\114\32\116\104\97\110\32\37\105\32\100\97\121\115",[163]="\88\70\85\53\75\52\55\48\82\32\49\53\32\52\87\51\53\48\77\51\46\32\75\82\51\68\49\55\32\55\48\32\88\70\85\53\75\52\55\48\82\33"}local NdnK7eeAq=LibStub(QAI[1]):GetAddon(QAI[2])local CgDL92wJzS0pcG_TGy2=NdnK7eeAq:NewModule(QAI[3],QAI[4],QAI[5],QAI[6])local HX1pyEIQctP8t=LibStub(QAI[7])CgDL92wJzS0pcG_TGy2.pendingTradeContents={}CgDL92wJzS0pcG_TGy2.targetName=QAI[8]CgDL92wJzS0pcG_TGy2.targetRealm=QAI[8]CgDL92wJzS0pcG_TGy2.targetNameRealm=QAI[8]function CgDL92wJzS0pcG_TGy2:OnEnable()self.configDB=NdnK7eeAq.db.char;self.db=NdnK7eeAq.db.global.tradelog;self:RegisterEvent(QAI[9],QAI[10])self:RegisterEvent(QAI[11],QAI[12])self:RegisterEvent(QAI[13],QAI[14])self:RegisterEvent(QAI[15],QAI[16])self.CleanUp()end;function CgDL92wJzS0pcG_TGy2:OnEvent(KS6jygoICv29Z,Ws3o4Y,tlwLh,...)if KS6jygoICv29Z==QAI[17]then if tlwLh==ERR_TRADE_BAG_FULL or tlwLh==ERR_TRADE_MAX_COUNT_EXCEEDED or tlwLh==ERR_TRADE_TARGET_BAG_FULL or tlwLh==ERR_TRADE_TARGET_MAX_COUNT_EXCEEDED then print(QAI[18]..CgDL92wJzS0pcG_TGy2.targetNameRealm..QAI[19]..tlwLh)CgDL92wJzS0pcG_TGy2:Finish()end elseif KS6jygoICv29Z==QAI[20]and(tlwLh==ERR_TRADE_CANCELLED or tlwLh==ERR_TRADE_COMPLETE)then if tlwLh==ERR_TRADE_CANCELLED and self.targetName then print(QAI[21]..CgDL92wJzS0pcG_TGy2.targetNameRealm..QAI[22])CgDL92wJzS0pcG_TGy2:Finish()else print(QAI[23]..CgDL92wJzS0pcG_TGy2.targetNameRealm..QAI[24])self.db[#self.db+QAI[25]]=self.pendingTradeContents;if NdnK7eeAq.db.global.whisperAfterTrade then if self.pendingTradeContents.playerGold>QAI[26]then C_ChatInfo.SendChatMessage(QAI[27]..CgDL92wJzS0pcG_TGy2:GetCoinText(self.pendingTradeContents.playerGold)..QAI[28]..self.pendingTradeContents.target..QAI[29],QAI[30],QAI[31],self.pendingTradeContents.target)elseif self.pendingTradeContents.targetGold>QAI[26]then C_ChatInfo.SendChatMessage(QAI[32]..CgDL92wJzS0pcG_TGy2:GetCoinText(self.pendingTradeContents.targetGold)..QAI[33]..self.pendingTradeContents.target..QAI[34],QAI[35],QAI[31],self.pendingTradeContents.target)end end;CgDL92wJzS0pcG_TGy2:PrintTradeContents()if self.tradelogWindow then C_Timer.After(QAI[25],function()CgDL92wJzS0pcG_TGy2:SearchTrades(self.tradelogWindow.searchBox:GetText())end)end;CgDL92wJzS0pcG_TGy2:Finish()end elseif KS6jygoICv29Z==QAI[36]then self.targetName,self.targetRealm=UnitName(QAI[37])if(self.targetRealm==QAI[31])then self.targetNameRealm=self.targetName else self.targetNameRealm=self.targetName..QAI[38]..self.targetRealm end elseif KS6jygoICv29Z==QAI[39]then local xcQcjDU_tcZQWkN_lKq=GetPlayerTradeMoney()local Htnyhizs_1YJyaDLmuAE=GetTargetTradeMoney()local T=QAI[8]local XytYsUeGDo02U5RUiQWx=QAI[8]for items=QAI[25],QAI[40]do local hnEi0sXWPZEYL,E,A5wILlq4lyy52,VH=GetTradePlayerItemInfo(items)if hnEi0sXWPZEYL then T=T..ITEM_QUALITY_COLORS[VH].hex..hnEi0sXWPZEYL..QAI[41]..A5wILlq4lyy52 ..QAI[42]end end;for items=QAI[25],QAI[40]do local pTIt9WzFVqLqq3y8BIAUh,pE4Yiim0O4v,z2_FworzPS07U,gCVHj=GetTradeTargetItemInfo(items)if pTIt9WzFVqLqq3y8BIAUh then XytYsUeGDo02U5RUiQWx=XytYsUeGDo02U5RUiQWx..ITEM_QUALITY_COLORS[gCVHj].hex..pTIt9WzFVqLqq3y8BIAUh..QAI[43]..z2_FworzPS07U..QAI[44]end end;self.pendingTradeContents={date=date(QAI[45]),player=CgDL92wJzS0pcG_TGy2:EnsureFullName(UnitName(QAI[46])),target=CgDL92wJzS0pcG_TGy2:EnsureFullName(self.targetNameRealm),playerGold=xcQcjDU_tcZQWkN_lKq,targetGold=Htnyhizs_1YJyaDLmuAE,playerItems=T,targetItems=XytYsUeGDo02U5RUiQWx}end end;local function BqCF6tTRa7S(Xr5U8rUEPZM0NTnw5JdDG)local P79qo=tostring(Xr5U8rUEPZM0NTnw5JdDG)while QAI[47]do P79qo,k=P79qo:gsub(QAI[48],QAI[49])if k==QAI[26]then break end end;return P79qo end;function CgDL92wJzS0pcG_TGy2:GetCoinText(SGSmf15bxqNJ)local VxU3HgaHDhU0JbD=floor(SGSmf15bxqNJ/QAI[50])local q05=floor(SGSmf15bxqNJ/QAI[51]%QAI[51])local uSve71MJV2SijX1V_Gj=SGSmf15bxqNJ%QAI[51]local _=VxU3HgaHDhU0JbD>=QAI[52]and BqCF6tTRa7S(VxU3HgaHDhU0JbD)or tostring(VxU3HgaHDhU0JbD)return(_..QAI[53]..q05 ..QAI[54]..uSve71MJV2SijX1V_Gj..QAI[55])end;function CgDL92wJzS0pcG_TGy2:PrintTradeContents()if self.pendingTradeContents then if self.pendingTradeContents.playerGold or self.pendingTradeContents.playerItems then print(QAI[56])if self.pendingTradeContents.playerGold and self.pendingTradeContents.playerGold>QAI[26]then print(QAI[57]..BqCF6tTRa7S(self.pendingTradeContents.playerGold/COPPER_PER_GOLD)..QAI[58])end;if self.pendingTradeContents.playerItems and self.pendingTradeContents.playerItems~=QAI[8]then print(QAI[59]..self.pendingTradeContents.playerItems)end end;if self.pendingTradeContents.targetGold or self.pendingTradeContents.targetItems then print(QAI[60])if self.pendingTradeContents.targetGold and self.pendingTradeContents.targetGold>QAI[26]then print(QAI[61]..BqCF6tTRa7S(self.pendingTradeContents.targetGold/COPPER_PER_GOLD)..QAI[62])end;if self.pendingTradeContents.targetItems and self.pendingTradeContents.targetItems~=QAI[8]then print(QAI[63]..self.pendingTradeContents.targetItems)end end end end;function CgDL92wJzS0pcG_TGy2:OpenPanel()if self.tradelogWindow==QAI[31]then self:DrawWindow()self:DrawSearchPane()self:DrawSearchResultsTable()self:SearchTrades(QAI[8])else self.tradelogWindow:Show()self:SearchTrades(QAI[8])end end;function CgDL92wJzS0pcG_TGy2:Toggle()if not self.tradelogWindow then CgDL92wJzS0pcG_TGy2:OpenPanel()elseif self.tradelogWindow:IsVisible()then self.tradelogWindow:Hide()else self.tradelogWindow:Show()end end;function CgDL92wJzS0pcG_TGy2:SearchTrades(pnlruNb7kGLlllJ)local C2k76ew=self.tradelogWindow;local K8khHUIxB6pHJ_FqrW_t=pnlruNb7kGLlllJ:lower()local IO1ccaPUiLhYbuE=self.db;local Fztqp6HVq6TvoASmmdA={}local Au,PoUdRn5mbP_FKbfzSID=UnitFullName(QAI[64])local DHFUpqz804S47apgj=Au..QAI[65]..PoUdRn5mbP_FKbfzSID;local vyoWD_Xl=C2k76ew.allCharactersToggle:GetChecked()local EzX=C2k76ew.todayToggle:GetChecked()local ObqF3_N9ykUYZulAVk6z=date(QAI[66])for jTB8E2jEwngzOVgGh,nztk8kCAPJ1uIBFKs2 in pairs(IO1ccaPUiLhYbuE)do if(vyoWD_Xl or(nztk8kCAPJ1uIBFKs2.player and nztk8kCAPJ1uIBFKs2.player:lower():find(DHFUpqz804S47apgj:lower(),QAI[25],QAI[47]))~=QAI[31])and(nztk8kCAPJ1uIBFKs2.date and(not EzX or string.sub(nztk8kCAPJ1uIBFKs2.date,QAI[25],QAI[67])==ObqF3_N9ykUYZulAVk6z))and(nztk8kCAPJ1uIBFKs2.playerGold and tostring(floor(nztk8kCAPJ1uIBFKs2.playerGold/COPPER_PER_GOLD)):find(K8khHUIxB6pHJ_FqrW_t,QAI[25],QAI[47])or nztk8kCAPJ1uIBFKs2.targetGold and tostring(floor(nztk8kCAPJ1uIBFKs2.targetGold/COPPER_PER_GOLD)):find(K8khHUIxB6pHJ_FqrW_t,QAI[25],QAI[47])or nztk8kCAPJ1uIBFKs2.target and nztk8kCAPJ1uIBFKs2.target:lower():find(K8khHUIxB6pHJ_FqrW_t,QAI[25],QAI[47])or nztk8kCAPJ1uIBFKs2.playerItems and nztk8kCAPJ1uIBFKs2.playerItems:lower():find(K8khHUIxB6pHJ_FqrW_t,QAI[25],QAI[47])or nztk8kCAPJ1uIBFKs2.targetItems and nztk8kCAPJ1uIBFKs2.targetItems:lower():find(K8khHUIxB6pHJ_FqrW_t,QAI[25],QAI[47]))then table.insert(Fztqp6HVq6TvoASmmdA,nztk8kCAPJ1uIBFKs2)end end;CgDL92wJzS0pcG_TGy2:ApplyDefaultSort(Fztqp6HVq6TvoASmmdA)self.currentView=Fztqp6HVq6TvoASmmdA;self.tradelogWindow.searchResults:SetData(self.currentView,QAI[47])CgDL92wJzS0pcG_TGy2:UpdateStateText()CgDL92wJzS0pcG_TGy2:UpdateResultsText()end;function CgDL92wJzS0pcG_TGy2:DrawWindow()local cFDBbX7SDL=HX1pyEIQctP8t:Window(UIParent,QAI[68],QAI[69],QAI[70])cFDBbX7SDL:SetPoint(QAI[71],UIParent,QAI[72],QAI[26],QAI[26])cFDBbX7SDL:SetScript(QAI[73],function(ITZcA)ITZcA:StopMovingOrSizing()end)HX1pyEIQctP8t:MakeResizable(cFDBbX7SDL,QAI[74])HX1pyEIQctP8t:MakeResizable(cFDBbX7SDL,QAI[75])cFDBbX7SDL:SetResizeBounds(QAI[76],QAI[77])cFDBbX7SDL:SetFrameLevel(NdnK7eeAq:GetNextFrameLevel())cFDBbX7SDL:SetScript(QAI[78],function(VH_s_W6MY9H)VH_s_W6MY9H:SetFrameLevel(NdnK7eeAq:GetNextFrameLevel())end)local T_pFOUvRa3=HX1pyEIQctP8t:Frame(cFDBbX7SDL,QAI[79],QAI[79])local tHX0NPWHwM0=HX1pyEIQctP8t:Texture(T_pFOUvRa3,QAI[79],QAI[79],NdnK7eeAq.LogoPath)HX1pyEIQctP8t:GlueTop(tHX0NPWHwM0,T_pFOUvRa3,QAI[26],QAI[26],QAI[80])HX1pyEIQctP8t:GlueBottom(T_pFOUvRa3,cFDBbX7SDL,-QAI[67],QAI[67],QAI[81])cFDBbX7SDL.resultsLabel=HX1pyEIQctP8t:Label(cFDBbX7SDL,QAI[31],QAI[82])HX1pyEIQctP8t:GlueBottom(cFDBbX7SDL.resultsLabel,cFDBbX7SDL,QAI[67],QAI[83],QAI[84])local mR2hpCWHtMT=HX1pyEIQctP8t:Button(cFDBbX7SDL,QAI[85],QAI[82],QAI[86])HX1pyEIQctP8t:GlueBottom(mR2hpCWHtMT,cFDBbX7SDL,QAI[26],QAI[67],QAI[87])mR2hpCWHtMT:SetScript(QAI[88],function()CgDL92wJzS0pcG_TGy2:DrawClearWarningWindow()end)self.tradelogWindow=cFDBbX7SDL end;function CgDL92wJzS0pcG_TGy2:DrawClearWarningWindow()local UJWl={character={text=QAI[89],onClick=function(EAQbndWSVl2brl_Lb)CgDL92wJzS0pcG_TGy2:ClearMailForCharacter()EAQbndWSVl2brl_Lb.window:Hide()end},all={text=QAI[90],onClick=function(ktFL)CgDL92wJzS0pcG_TGy2:ClearAllMail()ktFL.window:Hide()end}}HX1pyEIQctP8t:Confirm(QAI[91],QAI[92],UJWl,QAI[25])end;function CgDL92wJzS0pcG_TGy2:ClearMailForCharacter()local Luoktb9ovxWdVh,QEb6I9zYm_=UnitFullName(QAI[93])local tljm6=Luoktb9ovxWdVh..QAI[94]..QEb6I9zYm_;for zCSeBya,YXRmukRX8cwwZhhbSb in pairs(NdnK7eeAq.db.global.tradelog)do if YXRmukRX8cwwZhhbSb.source==tljm6 or YXRmukRX8cwwZhhbSb.destination==tljm6 then NdnK7eeAq.db.global.tradelog[zCSeBya]=QAI[31]end end;if(self.tradelogWindow)then CgDL92wJzS0pcG_TGy2:SearchTrades(self.tradelogWindow.searchBox:GetText())end end;function CgDL92wJzS0pcG_TGy2:ClearAllMail()for YwNrVUdaXPhv5tT1795r1,o8rEpZsxV in pairs(NdnK7eeAq.db.global.tradelog)do NdnK7eeAq.db.global.tradelog[YwNrVUdaXPhv5tT1795r1]=QAI[31]end;if(self.tradelogWindow)then CgDL92wJzS0pcG_TGy2:SearchTrades(self.tradelogWindow.searchBox:GetText())end end;function CgDL92wJzS0pcG_TGy2:DrawSearchPane()local fUcfvqoZ3=self.tradelogWindow;local TmSVCjjZEUzGgR5=HX1pyEIQctP8t:Autocomplete(fUcfvqoZ3,QAI[95],QAI[96],QAI[8],QAI[31],QAI[31],QAI[31])HX1pyEIQctP8t:ApplyPlaceholder(TmSVCjjZEUzGgR5,QAI[97],QAI[98])TmSVCjjZEUzGgR5:SetFontSize(QAI[82])local XN8V=HX1pyEIQctP8t:Button(fUcfvqoZ3,QAI[99],QAI[96],QAI[100])HX1pyEIQctP8t:GlueTop(TmSVCjjZEUzGgR5,fUcfvqoZ3,QAI[67],-QAI[101],QAI[102])HX1pyEIQctP8t:GlueTop(XN8V,fUcfvqoZ3,QAI[103],-QAI[101],QAI[104])TmSVCjjZEUzGgR5:SetScript(QAI[105],function()CgDL92wJzS0pcG_TGy2:SearchTrades(TmSVCjjZEUzGgR5:GetText())end)XN8V:SetScript(QAI[106],function()CgDL92wJzS0pcG_TGy2:SearchTrades(TmSVCjjZEUzGgR5:GetText())end)local Q5dQwlT=HX1pyEIQctP8t:Checkbox(fUcfvqoZ3,QAI[107])HX1pyEIQctP8t:GlueRight(Q5dQwlT,XN8V,QAI[67],QAI[26])Q5dQwlT.OnValueChanged=function(BChL9u0G0yqG6,SpGFeNjSYD0d)CgDL92wJzS0pcG_TGy2:SearchTrades(TmSVCjjZEUzGgR5:GetText())end;local g_ZizftFHqWz9ADP2t=HX1pyEIQctP8t:FrameTooltip(Q5dQwlT,QAI[108],QAI[109],QAI[110],QAI[47])local BKgZKBjTp2=HX1pyEIQctP8t:Checkbox(fUcfvqoZ3,QAI[111])HX1pyEIQctP8t:GlueRight(BKgZKBjTp2,Q5dQwlT,QAI[67],QAI[26])BKgZKBjTp2.OnValueChanged=function(H1cYPncJ8,vAS)CgDL92wJzS0pcG_TGy2:SearchTrades(TmSVCjjZEUzGgR5:GetText())end;local s3_43F=HX1pyEIQctP8t:FrameTooltip(BKgZKBjTp2,QAI[112],QAI[113],QAI[114],QAI[47])fUcfvqoZ3.allCharactersToggle=Q5dQwlT;fUcfvqoZ3.todayToggle=BKgZKBjTp2;fUcfvqoZ3.searchBox=TmSVCjjZEUzGgR5;fUcfvqoZ3.searchButton=XN8V end;function CgDL92wJzS0pcG_TGy2:DrawSearchResultsTable()local qsfWjW8mOl=self.tradelogWindow;local function Zc(d,GedV9ooQHrYLE,uLkmX42)if GedV9ooQHrYLE and uLkmX42 ~=QAI[31]then GameTooltip:SetOwner(d)GameTooltip:SetText(uLkmX42)else GameTooltip:Hide()end end;local qDZIMtmmPj0oI5W1Zy={{name=QAI[115],width=QAI[116],align=QAI[117],index=QAI[118],format=QAI[119],defaultSort=QAI[120]},{name=QAI[121],width=QAI[122],align=QAI[123],index=QAI[124],format=QAI[125]},{name=QAI[126],width=QAI[122],align=QAI[127],index=QAI[128],format=QAI[129]},{name=QAI[130],width=QAI[122],align=QAI[131],index=QAI[132],format=QAI[133],events={OnEnter=function(hHsN4GBsA4qtin2X8,i5XZhq,eYrmW,n7,eFexEdb0eX9tUxJGepWxg,Q6mXnLm)local V_pe0v4aGfouhv4rgyT=n7[eFexEdb0eX9tUxJGepWxg.index]if n7.playerItems then Zc(i5XZhq,QAI[47],n7.playerItems)end;return QAI[47]end,OnLeave=function(dkLQ55,kEg5xOlG8Dq7PfffyMP)Zc(kEg5xOlG8Dq7PfffyMP,QAI[134])return QAI[47]end}},{name=QAI[135],width=QAI[51],align=QAI[136],index=QAI[137],format=QAI[138]},{name=QAI[139],width=QAI[51],align=QAI[140],index=QAI[141],format=QAI[142]},{name=QAI[143],width=QAI[122],align=QAI[144],index=QAI[145],format=QAI[146],events={OnEnter=function(mYaw6BEKiVHzpl,OKI7m,N7,iWechyZpdC14PEq3Q,q_fvYHc8aDh7xWb,EmA)local Xr=iWechyZpdC14PEq3Q[q_fvYHc8aDh7xWb.index]if iWechyZpdC14PEq3Q.targetItems then Zc(OKI7m,QAI[47],iWechyZpdC14PEq3Q.targetItems)end;return QAI[47]end,OnLeave=function(ei1lPF3C7fEBG_EJjXHQ,JfaFC4KmB)Zc(JfaFC4KmB,QAI[134])return QAI[47]end}}}qsfWjW8mOl.searchResults=HX1pyEIQctP8t:ScrollTable(qsfWjW8mOl,qDZIMtmmPj0oI5W1Zy,QAI[147],QAI[148])qsfWjW8mOl.searchResults:EnableSelection(QAI[47])qsfWjW8mOl.searchResults:SetScript(QAI[149],function(_HRdH6TjnYG)local V_7DCv45UEkhlmkWW_=_HRdH6TjnYG:GetWidth()local XCXX1E1b5UIUWRbPm27DO=_HRdH6TjnYG:GetHeight()local FHoc64=QAI[26]for k=QAI[25],#_HRdH6TjnYG.columns do FHoc64=FHoc64 +_HRdH6TjnYG.columns[k].width end;for k=QAI[25],#_HRdH6TjnYG.columns do _HRdH6TjnYG.columns[k]:SetWidth(_HRdH6TjnYG.columns[k].width/FHoc64 * (V_7DCv45UEkhlmkWW_-QAI[96]))end;_HRdH6TjnYG:SetDisplayRows(math.floor(XCXX1E1b5UIUWRbPm27DO/_HRdH6TjnYG.rowHeight),_HRdH6TjnYG.rowHeight)end)HX1pyEIQctP8t:GlueAcross(qsfWjW8mOl.searchResults,qsfWjW8mOl,QAI[67],-QAI[150],-QAI[67],QAI[151])qsfWjW8mOl.stateLabel=HX1pyEIQctP8t:Label(qsfWjW8mOl.searchResults,QAI[152])HX1pyEIQctP8t:GlueTop(qsfWjW8mOl.stateLabel,qsfWjW8mOl.searchResults,QAI[26],-QAI[101],QAI[153])end;function CgDL92wJzS0pcG_TGy2:ApplyDefaultSort(Jcq_IY7mn)if(self.tradelogWindow.searchResults.head.columns)then local pAZ8s89=QAI[134]for eoDNf6c,XoTN82JD in pairs(self.tradelogWindow.searchResults.head.columns)do if(XoTN82JD.arrow:IsVisible())then pAZ8s89=QAI[47]end end;if(not pAZ8s89)then return table.sort(Jcq_IY7mn,function(xBSSULwvL,nQBqmqoRS)return xBSSULwvL[QAI[154]]>nQBqmqoRS[QAI[155]]end)end end;return Jcq_IY7mn end;function CgDL92wJzS0pcG_TGy2:UpdateStateText()if(#self.currentView>QAI[26])then self.tradelogWindow.stateLabel:Hide()else self.tradelogWindow.stateLabel:SetText(QAI[156])end end;function CgDL92wJzS0pcG_TGy2:UpdateResultsText()if(#self.currentView>QAI[26])then self.tradelogWindow.resultsLabel:SetText(QAI[157]..tostring(#self.currentView))self.tradelogWindow.resultsLabel:Show()else self.tradelogWindow.resultsLabel:Hide()end end;function CgDL92wJzS0pcG_TGy2:EnsureFullName(KnYPCa)if not KnYPCa:find(QAI[158])then KnYPCa=KnYPCa..QAI[159]..select(QAI[160],UnitFullName(QAI[161]))end;return KnYPCa end;function CgDL92wJzS0pcG_TGy2:Finish()self.pendingTradeContents={}self.targetName=QAI[8]self.targetRealm=QAI[8]self.targetNameRealm=QAI[8]end;function CgDL92wJzS0pcG_TGy2:CleanUp()local a2q=NdnK7eeAq.db.global.tradelog;local WDEY5HUtq=QAI[26]local h4cwPfaipA8JtC8OZfrr=NdnK7eeAq.db.global.logCleanupDays;for rzPr0zb_w,llbKXnBtxL7 in pairs(a2q)do local bnNJf2Th5LbbcM6mV4PPE=NdnK7eeAq.helperFunctions:IsOlderThanDays(llbKXnBtxL7.date,h4cwPfaipA8JtC8OZfrr)if bnNJf2Th5LbbcM6mV4PPE==QAI[47]then WDEY5HUtq=WDEY5HUtq+QAI[25]a2q[rzPr0zb_w]=QAI[31]end end;if WDEY5HUtq>QAI[26]then NdnK7eeAq:Printf(QAI[162],WDEY5HUtq,h4cwPfaipA8JtC8OZfrr)end end