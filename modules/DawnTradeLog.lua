local I3KBWKKGGQ3lE={[1]="\65\99\101\65\100\100\111\110\45\51\46\48",[2]="\68\97\119\110\84\111\111\108\115",[3]="\68\97\119\110\84\114\97\100\101\76\111\103",[4]="\65\99\101\69\118\101\110\116\45\51\46\48",[5]="\65\99\101\72\111\111\107\45\51\46\48",[6]="\65\99\101\67\111\110\115\111\108\101\45\51\46\48",[7]="\83\116\100\85\105",[8]="",[9]="\84\82\65\68\69\95\65\67\67\69\80\84\95\85\80\68\65\84\69",[10]="\79\110\69\118\101\110\116",[11]="\85\73\95\73\78\70\79\95\77\69\83\83\65\71\69",[12]="\79\110\69\118\101\110\116",[13]="\85\73\95\69\82\82\79\82\95\77\69\83\83\65\71\69",[14]="\79\110\69\118\101\110\116",[15]="\84\82\65\68\69\95\83\72\79\87",[16]="\79\110\69\118\101\110\116",[17]="\85\73\95\69\82\82\79\82\95\77\69\83\83\65\71\69",[18]="\124\67\70\70\70\70\48\48\48\48\91\68\97\119\110\84\114\97\100\101\76\111\103\93\58\32\84\114\97\100\101\32\119\105\116\104\32",[19]="\32\119\97\115\32\99\97\110\99\101\108\108\101\100\58\32",[20]="\85\73\95\73\78\70\79\95\77\69\83\83\65\71\69",[21]="\124\67\70\70\70\70\48\48\48\48\91\68\97\119\110\84\114\97\100\101\76\111\103\93\58\32\84\114\97\100\101\32\119\105\116\104\32",[22]="\32\119\97\115\32\99\97\110\99\101\108\108\101\100\46",[23]="\124\67\70\70\48\48\70\70\48\48\91\68\97\119\110\84\114\97\100\101\76\111\103\93\58\32\84\114\97\100\101\32\119\105\116\104\32",[24]="\32\119\97\115\32\115\117\99\99\101\115\115\102\117\108\46",[25]=1,[26]=0,[27]="\71\97\118\101\32",[28]="\32\116\111\32",[29]="\32\105\110\32\97\32\116\114\97\100\101\46",[30]="\87\72\73\83\80\69\82",[31]=nil,[32]="\82\101\99\101\105\118\101\100\32",[33]="\32\102\114\111\109\32",[34]="\32\105\110\32\97\32\116\114\97\100\101\46",[35]="\87\72\73\83\80\69\82",[36]="\84\82\65\68\69\95\83\72\79\87",[37]="\78\80\67",[38]="\45",[39]="\84\82\65\68\69\95\65\67\67\69\80\84\95\85\80\68\65\84\69",[40]=6,[41]="\124\114\32\120\32",[42]="\124\110",[43]="\124\114\32\120\32",[44]="\124\110",[45]="\33\37\89\45\37\109\45\37\100\32\37\88\32\40\37\65\41",[46]="\112\108\97\121\101\114",[47]=true,[48]="\94\40\45\63\37\100\43\41\40\37\100\37\100\37\100\41",[49]="\37\49\44\37\50",[50]=10000,[51]=100,[52]=1000,[53]="\32\71\111\108\100\32",[54]="\32\83\105\108\118\101\114\32",[55]="\32\67\111\112\112\101\114",[56]="\124\67\70\70\70\70\70\70\48\48\32\71\97\118\101\58",[57]="\32\32\32\32\124\67\70\70\70\70\70\70\48\48",[58]="\103",[59]="\32\32\32\32",[60]="\124\67\70\70\70\70\70\70\48\48\32\82\101\99\101\105\118\101\100\58",[61]="\32\32\32\32\124\67\70\70\70\70\70\70\48\48",[62]="\103",[63]="\32\32\32\32",[64]="\112\108\97\121\101\114",[65]="\45",[66]="\33\37\89\45\37\109\45\37\100",[67]=10,[68]=1100,[69]=700,[70]="\68\97\119\110\32\84\114\97\100\101\32\76\111\103\32\86\105\101\119\101\114",[71]="\67\69\78\84\69\82",[72]="\67\69\78\84\69\82",[73]="\79\110\68\114\97\103\83\116\111\112",[74]="\66\79\84\84\79\77\82\73\71\72\84",[75]="\84\79\80\76\69\70\84",[76]=850,[77]=250,[78]="\79\110\77\111\117\115\101\68\111\119\110",[79]=32,[80]="\67\69\78\84\69\82",[81]="\82\73\71\72\84",[82]=16,[83]=5,[84]="\76\69\70\84",[85]=128,[86]="\67\108\101\97\114\32\76\111\103",[87]="\67\69\78\84\69\82",[88]="\79\110\67\108\105\99\107",[89]="\84\104\105\115\32\67\104\97\114\97\99\116\101\114",[90]="\65\108\108\32\77\97\105\108",[91]="\67\108\101\97\114\32\76\111\103",[92]="\83\101\108\101\99\116\32\108\111\103\32\116\111\32\99\108\101\97\114\46\32\84\104\101\115\101\32\97\99\116\105\111\110\115\32\67\65\78\78\79\84\32\66\69\32\82\69\86\69\82\83\69\68\46\32\66\111\116\104\32\115\101\110\116\32\97\110\100\32\114\101\99\101\105\118\101\100\32\109\97\105\108\32\119\105\108\108\32\98\101\32\100\101\108\101\116\101\100\46",[93]="\112\108\97\121\101\114",[94]="\45",[95]=400,[96]=30,[97]="\83\101\97\114\99\104",[98]="\73\110\116\101\114\102\97\99\101\92\67\111\109\109\111\110\92\85\73\45\83\101\97\114\99\104\98\111\120\45\73\99\111\110",[99]=80,[100]="\83\101\97\114\99\104",[101]=40,[102]="\76\69\70\84",[103]=420,[104]="\76\69\70\84",[105]="\79\110\69\110\116\101\114\80\114\101\115\115\101\100",[106]="\79\110\67\108\105\99\107",[107]="\65\108\108\32\99\104\97\114\97\99\116\101\114\115",[108]="\83\104\111\119\32\97\108\108\32\116\114\97\100\101\115\32\98\121\32\97\110\121\32\99\104\97\114\97\99\116\101\114\32\111\110\32\116\104\105\115\32\97\99\99\111\117\110\116\46",[109]="\116\111\111\108\116\105\112",[110]="\82\73\71\72\84",[111]="\79\110\108\121\32\115\104\111\119\32\116\111\100\97\121",[112]="\79\110\108\121\32\115\104\111\119\32\116\114\97\100\101\115\32\116\104\97\116\32\119\97\115\32\114\101\99\101\105\118\101\100\32\111\114\32\115\101\110\116\32\116\111\100\97\121\46",[113]="\116\111\111\108\116\105\112",[114]="\82\73\71\72\84",[115]="\68\97\116\101",[116]="\67\69\78\84\69\82",[117]="\100\97\116\101",[118]="\32\85\84\67",[119]="\97\115\99",[120]="\80\108\97\121\101\114",[121]=150,[122]="\67\69\78\84\69\82",[123]="\112\108\97\121\101\114",[124]="\115\116\114\105\110\103",[125]="\89\111\117\114\32\79\102\102\101\114\32\40\71\111\108\100\41",[126]="\67\69\78\84\69\82",[127]="\112\108\97\121\101\114\71\111\108\100",[128]="\109\111\110\101\121",[129]="\89\111\117\114\32\79\102\102\101\114\32\40\73\116\101\109\115\41",[130]="\76\69\70\84",[131]="\112\108\97\121\101\114\73\116\101\109\115",[132]="\115\116\114\105\110\103",[133]=false,[134]="\84\97\114\103\101\116",[135]="\76\69\70\84",[136]="\116\97\114\103\101\116",[137]="\115\116\114\105\110\103",[138]="\84\97\114\103\101\116\32\79\102\102\101\114\32\40\71\111\108\100\41",[139]="\67\69\78\84\69\82",[140]="\116\97\114\103\101\116\71\111\108\100",[141]="\109\111\110\101\121",[142]="\84\97\114\103\101\116\32\79\102\102\101\114\32\40\73\116\101\109\115\41",[143]="\76\69\70\84",[144]="\116\97\114\103\101\116\73\116\101\109\115",[145]="\115\116\114\105\110\103",[146]=18,[147]=29,[148]="\79\110\83\105\122\101\67\104\97\110\103\101\100",[149]=110,[150]=50,[151]="\78\111\32\114\101\115\117\108\116\115\32\102\111\117\110\100\46",[152]="\67\69\78\84\69\82",[153]="\100\97\116\101",[154]="\100\97\116\101",[155]="\78\111\32\114\101\115\117\108\116\115\32\102\111\117\110\100\46",[156]="\67\117\114\114\101\110\116\32\114\101\115\117\108\116\115\58\32",[157]="\45",[158]="\45",[159]=2,[160]="\112\108\97\121\101\114",[161]="\91\84\114\97\100\101\32\76\111\103\93\32\67\108\101\97\110\101\100\32\117\112\32\37\105\32\116\114\97\100\101\32\108\111\103\115\32\111\108\100\101\114\32\116\104\97\110\32\37\105\32\100\97\121\115",[162]="\88\70\85\53\75\52\55\48\82\32\49\53\32\52\87\51\53\48\77\51\46\32\75\82\51\68\49\55\32\55\48\32\88\70\85\53\75\52\55\48\82\33"}local E2q8RF0=LibStub(I3KBWKKGGQ3lE[1]):GetAddon(I3KBWKKGGQ3lE[2])local LC7uD=E2q8RF0:NewModule(I3KBWKKGGQ3lE[3],I3KBWKKGGQ3lE[4],I3KBWKKGGQ3lE[5],I3KBWKKGGQ3lE[6])local klxEBdJXSwxCtVuD6JX=LibStub(I3KBWKKGGQ3lE[7])LC7uD.pendingTradeContents={}LC7uD.targetName=I3KBWKKGGQ3lE[8]LC7uD.targetRealm=I3KBWKKGGQ3lE[8]LC7uD.targetNameRealm=I3KBWKKGGQ3lE[8]function LC7uD:OnEnable()self.configDB=E2q8RF0.db.char;self.db=E2q8RF0.db.global.tradelog;self:RegisterEvent(I3KBWKKGGQ3lE[9],I3KBWKKGGQ3lE[10])self:RegisterEvent(I3KBWKKGGQ3lE[11],I3KBWKKGGQ3lE[12])self:RegisterEvent(I3KBWKKGGQ3lE[13],I3KBWKKGGQ3lE[14])self:RegisterEvent(I3KBWKKGGQ3lE[15],I3KBWKKGGQ3lE[16])self.CleanUp()end;function LC7uD:OnEvent(bBxLPHsq,bmPnshUUxx1UNt4wR,m,...)if bBxLPHsq==I3KBWKKGGQ3lE[17]then if m==ERR_TRADE_BAG_FULL or m==ERR_TRADE_MAX_COUNT_EXCEEDED or m==ERR_TRADE_TARGET_BAG_FULL or m==ERR_TRADE_TARGET_MAX_COUNT_EXCEEDED then print(I3KBWKKGGQ3lE[18]..LC7uD.targetNameRealm..I3KBWKKGGQ3lE[19]..m)LC7uD:Finish()end elseif bBxLPHsq==I3KBWKKGGQ3lE[20]and(m==ERR_TRADE_CANCELLED or m==ERR_TRADE_COMPLETE)then if m==ERR_TRADE_CANCELLED and self.targetName then print(I3KBWKKGGQ3lE[21]..LC7uD.targetNameRealm..I3KBWKKGGQ3lE[22])LC7uD:Finish()else print(I3KBWKKGGQ3lE[23]..LC7uD.targetNameRealm..I3KBWKKGGQ3lE[24])self.db[#self.db+I3KBWKKGGQ3lE[25]]=self.pendingTradeContents;if E2q8RF0.db.global.whisperAfterTrade then if self.pendingTradeContents.playerGold>I3KBWKKGGQ3lE[26]then C_ChatInfo.SendChatMessage(I3KBWKKGGQ3lE[27]..LC7uD:GetCoinText(self.pendingTradeContents.playerGold)..I3KBWKKGGQ3lE[28]..self.pendingTradeContents.target..I3KBWKKGGQ3lE[29],I3KBWKKGGQ3lE[30],I3KBWKKGGQ3lE[31],self.pendingTradeContents.target)elseif self.pendingTradeContents.targetGold>I3KBWKKGGQ3lE[26]then C_ChatInfo.SendChatMessage(I3KBWKKGGQ3lE[32]..LC7uD:GetCoinText(self.pendingTradeContents.targetGold)..I3KBWKKGGQ3lE[33]..self.pendingTradeContents.target..I3KBWKKGGQ3lE[34],I3KBWKKGGQ3lE[35],I3KBWKKGGQ3lE[31],self.pendingTradeContents.target)end end;LC7uD:PrintTradeContents()if self.tradelogWindow then C_Timer.After(I3KBWKKGGQ3lE[25],function()LC7uD:SearchTrades(self.tradelogWindow.searchBox:GetText())end)end;LC7uD:Finish()end elseif bBxLPHsq==I3KBWKKGGQ3lE[36]then self.targetName,self.targetRealm=UnitName(I3KBWKKGGQ3lE[37])if(self.targetRealm==I3KBWKKGGQ3lE[31])then self.targetNameRealm=self.targetName else self.targetNameRealm=self.targetName..I3KBWKKGGQ3lE[38]..self.targetRealm end elseif bBxLPHsq==I3KBWKKGGQ3lE[39]then local vilvU0MCek=GetPlayerTradeMoney()local q3Uy7d1QjgZaUO1t=GetTargetTradeMoney()local INJMJl=I3KBWKKGGQ3lE[8]local WKYhLOnz9Aqdz=I3KBWKKGGQ3lE[8]for items=I3KBWKKGGQ3lE[25],I3KBWKKGGQ3lE[40]do local JpU3EZR,X6Gq248I1mq,XFrP3gHQTEZM_uu,aVY=GetTradePlayerItemInfo(items)if JpU3EZR then INJMJl=INJMJl..ITEM_QUALITY_COLORS[aVY].hex..JpU3EZR..I3KBWKKGGQ3lE[41]..XFrP3gHQTEZM_uu..I3KBWKKGGQ3lE[42]end end;for items=I3KBWKKGGQ3lE[25],I3KBWKKGGQ3lE[40]do local YrGIzH1Nq7phuCho,b0CN,x6b,RibyowwvrsKpd=GetTradeTargetItemInfo(items)if YrGIzH1Nq7phuCho then WKYhLOnz9Aqdz=WKYhLOnz9Aqdz..ITEM_QUALITY_COLORS[RibyowwvrsKpd].hex..YrGIzH1Nq7phuCho..I3KBWKKGGQ3lE[43]..x6b..I3KBWKKGGQ3lE[44]end end;self.pendingTradeContents={date=date(I3KBWKKGGQ3lE[45],GetServerTime()),player=LC7uD:EnsureFullName(UnitName(I3KBWKKGGQ3lE[46])),target=LC7uD:EnsureFullName(self.targetNameRealm),playerGold=vilvU0MCek,targetGold=q3Uy7d1QjgZaUO1t,playerItems=INJMJl,targetItems=WKYhLOnz9Aqdz}end end;local function tBvXvrrI(icA2JTcojdqmxB1QTv4h)local DUgW2E=tostring(icA2JTcojdqmxB1QTv4h)while I3KBWKKGGQ3lE[47]do DUgW2E,k=DUgW2E:gsub(I3KBWKKGGQ3lE[48],I3KBWKKGGQ3lE[49])if k==I3KBWKKGGQ3lE[26]then break end end;return DUgW2E end;function LC7uD:GetCoinText(T7JoyWPldMPuE5iarky5)local TswvYsAqFm5Re=floor(T7JoyWPldMPuE5iarky5 /I3KBWKKGGQ3lE[50])local h28G6pGM77ET9EoVRb9Y7=floor(T7JoyWPldMPuE5iarky5 /I3KBWKKGGQ3lE[51]%I3KBWKKGGQ3lE[51])local puhYsee=T7JoyWPldMPuE5iarky5 %I3KBWKKGGQ3lE[51]local Y=TswvYsAqFm5Re>=I3KBWKKGGQ3lE[52]and tBvXvrrI(TswvYsAqFm5Re)or tostring(TswvYsAqFm5Re)return(Y..I3KBWKKGGQ3lE[53]..h28G6pGM77ET9EoVRb9Y7 ..I3KBWKKGGQ3lE[54]..puhYsee..I3KBWKKGGQ3lE[55])end;function LC7uD:PrintTradeContents()if self.pendingTradeContents then if self.pendingTradeContents.playerGold or self.pendingTradeContents.playerItems then print(I3KBWKKGGQ3lE[56])if self.pendingTradeContents.playerGold and self.pendingTradeContents.playerGold>I3KBWKKGGQ3lE[26]then print(I3KBWKKGGQ3lE[57]..tBvXvrrI(self.pendingTradeContents.playerGold/COPPER_PER_GOLD)..I3KBWKKGGQ3lE[58])end;if self.pendingTradeContents.playerItems and self.pendingTradeContents.playerItems~=I3KBWKKGGQ3lE[8]then print(I3KBWKKGGQ3lE[59]..self.pendingTradeContents.playerItems)end end;if self.pendingTradeContents.targetGold or self.pendingTradeContents.targetItems then print(I3KBWKKGGQ3lE[60])if self.pendingTradeContents.targetGold and self.pendingTradeContents.targetGold>I3KBWKKGGQ3lE[26]then print(I3KBWKKGGQ3lE[61]..tBvXvrrI(self.pendingTradeContents.targetGold/COPPER_PER_GOLD)..I3KBWKKGGQ3lE[62])end;if self.pendingTradeContents.targetItems and self.pendingTradeContents.targetItems~=I3KBWKKGGQ3lE[8]then print(I3KBWKKGGQ3lE[63]..self.pendingTradeContents.targetItems)end end end end;function LC7uD:OpenPanel()if self.tradelogWindow==I3KBWKKGGQ3lE[31]then self:DrawWindow()self:DrawSearchPane()self:DrawSearchResultsTable()self:SearchTrades(I3KBWKKGGQ3lE[8])else self.tradelogWindow:Show()self:SearchTrades(I3KBWKKGGQ3lE[8])end end;function LC7uD:Toggle()if not self.tradelogWindow then LC7uD:OpenPanel()elseif self.tradelogWindow:IsVisible()then self.tradelogWindow:Hide()else self.tradelogWindow:Show()end end;function LC7uD:SearchTrades(eGO1axCBopjjF3O8Rsg7)local sAYcQo=self.tradelogWindow;local CoyCkCoZqReSIh=eGO1axCBopjjF3O8Rsg7:lower()local udtPPgv_7X=self.db;local bDezr3E3dOKtjjPBPK={}local oqcJVZEzjP,MTN3nKo44=UnitFullName(I3KBWKKGGQ3lE[64])local uAet=oqcJVZEzjP..I3KBWKKGGQ3lE[65]..MTN3nKo44;local Uah9CLm_BlEHEC=sAYcQo.allCharactersToggle:GetChecked()local GbzUvyQJJGOXl=sAYcQo.todayToggle:GetChecked()local _fL5yxXVVIQQnIem=date(I3KBWKKGGQ3lE[66],GetServerTime())for jk1tt3dr,fwKjNN04c4g in pairs(udtPPgv_7X)do if(Uah9CLm_BlEHEC or(fwKjNN04c4g.player and fwKjNN04c4g.player:lower():find(uAet:lower(),I3KBWKKGGQ3lE[25],I3KBWKKGGQ3lE[47]))~=I3KBWKKGGQ3lE[31])and(fwKjNN04c4g.date and(not GbzUvyQJJGOXl or string.sub(fwKjNN04c4g.date,I3KBWKKGGQ3lE[25],I3KBWKKGGQ3lE[67])==_fL5yxXVVIQQnIem))and(fwKjNN04c4g.playerGold and tostring(floor(fwKjNN04c4g.playerGold/COPPER_PER_GOLD)):find(CoyCkCoZqReSIh,I3KBWKKGGQ3lE[25],I3KBWKKGGQ3lE[47])or fwKjNN04c4g.targetGold and tostring(floor(fwKjNN04c4g.targetGold/COPPER_PER_GOLD)):find(CoyCkCoZqReSIh,I3KBWKKGGQ3lE[25],I3KBWKKGGQ3lE[47])or fwKjNN04c4g.target and fwKjNN04c4g.target:lower():find(CoyCkCoZqReSIh,I3KBWKKGGQ3lE[25],I3KBWKKGGQ3lE[47])or fwKjNN04c4g.playerItems and fwKjNN04c4g.playerItems:lower():find(CoyCkCoZqReSIh,I3KBWKKGGQ3lE[25],I3KBWKKGGQ3lE[47])or fwKjNN04c4g.targetItems and fwKjNN04c4g.targetItems:lower():find(CoyCkCoZqReSIh,I3KBWKKGGQ3lE[25],I3KBWKKGGQ3lE[47]))then table.insert(bDezr3E3dOKtjjPBPK,fwKjNN04c4g)end end;LC7uD:ApplyDefaultSort(bDezr3E3dOKtjjPBPK)self.currentView=bDezr3E3dOKtjjPBPK;self.tradelogWindow.searchResults:SetData(self.currentView,I3KBWKKGGQ3lE[47])LC7uD:UpdateStateText()LC7uD:UpdateResultsText()end;function LC7uD:DrawWindow()local lkKFlY1DBXGR=klxEBdJXSwxCtVuD6JX:Window(UIParent,I3KBWKKGGQ3lE[68],I3KBWKKGGQ3lE[69],I3KBWKKGGQ3lE[70])lkKFlY1DBXGR:SetPoint(I3KBWKKGGQ3lE[71],UIParent,I3KBWKKGGQ3lE[72],I3KBWKKGGQ3lE[26],I3KBWKKGGQ3lE[26])lkKFlY1DBXGR:SetScript(I3KBWKKGGQ3lE[73],function(yhDsnBlsA)yhDsnBlsA:StopMovingOrSizing()end)klxEBdJXSwxCtVuD6JX:MakeResizable(lkKFlY1DBXGR,I3KBWKKGGQ3lE[74])klxEBdJXSwxCtVuD6JX:MakeResizable(lkKFlY1DBXGR,I3KBWKKGGQ3lE[75])lkKFlY1DBXGR:SetResizeBounds(I3KBWKKGGQ3lE[76],I3KBWKKGGQ3lE[77])lkKFlY1DBXGR:SetFrameLevel(E2q8RF0:GetNextFrameLevel())lkKFlY1DBXGR:SetScript(I3KBWKKGGQ3lE[78],function(hX)hX:SetFrameLevel(E2q8RF0:GetNextFrameLevel())end)local mharZsuk3o=klxEBdJXSwxCtVuD6JX:Frame(lkKFlY1DBXGR,I3KBWKKGGQ3lE[79],I3KBWKKGGQ3lE[79])local RyYhia3y3jdoi2H4CmN0=klxEBdJXSwxCtVuD6JX:Texture(mharZsuk3o,I3KBWKKGGQ3lE[79],I3KBWKKGGQ3lE[79],E2q8RF0.LogoPath)klxEBdJXSwxCtVuD6JX:GlueTop(RyYhia3y3jdoi2H4CmN0,mharZsuk3o,I3KBWKKGGQ3lE[26],I3KBWKKGGQ3lE[26],I3KBWKKGGQ3lE[80])klxEBdJXSwxCtVuD6JX:GlueBottom(mharZsuk3o,lkKFlY1DBXGR,-I3KBWKKGGQ3lE[67],I3KBWKKGGQ3lE[67],I3KBWKKGGQ3lE[81])lkKFlY1DBXGR.resultsLabel=klxEBdJXSwxCtVuD6JX:Label(lkKFlY1DBXGR,I3KBWKKGGQ3lE[31],I3KBWKKGGQ3lE[82])klxEBdJXSwxCtVuD6JX:GlueBottom(lkKFlY1DBXGR.resultsLabel,lkKFlY1DBXGR,I3KBWKKGGQ3lE[67],I3KBWKKGGQ3lE[83],I3KBWKKGGQ3lE[84])local nxLH=klxEBdJXSwxCtVuD6JX:Button(lkKFlY1DBXGR,I3KBWKKGGQ3lE[85],I3KBWKKGGQ3lE[82],I3KBWKKGGQ3lE[86])klxEBdJXSwxCtVuD6JX:GlueBottom(nxLH,lkKFlY1DBXGR,I3KBWKKGGQ3lE[26],I3KBWKKGGQ3lE[67],I3KBWKKGGQ3lE[87])nxLH:SetScript(I3KBWKKGGQ3lE[88],function()LC7uD:DrawClearWarningWindow()end)self.tradelogWindow=lkKFlY1DBXGR end;function LC7uD:DrawClearWarningWindow()local uwFX={character={text=I3KBWKKGGQ3lE[89],onClick=function(EVS5jn)LC7uD:ClearMailForCharacter()EVS5jn.window:Hide()end},all={text=I3KBWKKGGQ3lE[90],onClick=function(xALEbn0M)LC7uD:ClearAllMail()xALEbn0M.window:Hide()end}}klxEBdJXSwxCtVuD6JX:Confirm(I3KBWKKGGQ3lE[91],I3KBWKKGGQ3lE[92],uwFX,I3KBWKKGGQ3lE[25])end;function LC7uD:ClearMailForCharacter()local scpDrhtvAe4,siOSgVu=UnitFullName(I3KBWKKGGQ3lE[93])local vIp7d0w=scpDrhtvAe4 ..I3KBWKKGGQ3lE[94]..siOSgVu;for fHzC6bWKaJefIh,NN7D01rxdin in pairs(E2q8RF0.db.global.tradelog)do if NN7D01rxdin.source==vIp7d0w or NN7D01rxdin.destination==vIp7d0w then E2q8RF0.db.global.tradelog[fHzC6bWKaJefIh]=I3KBWKKGGQ3lE[31]end end;if(self.tradelogWindow)then LC7uD:SearchTrades(self.tradelogWindow.searchBox:GetText())end end;function LC7uD:ClearAllMail()for X5Pe4PMu9rHQCZng9pIfN,yx9 in pairs(E2q8RF0.db.global.tradelog)do E2q8RF0.db.global.tradelog[X5Pe4PMu9rHQCZng9pIfN]=I3KBWKKGGQ3lE[31]end;if(self.tradelogWindow)then LC7uD:SearchTrades(self.tradelogWindow.searchBox:GetText())end end;function LC7uD:DrawSearchPane()local q=self.tradelogWindow;local WDJoKceLcfvUWwM0ADvb=klxEBdJXSwxCtVuD6JX:Autocomplete(q,I3KBWKKGGQ3lE[95],I3KBWKKGGQ3lE[96],I3KBWKKGGQ3lE[8],I3KBWKKGGQ3lE[31],I3KBWKKGGQ3lE[31],I3KBWKKGGQ3lE[31])klxEBdJXSwxCtVuD6JX:ApplyPlaceholder(WDJoKceLcfvUWwM0ADvb,I3KBWKKGGQ3lE[97],I3KBWKKGGQ3lE[98])WDJoKceLcfvUWwM0ADvb:SetFontSize(I3KBWKKGGQ3lE[82])local gWokfQAGfDDr=klxEBdJXSwxCtVuD6JX:Button(q,I3KBWKKGGQ3lE[99],I3KBWKKGGQ3lE[96],I3KBWKKGGQ3lE[100])klxEBdJXSwxCtVuD6JX:GlueTop(WDJoKceLcfvUWwM0ADvb,q,I3KBWKKGGQ3lE[67],-I3KBWKKGGQ3lE[101],I3KBWKKGGQ3lE[102])klxEBdJXSwxCtVuD6JX:GlueTop(gWokfQAGfDDr,q,I3KBWKKGGQ3lE[103],-I3KBWKKGGQ3lE[101],I3KBWKKGGQ3lE[104])WDJoKceLcfvUWwM0ADvb:SetScript(I3KBWKKGGQ3lE[105],function()LC7uD:SearchTrades(WDJoKceLcfvUWwM0ADvb:GetText())end)gWokfQAGfDDr:SetScript(I3KBWKKGGQ3lE[106],function()LC7uD:SearchTrades(WDJoKceLcfvUWwM0ADvb:GetText())end)local ACA=klxEBdJXSwxCtVuD6JX:Checkbox(q,I3KBWKKGGQ3lE[107])klxEBdJXSwxCtVuD6JX:GlueRight(ACA,gWokfQAGfDDr,I3KBWKKGGQ3lE[67],I3KBWKKGGQ3lE[26])ACA.OnValueChanged=function(JtfUo,MbfHRfJN0M)LC7uD:SearchTrades(WDJoKceLcfvUWwM0ADvb:GetText())end;local BmEN77Xk=klxEBdJXSwxCtVuD6JX:FrameTooltip(ACA,I3KBWKKGGQ3lE[108],I3KBWKKGGQ3lE[109],I3KBWKKGGQ3lE[110],I3KBWKKGGQ3lE[47])local FpS7=klxEBdJXSwxCtVuD6JX:Checkbox(q,I3KBWKKGGQ3lE[111])klxEBdJXSwxCtVuD6JX:GlueRight(FpS7,ACA,I3KBWKKGGQ3lE[67],I3KBWKKGGQ3lE[26])FpS7.OnValueChanged=function(uqFx10A0tf_zvAR,frzgn5eRsBSnyJ)LC7uD:SearchTrades(WDJoKceLcfvUWwM0ADvb:GetText())end;local goSbCK1QVv4zIL=klxEBdJXSwxCtVuD6JX:FrameTooltip(FpS7,I3KBWKKGGQ3lE[112],I3KBWKKGGQ3lE[113],I3KBWKKGGQ3lE[114],I3KBWKKGGQ3lE[47])q.allCharactersToggle=ACA;q.todayToggle=FpS7;q.searchBox=WDJoKceLcfvUWwM0ADvb;q.searchButton=gWokfQAGfDDr end;function LC7uD:DrawSearchResultsTable()local qgrpBVXx9Kkt=self.tradelogWindow;local function QM11lC(nHOQoywXzDh6DpZvN26J,DBFVSv,RJJODfmmp13ZR)if DBFVSv and RJJODfmmp13ZR~=I3KBWKKGGQ3lE[31]then GameTooltip:SetOwner(nHOQoywXzDh6DpZvN26J)GameTooltip:SetText(RJJODfmmp13ZR)else GameTooltip:Hide()end end;local EbfNRYiF3ni15jVwNSff={{name=I3KBWKKGGQ3lE[115],width=I3KBWKKGGQ3lE[77],align=I3KBWKKGGQ3lE[116],index=I3KBWKKGGQ3lE[117],format=function(Jz5BFwUPHBccKOIqBVQ)return Jz5BFwUPHBccKOIqBVQ and(Jz5BFwUPHBccKOIqBVQ..I3KBWKKGGQ3lE[118])or I3KBWKKGGQ3lE[8]end,defaultSort=I3KBWKKGGQ3lE[119]},{name=I3KBWKKGGQ3lE[120],width=I3KBWKKGGQ3lE[121],align=I3KBWKKGGQ3lE[122],index=I3KBWKKGGQ3lE[123],format=I3KBWKKGGQ3lE[124]},{name=I3KBWKKGGQ3lE[125],width=I3KBWKKGGQ3lE[121],align=I3KBWKKGGQ3lE[126],index=I3KBWKKGGQ3lE[127],format=I3KBWKKGGQ3lE[128]},{name=I3KBWKKGGQ3lE[129],width=I3KBWKKGGQ3lE[121],align=I3KBWKKGGQ3lE[130],index=I3KBWKKGGQ3lE[131],format=I3KBWKKGGQ3lE[132],events={OnEnter=function(Z_ZZN,SviRIV,cbc,XGl3XBZWrd,Q6cYwuRYqlxeQ67t,oaHBqVzV_IYBF)local LHWJqU=XGl3XBZWrd[Q6cYwuRYqlxeQ67t.index]if XGl3XBZWrd.playerItems then QM11lC(SviRIV,I3KBWKKGGQ3lE[47],XGl3XBZWrd.playerItems)end;return I3KBWKKGGQ3lE[47]end,OnLeave=function(zKCQ8ESuIS1HkXEWp,rLEAVu0_8j8LzgLpXFEiJ)QM11lC(rLEAVu0_8j8LzgLpXFEiJ,I3KBWKKGGQ3lE[133])return I3KBWKKGGQ3lE[47]end}},{name=I3KBWKKGGQ3lE[134],width=I3KBWKKGGQ3lE[51],align=I3KBWKKGGQ3lE[135],index=I3KBWKKGGQ3lE[136],format=I3KBWKKGGQ3lE[137]},{name=I3KBWKKGGQ3lE[138],width=I3KBWKKGGQ3lE[51],align=I3KBWKKGGQ3lE[139],index=I3KBWKKGGQ3lE[140],format=I3KBWKKGGQ3lE[141]},{name=I3KBWKKGGQ3lE[142],width=I3KBWKKGGQ3lE[121],align=I3KBWKKGGQ3lE[143],index=I3KBWKKGGQ3lE[144],format=I3KBWKKGGQ3lE[145],events={OnEnter=function(wN9_qNyAeyxvGyXh,nbHCoR_WEZpT2smtNCb,OP1SCo8m9_EA8BD,cPi2GEOS3Fqt78P1wsZ,BWH8MnX,RSBA0X0KWElpX1ieSaaia)local Tw8pgmrBJjKwZzBDdG=cPi2GEOS3Fqt78P1wsZ[BWH8MnX.index]if cPi2GEOS3Fqt78P1wsZ.targetItems then QM11lC(nbHCoR_WEZpT2smtNCb,I3KBWKKGGQ3lE[47],cPi2GEOS3Fqt78P1wsZ.targetItems)end;return I3KBWKKGGQ3lE[47]end,OnLeave=function(gJM_4rgfAnLuk,_BBmhcQvXkPJAugOFO_)QM11lC(_BBmhcQvXkPJAugOFO_,I3KBWKKGGQ3lE[133])return I3KBWKKGGQ3lE[47]end}}}qgrpBVXx9Kkt.searchResults=klxEBdJXSwxCtVuD6JX:ScrollTable(qgrpBVXx9Kkt,EbfNRYiF3ni15jVwNSff,I3KBWKKGGQ3lE[146],I3KBWKKGGQ3lE[147])qgrpBVXx9Kkt.searchResults:EnableSelection(I3KBWKKGGQ3lE[47])qgrpBVXx9Kkt.searchResults:SetScript(I3KBWKKGGQ3lE[148],function(A98znZvyHczMI7MUgnM4)local AO=A98znZvyHczMI7MUgnM4:GetWidth()local Tc1=A98znZvyHczMI7MUgnM4:GetHeight()local ULoRwD4=I3KBWKKGGQ3lE[26]for k=I3KBWKKGGQ3lE[25],#A98znZvyHczMI7MUgnM4.columns do ULoRwD4=ULoRwD4 +A98znZvyHczMI7MUgnM4.columns[k].width end;for k=I3KBWKKGGQ3lE[25],#A98znZvyHczMI7MUgnM4.columns do A98znZvyHczMI7MUgnM4.columns[k]:SetWidth(A98znZvyHczMI7MUgnM4.columns[k].width/ULoRwD4 * (AO-I3KBWKKGGQ3lE[96]))end;A98znZvyHczMI7MUgnM4:SetDisplayRows(math.floor(Tc1 /A98znZvyHczMI7MUgnM4.rowHeight),A98znZvyHczMI7MUgnM4.rowHeight)end)klxEBdJXSwxCtVuD6JX:GlueAcross(qgrpBVXx9Kkt.searchResults,qgrpBVXx9Kkt,I3KBWKKGGQ3lE[67],-I3KBWKKGGQ3lE[149],-I3KBWKKGGQ3lE[67],I3KBWKKGGQ3lE[150])qgrpBVXx9Kkt.stateLabel=klxEBdJXSwxCtVuD6JX:Label(qgrpBVXx9Kkt.searchResults,I3KBWKKGGQ3lE[151])klxEBdJXSwxCtVuD6JX:GlueTop(qgrpBVXx9Kkt.stateLabel,qgrpBVXx9Kkt.searchResults,I3KBWKKGGQ3lE[26],-I3KBWKKGGQ3lE[101],I3KBWKKGGQ3lE[152])end;function LC7uD:ApplyDefaultSort(mtsyoJ)if(self.tradelogWindow.searchResults.head.columns)then local J4uquI0k41X6LGBJuRv=I3KBWKKGGQ3lE[133]for VS3,z in pairs(self.tradelogWindow.searchResults.head.columns)do if(z.arrow:IsVisible())then J4uquI0k41X6LGBJuRv=I3KBWKKGGQ3lE[47]end end;if(not J4uquI0k41X6LGBJuRv)then return table.sort(mtsyoJ,function(f4PVzqNlX7sNf2OXK4YGi,upu3NyLJ)return f4PVzqNlX7sNf2OXK4YGi[I3KBWKKGGQ3lE[153]]>upu3NyLJ[I3KBWKKGGQ3lE[154]]end)end end;return mtsyoJ end;function LC7uD:UpdateStateText()if(#self.currentView>I3KBWKKGGQ3lE[26])then self.tradelogWindow.stateLabel:Hide()else self.tradelogWindow.stateLabel:SetText(I3KBWKKGGQ3lE[155])end end;function LC7uD:UpdateResultsText()if(#self.currentView>I3KBWKKGGQ3lE[26])then self.tradelogWindow.resultsLabel:SetText(I3KBWKKGGQ3lE[156]..tostring(#self.currentView))self.tradelogWindow.resultsLabel:Show()else self.tradelogWindow.resultsLabel:Hide()end end;function LC7uD:EnsureFullName(f4It4veTQQX5bEvAK)if not f4It4veTQQX5bEvAK:find(I3KBWKKGGQ3lE[157])then f4It4veTQQX5bEvAK=f4It4veTQQX5bEvAK..I3KBWKKGGQ3lE[158]..select(I3KBWKKGGQ3lE[159],UnitFullName(I3KBWKKGGQ3lE[160]))end;return f4It4veTQQX5bEvAK end;function LC7uD:Finish()self.pendingTradeContents={}self.targetName=I3KBWKKGGQ3lE[8]self.targetRealm=I3KBWKKGGQ3lE[8]self.targetNameRealm=I3KBWKKGGQ3lE[8]end;function LC7uD:CleanUp()local HZnZ5=E2q8RF0.db.global.tradelog;local c1Oyxj_wA2=I3KBWKKGGQ3lE[26]local cN8E=E2q8RF0.db.global.logCleanupDays;for ShhPdJSs1Pzex,le6oPzZ6oFZ in pairs(HZnZ5)do local zuOaPJZgxEeV=E2q8RF0.helperFunctions:IsOlderThanDays(le6oPzZ6oFZ.date,cN8E)if zuOaPJZgxEeV==I3KBWKKGGQ3lE[47]then c1Oyxj_wA2=c1Oyxj_wA2 +I3KBWKKGGQ3lE[25]HZnZ5[ShhPdJSs1Pzex]=I3KBWKKGGQ3lE[31]end end;if c1Oyxj_wA2 >I3KBWKKGGQ3lE[26]then E2q8RF0:Printf(I3KBWKKGGQ3lE[161],c1Oyxj_wA2,cN8E)end end