local cBeGEqub0WM09DEwc6l={[1]="\65\99\101\65\100\100\111\110\45\51\46\48",[2]="\68\97\119\110\84\111\111\108\115",[3]="\68\97\119\110\84\114\97\100\101\76\111\103",[4]="\65\99\101\69\118\101\110\116\45\51\46\48",[5]="\65\99\101\72\111\111\107\45\51\46\48",[6]="\65\99\101\67\111\110\115\111\108\101\45\51\46\48",[7]="\83\116\100\85\105",[8]="",[9]="\84\82\65\68\69\95\65\67\67\69\80\84\95\85\80\68\65\84\69",[10]="\79\110\69\118\101\110\116",[11]="\85\73\95\73\78\70\79\95\77\69\83\83\65\71\69",[12]="\79\110\69\118\101\110\116",[13]="\85\73\95\69\82\82\79\82\95\77\69\83\83\65\71\69",[14]="\79\110\69\118\101\110\116",[15]="\84\82\65\68\69\95\83\72\79\87",[16]="\79\110\69\118\101\110\116",[17]="\85\73\95\69\82\82\79\82\95\77\69\83\83\65\71\69",[18]="\124\67\70\70\70\70\48\48\48\48\91\68\97\119\110\84\114\97\100\101\76\111\103\93\58\32\84\114\97\100\101\32\119\105\116\104\32",[19]="\32\119\97\115\32\99\97\110\99\101\108\108\101\100\58\32",[20]="\85\73\95\73\78\70\79\95\77\69\83\83\65\71\69",[21]="\124\67\70\70\70\70\48\48\48\48\91\68\97\119\110\84\114\97\100\101\76\111\103\93\58\32\84\114\97\100\101\32\119\105\116\104\32",[22]="\32\119\97\115\32\99\97\110\99\101\108\108\101\100\46",[23]="\124\67\70\70\48\48\70\70\48\48\91\68\97\119\110\84\114\97\100\101\76\111\103\93\58\32\84\114\97\100\101\32\119\105\116\104\32",[24]="\32\119\97\115\32\115\117\99\99\101\115\115\102\117\108\46",[25]=1,[26]=0,[27]="\71\97\118\101\32",[28]="\32\116\111\32",[29]="\32\105\110\32\97\32\116\114\97\100\101\46",[30]="\87\72\73\83\80\69\82",[31]=nil,[32]="\82\101\99\101\105\118\101\100\32",[33]="\32\102\114\111\109\32",[34]="\32\105\110\32\97\32\116\114\97\100\101\46",[35]="\87\72\73\83\80\69\82",[36]="\84\82\65\68\69\95\83\72\79\87",[37]="\78\80\67",[38]="\45",[39]="\84\82\65\68\69\95\65\67\67\69\80\84\95\85\80\68\65\84\69",[40]=6,[41]="\124\114\32\120\32",[42]="\124\110",[43]="\124\114\32\120\32",[44]="\124\110",[45]="\37\89\45\37\109\45\37\100\32\37\88\32\40\37\65\41",[46]="\112\108\97\121\101\114",[47]=true,[48]="\94\40\45\63\37\100\43\41\40\37\100\37\100\37\100\41",[49]="\37\49\44\37\50",[50]=10000,[51]=100,[52]=1000,[53]="\32\71\111\108\100\32",[54]="\32\83\105\108\118\101\114\32",[55]="\32\67\111\112\112\101\114",[56]="\124\67\70\70\70\70\70\70\48\48\32\71\97\118\101\58",[57]="\32\32\32\32\124\67\70\70\70\70\70\70\48\48",[58]="\103",[59]="\32\32\32\32",[60]="\124\67\70\70\70\70\70\70\48\48\32\82\101\99\101\105\118\101\100\58",[61]="\32\32\32\32\124\67\70\70\70\70\70\70\48\48",[62]="\103",[63]="\32\32\32\32",[64]="\112\108\97\121\101\114",[65]="\45",[66]="\37\89\45\37\109\45\37\100",[67]=10,[68]=1100,[69]=700,[70]="\68\97\119\110\32\84\114\97\100\101\32\76\111\103\32\86\105\101\119\101\114",[71]="\67\69\78\84\69\82",[72]="\67\69\78\84\69\82",[73]="\79\110\68\114\97\103\83\116\111\112",[74]="\66\79\84\84\79\77\82\73\71\72\84",[75]="\84\79\80\76\69\70\84",[76]=850,[77]=250,[78]="\79\110\77\111\117\115\101\68\111\119\110",[79]=32,[80]="\67\69\78\84\69\82",[81]="\82\73\71\72\84",[82]=16,[83]=5,[84]="\76\69\70\84",[85]=128,[86]="\67\108\101\97\114\32\76\111\103",[87]="\67\69\78\84\69\82",[88]="\79\110\67\108\105\99\107",[89]="\84\104\105\115\32\67\104\97\114\97\99\116\101\114",[90]="\65\108\108\32\77\97\105\108",[91]="\67\108\101\97\114\32\76\111\103",[92]="\83\101\108\101\99\116\32\108\111\103\32\116\111\32\99\108\101\97\114\46\32\84\104\101\115\101\32\97\99\116\105\111\110\115\32\67\65\78\78\79\84\32\66\69\32\82\69\86\69\82\83\69\68\46\32\66\111\116\104\32\115\101\110\116\32\97\110\100\32\114\101\99\101\105\118\101\100\32\109\97\105\108\32\119\105\108\108\32\98\101\32\100\101\108\101\116\101\100\46",[93]="\112\108\97\121\101\114",[94]="\45",[95]=400,[96]=30,[97]="\83\101\97\114\99\104",[98]="\73\110\116\101\114\102\97\99\101\92\67\111\109\109\111\110\92\85\73\45\83\101\97\114\99\104\98\111\120\45\73\99\111\110",[99]=80,[100]="\83\101\97\114\99\104",[101]=40,[102]="\76\69\70\84",[103]=420,[104]="\76\69\70\84",[105]="\79\110\69\110\116\101\114\80\114\101\115\115\101\100",[106]="\79\110\67\108\105\99\107",[107]="\65\108\108\32\99\104\97\114\97\99\116\101\114\115",[108]="\83\104\111\119\32\97\108\108\32\116\114\97\100\101\115\32\98\121\32\97\110\121\32\99\104\97\114\97\99\116\101\114\32\111\110\32\116\104\105\115\32\97\99\99\111\117\110\116\46",[109]="\116\111\111\108\116\105\112",[110]="\82\73\71\72\84",[111]="\79\110\108\121\32\115\104\111\119\32\116\111\100\97\121",[112]="\79\110\108\121\32\115\104\111\119\32\116\114\97\100\101\115\32\116\104\97\116\32\119\97\115\32\114\101\99\101\105\118\101\100\32\111\114\32\115\101\110\116\32\116\111\100\97\121\46",[113]="\116\111\111\108\116\105\112",[114]="\82\73\71\72\84",[115]="\68\97\116\101",[116]=225,[117]="\67\69\78\84\69\82",[118]="\100\97\116\101",[119]="\115\116\114\105\110\103",[120]="\97\115\99",[121]="\80\108\97\121\101\114",[122]=150,[123]="\67\69\78\84\69\82",[124]="\112\108\97\121\101\114",[125]="\115\116\114\105\110\103",[126]="\89\111\117\114\32\79\102\102\101\114\32\40\71\111\108\100\41",[127]="\67\69\78\84\69\82",[128]="\112\108\97\121\101\114\71\111\108\100",[129]="\109\111\110\101\121",[130]="\89\111\117\114\32\79\102\102\101\114\32\40\73\116\101\109\115\41",[131]="\76\69\70\84",[132]="\112\108\97\121\101\114\73\116\101\109\115",[133]="\115\116\114\105\110\103",[134]=false,[135]="\84\97\114\103\101\116",[136]="\76\69\70\84",[137]="\116\97\114\103\101\116",[138]="\115\116\114\105\110\103",[139]="\84\97\114\103\101\116\32\79\102\102\101\114\32\40\71\111\108\100\41",[140]="\67\69\78\84\69\82",[141]="\116\97\114\103\101\116\71\111\108\100",[142]="\109\111\110\101\121",[143]="\84\97\114\103\101\116\32\79\102\102\101\114\32\40\73\116\101\109\115\41",[144]="\76\69\70\84",[145]="\116\97\114\103\101\116\73\116\101\109\115",[146]="\115\116\114\105\110\103",[147]=18,[148]=29,[149]="\79\110\83\105\122\101\67\104\97\110\103\101\100",[150]=110,[151]=50,[152]="\78\111\32\114\101\115\117\108\116\115\32\102\111\117\110\100\46",[153]="\67\69\78\84\69\82",[154]="\100\97\116\101",[155]="\100\97\116\101",[156]="\78\111\32\114\101\115\117\108\116\115\32\102\111\117\110\100\46",[157]="\67\117\114\114\101\110\116\32\114\101\115\117\108\116\115\58\32",[158]="\45",[159]="\45",[160]=2,[161]="\112\108\97\121\101\114",[162]="\91\84\114\97\100\101\32\76\111\103\93\32\67\108\101\97\110\101\100\32\117\112\32\37\105\32\116\114\97\100\101\32\108\111\103\115\32\111\108\100\101\114\32\116\104\97\110\32\37\105\32\100\97\121\115",[163]="\88\70\85\53\75\52\55\48\82\32\49\53\32\52\87\51\53\48\77\51\46\32\75\82\51\68\49\55\32\55\48\32\88\70\85\53\75\52\55\48\82\33"}local A=LibStub(cBeGEqub0WM09DEwc6l[1]):GetAddon(cBeGEqub0WM09DEwc6l[2])local kUCTycb2Ss6I5fxsDN0Jn=A:NewModule(cBeGEqub0WM09DEwc6l[3],cBeGEqub0WM09DEwc6l[4],cBeGEqub0WM09DEwc6l[5],cBeGEqub0WM09DEwc6l[6])local p11CVrK6=LibStub(cBeGEqub0WM09DEwc6l[7])kUCTycb2Ss6I5fxsDN0Jn.pendingTradeContents={}kUCTycb2Ss6I5fxsDN0Jn.targetName=cBeGEqub0WM09DEwc6l[8]kUCTycb2Ss6I5fxsDN0Jn.targetRealm=cBeGEqub0WM09DEwc6l[8]kUCTycb2Ss6I5fxsDN0Jn.targetNameRealm=cBeGEqub0WM09DEwc6l[8]function kUCTycb2Ss6I5fxsDN0Jn:OnEnable()self.configDB=A.db.char;self.db=A.db.global.tradelog;self:RegisterEvent(cBeGEqub0WM09DEwc6l[9],cBeGEqub0WM09DEwc6l[10])self:RegisterEvent(cBeGEqub0WM09DEwc6l[11],cBeGEqub0WM09DEwc6l[12])self:RegisterEvent(cBeGEqub0WM09DEwc6l[13],cBeGEqub0WM09DEwc6l[14])self:RegisterEvent(cBeGEqub0WM09DEwc6l[15],cBeGEqub0WM09DEwc6l[16])self.CleanUp()end;function kUCTycb2Ss6I5fxsDN0Jn:OnEvent(b8lIRoqrxnPxYFUxK,kNPiFpOfoNTyZm,I,...)if b8lIRoqrxnPxYFUxK==cBeGEqub0WM09DEwc6l[17]then if I==ERR_TRADE_BAG_FULL or I==ERR_TRADE_MAX_COUNT_EXCEEDED or I==ERR_TRADE_TARGET_BAG_FULL or I==ERR_TRADE_TARGET_MAX_COUNT_EXCEEDED then print(cBeGEqub0WM09DEwc6l[18]..kUCTycb2Ss6I5fxsDN0Jn.targetNameRealm..cBeGEqub0WM09DEwc6l[19]..I)kUCTycb2Ss6I5fxsDN0Jn:Finish()end elseif b8lIRoqrxnPxYFUxK==cBeGEqub0WM09DEwc6l[20]and(I==ERR_TRADE_CANCELLED or I==ERR_TRADE_COMPLETE)then if I==ERR_TRADE_CANCELLED and self.targetName then print(cBeGEqub0WM09DEwc6l[21]..kUCTycb2Ss6I5fxsDN0Jn.targetNameRealm..cBeGEqub0WM09DEwc6l[22])kUCTycb2Ss6I5fxsDN0Jn:Finish()else print(cBeGEqub0WM09DEwc6l[23]..kUCTycb2Ss6I5fxsDN0Jn.targetNameRealm..cBeGEqub0WM09DEwc6l[24])self.db[#self.db+cBeGEqub0WM09DEwc6l[25]]=self.pendingTradeContents;if A.db.global.whisperAfterTrade then if self.pendingTradeContents.playerGold>cBeGEqub0WM09DEwc6l[26]then C_ChatInfo.SendChatMessage(cBeGEqub0WM09DEwc6l[27]..kUCTycb2Ss6I5fxsDN0Jn:GetCoinText(self.pendingTradeContents.playerGold)..cBeGEqub0WM09DEwc6l[28]..self.pendingTradeContents.target..cBeGEqub0WM09DEwc6l[29],cBeGEqub0WM09DEwc6l[30],cBeGEqub0WM09DEwc6l[31],self.pendingTradeContents.target)elseif self.pendingTradeContents.targetGold>cBeGEqub0WM09DEwc6l[26]then C_ChatInfo.SendChatMessage(cBeGEqub0WM09DEwc6l[32]..kUCTycb2Ss6I5fxsDN0Jn:GetCoinText(self.pendingTradeContents.targetGold)..cBeGEqub0WM09DEwc6l[33]..self.pendingTradeContents.target..cBeGEqub0WM09DEwc6l[34],cBeGEqub0WM09DEwc6l[35],cBeGEqub0WM09DEwc6l[31],self.pendingTradeContents.target)end end;kUCTycb2Ss6I5fxsDN0Jn:PrintTradeContents()if self.tradelogWindow then C_Timer.After(cBeGEqub0WM09DEwc6l[25],function()kUCTycb2Ss6I5fxsDN0Jn:SearchTrades(self.tradelogWindow.searchBox:GetText())end)end;kUCTycb2Ss6I5fxsDN0Jn:Finish()end elseif b8lIRoqrxnPxYFUxK==cBeGEqub0WM09DEwc6l[36]then self.targetName,self.targetRealm=UnitName(cBeGEqub0WM09DEwc6l[37])if(self.targetRealm==cBeGEqub0WM09DEwc6l[31])then self.targetNameRealm=self.targetName else self.targetNameRealm=self.targetName..cBeGEqub0WM09DEwc6l[38]..self.targetRealm end elseif b8lIRoqrxnPxYFUxK==cBeGEqub0WM09DEwc6l[39]then local K93d1c4GtkGMPPz1=GetPlayerTradeMoney()local u6SEI2=GetTargetTradeMoney()local WywdpeVfEHput220=cBeGEqub0WM09DEwc6l[8]local H98BmgyUcvT1sai=cBeGEqub0WM09DEwc6l[8]for items=cBeGEqub0WM09DEwc6l[25],cBeGEqub0WM09DEwc6l[40]do local OAz7x,IfBV7gjqp5r,CMi7,JleQ9EvkVJneFtHXDbKIY=GetTradePlayerItemInfo(items)if OAz7x then WywdpeVfEHput220=WywdpeVfEHput220 ..ITEM_QUALITY_COLORS[JleQ9EvkVJneFtHXDbKIY].hex..OAz7x..cBeGEqub0WM09DEwc6l[41]..CMi7 ..cBeGEqub0WM09DEwc6l[42]end end;for items=cBeGEqub0WM09DEwc6l[25],cBeGEqub0WM09DEwc6l[40]do local b,s8,hn78dKlgS0_MVI,yEAuVMZvfCIO5Hp=GetTradeTargetItemInfo(items)if b then H98BmgyUcvT1sai=H98BmgyUcvT1sai..ITEM_QUALITY_COLORS[yEAuVMZvfCIO5Hp].hex..b..cBeGEqub0WM09DEwc6l[43]..hn78dKlgS0_MVI..cBeGEqub0WM09DEwc6l[44]end end;self.pendingTradeContents={date=date(cBeGEqub0WM09DEwc6l[45]),player=kUCTycb2Ss6I5fxsDN0Jn:EnsureFullName(UnitName(cBeGEqub0WM09DEwc6l[46])),target=kUCTycb2Ss6I5fxsDN0Jn:EnsureFullName(self.targetNameRealm),playerGold=K93d1c4GtkGMPPz1,targetGold=u6SEI2,playerItems=WywdpeVfEHput220,targetItems=H98BmgyUcvT1sai}end end;local function vKMvom(EIkIxjJoLW7)local TfFUwvOI7pgpTUk8P=tostring(EIkIxjJoLW7)while cBeGEqub0WM09DEwc6l[47]do TfFUwvOI7pgpTUk8P,k=TfFUwvOI7pgpTUk8P:gsub(cBeGEqub0WM09DEwc6l[48],cBeGEqub0WM09DEwc6l[49])if k==cBeGEqub0WM09DEwc6l[26]then break end end;return TfFUwvOI7pgpTUk8P end;function kUCTycb2Ss6I5fxsDN0Jn:GetCoinText(mlrw)local XOmTOgReGv7=floor(mlrw/cBeGEqub0WM09DEwc6l[50])local qEI08HX6KME2=floor(mlrw/cBeGEqub0WM09DEwc6l[51]%cBeGEqub0WM09DEwc6l[51])local tmvKagZQbj75=mlrw%cBeGEqub0WM09DEwc6l[51]local AoIN=XOmTOgReGv7 >=cBeGEqub0WM09DEwc6l[52]and vKMvom(XOmTOgReGv7)or tostring(XOmTOgReGv7)return(AoIN..cBeGEqub0WM09DEwc6l[53]..qEI08HX6KME2 ..cBeGEqub0WM09DEwc6l[54]..tmvKagZQbj75 ..cBeGEqub0WM09DEwc6l[55])end;function kUCTycb2Ss6I5fxsDN0Jn:PrintTradeContents()if self.pendingTradeContents then if self.pendingTradeContents.playerGold or self.pendingTradeContents.playerItems then print(cBeGEqub0WM09DEwc6l[56])if self.pendingTradeContents.playerGold and self.pendingTradeContents.playerGold>cBeGEqub0WM09DEwc6l[26]then print(cBeGEqub0WM09DEwc6l[57]..vKMvom(self.pendingTradeContents.playerGold/COPPER_PER_GOLD)..cBeGEqub0WM09DEwc6l[58])end;if self.pendingTradeContents.playerItems and self.pendingTradeContents.playerItems~=cBeGEqub0WM09DEwc6l[8]then print(cBeGEqub0WM09DEwc6l[59]..self.pendingTradeContents.playerItems)end end;if self.pendingTradeContents.targetGold or self.pendingTradeContents.targetItems then print(cBeGEqub0WM09DEwc6l[60])if self.pendingTradeContents.targetGold and self.pendingTradeContents.targetGold>cBeGEqub0WM09DEwc6l[26]then print(cBeGEqub0WM09DEwc6l[61]..vKMvom(self.pendingTradeContents.targetGold/COPPER_PER_GOLD)..cBeGEqub0WM09DEwc6l[62])end;if self.pendingTradeContents.targetItems and self.pendingTradeContents.targetItems~=cBeGEqub0WM09DEwc6l[8]then print(cBeGEqub0WM09DEwc6l[63]..self.pendingTradeContents.targetItems)end end end end;function kUCTycb2Ss6I5fxsDN0Jn:OpenPanel()if self.tradelogWindow==cBeGEqub0WM09DEwc6l[31]then self:DrawWindow()self:DrawSearchPane()self:DrawSearchResultsTable()self:SearchTrades(cBeGEqub0WM09DEwc6l[8])else self.tradelogWindow:Show()self:SearchTrades(cBeGEqub0WM09DEwc6l[8])end end;function kUCTycb2Ss6I5fxsDN0Jn:Toggle()if not self.tradelogWindow then kUCTycb2Ss6I5fxsDN0Jn:OpenPanel()elseif self.tradelogWindow:IsVisible()then self.tradelogWindow:Hide()else self.tradelogWindow:Show()end end;function kUCTycb2Ss6I5fxsDN0Jn:SearchTrades(dssUIL148m4_u)local oDvp8=self.tradelogWindow;local WIWPMcaSWZxW11KMR49=dssUIL148m4_u:lower()local Kxg6x5ZBjdxz=self.db;local fd78NFJ={}local yeTnXnVfgSQ_3,Zkr=UnitFullName(cBeGEqub0WM09DEwc6l[64])local zF8rI1=yeTnXnVfgSQ_3 ..cBeGEqub0WM09DEwc6l[65]..Zkr;local Xd4tfh4Th6_PV6G4jng=oDvp8.allCharactersToggle:GetChecked()local F33GZc7=oDvp8.todayToggle:GetChecked()local yeoRgfqgMuMuEoKdAf=date(cBeGEqub0WM09DEwc6l[66])for MEikO5Jv7a5YYgin3p,Jm6z0lT7XydkyX in pairs(Kxg6x5ZBjdxz)do if(Xd4tfh4Th6_PV6G4jng or(Jm6z0lT7XydkyX.player and Jm6z0lT7XydkyX.player:lower():find(zF8rI1:lower(),cBeGEqub0WM09DEwc6l[25],cBeGEqub0WM09DEwc6l[47]))~=cBeGEqub0WM09DEwc6l[31])and(Jm6z0lT7XydkyX.date and(not F33GZc7 or string.sub(Jm6z0lT7XydkyX.date,cBeGEqub0WM09DEwc6l[25],cBeGEqub0WM09DEwc6l[67])==yeoRgfqgMuMuEoKdAf))and(Jm6z0lT7XydkyX.playerGold and tostring(floor(Jm6z0lT7XydkyX.playerGold/COPPER_PER_GOLD)):find(WIWPMcaSWZxW11KMR49,cBeGEqub0WM09DEwc6l[25],cBeGEqub0WM09DEwc6l[47])or Jm6z0lT7XydkyX.targetGold and tostring(floor(Jm6z0lT7XydkyX.targetGold/COPPER_PER_GOLD)):find(WIWPMcaSWZxW11KMR49,cBeGEqub0WM09DEwc6l[25],cBeGEqub0WM09DEwc6l[47])or Jm6z0lT7XydkyX.target and Jm6z0lT7XydkyX.target:lower():find(WIWPMcaSWZxW11KMR49,cBeGEqub0WM09DEwc6l[25],cBeGEqub0WM09DEwc6l[47])or Jm6z0lT7XydkyX.playerItems and Jm6z0lT7XydkyX.playerItems:lower():find(WIWPMcaSWZxW11KMR49,cBeGEqub0WM09DEwc6l[25],cBeGEqub0WM09DEwc6l[47])or Jm6z0lT7XydkyX.targetItems and Jm6z0lT7XydkyX.targetItems:lower():find(WIWPMcaSWZxW11KMR49,cBeGEqub0WM09DEwc6l[25],cBeGEqub0WM09DEwc6l[47]))then table.insert(fd78NFJ,Jm6z0lT7XydkyX)end end;kUCTycb2Ss6I5fxsDN0Jn:ApplyDefaultSort(fd78NFJ)self.currentView=fd78NFJ;self.tradelogWindow.searchResults:SetData(self.currentView,cBeGEqub0WM09DEwc6l[47])kUCTycb2Ss6I5fxsDN0Jn:UpdateStateText()kUCTycb2Ss6I5fxsDN0Jn:UpdateResultsText()end;function kUCTycb2Ss6I5fxsDN0Jn:DrawWindow()local bHT=p11CVrK6:Window(UIParent,cBeGEqub0WM09DEwc6l[68],cBeGEqub0WM09DEwc6l[69],cBeGEqub0WM09DEwc6l[70])bHT:SetPoint(cBeGEqub0WM09DEwc6l[71],UIParent,cBeGEqub0WM09DEwc6l[72],cBeGEqub0WM09DEwc6l[26],cBeGEqub0WM09DEwc6l[26])bHT:SetScript(cBeGEqub0WM09DEwc6l[73],function(JDkrm7Lmxez0oN57e)JDkrm7Lmxez0oN57e:StopMovingOrSizing()end)p11CVrK6:MakeResizable(bHT,cBeGEqub0WM09DEwc6l[74])p11CVrK6:MakeResizable(bHT,cBeGEqub0WM09DEwc6l[75])bHT:SetResizeBounds(cBeGEqub0WM09DEwc6l[76],cBeGEqub0WM09DEwc6l[77])bHT:SetFrameLevel(A:GetNextFrameLevel())bHT:SetScript(cBeGEqub0WM09DEwc6l[78],function(JTcVPOS7q)JTcVPOS7q:SetFrameLevel(A:GetNextFrameLevel())end)local kmI_cvA4g5D5QiS2p7=p11CVrK6:Frame(bHT,cBeGEqub0WM09DEwc6l[79],cBeGEqub0WM09DEwc6l[79])local uAUiNLnPMtY6whEWRX=p11CVrK6:Texture(kmI_cvA4g5D5QiS2p7,cBeGEqub0WM09DEwc6l[79],cBeGEqub0WM09DEwc6l[79],A.LogoPath)p11CVrK6:GlueTop(uAUiNLnPMtY6whEWRX,kmI_cvA4g5D5QiS2p7,cBeGEqub0WM09DEwc6l[26],cBeGEqub0WM09DEwc6l[26],cBeGEqub0WM09DEwc6l[80])p11CVrK6:GlueBottom(kmI_cvA4g5D5QiS2p7,bHT,-cBeGEqub0WM09DEwc6l[67],cBeGEqub0WM09DEwc6l[67],cBeGEqub0WM09DEwc6l[81])bHT.resultsLabel=p11CVrK6:Label(bHT,cBeGEqub0WM09DEwc6l[31],cBeGEqub0WM09DEwc6l[82])p11CVrK6:GlueBottom(bHT.resultsLabel,bHT,cBeGEqub0WM09DEwc6l[67],cBeGEqub0WM09DEwc6l[83],cBeGEqub0WM09DEwc6l[84])local RaglYhFYHW58_9Lh7R3=p11CVrK6:Button(bHT,cBeGEqub0WM09DEwc6l[85],cBeGEqub0WM09DEwc6l[82],cBeGEqub0WM09DEwc6l[86])p11CVrK6:GlueBottom(RaglYhFYHW58_9Lh7R3,bHT,cBeGEqub0WM09DEwc6l[26],cBeGEqub0WM09DEwc6l[67],cBeGEqub0WM09DEwc6l[87])RaglYhFYHW58_9Lh7R3:SetScript(cBeGEqub0WM09DEwc6l[88],function()kUCTycb2Ss6I5fxsDN0Jn:DrawClearWarningWindow()end)self.tradelogWindow=bHT end;function kUCTycb2Ss6I5fxsDN0Jn:DrawClearWarningWindow()local si0Ct={character={text=cBeGEqub0WM09DEwc6l[89],onClick=function(gaPZ08YaRN)kUCTycb2Ss6I5fxsDN0Jn:ClearMailForCharacter()gaPZ08YaRN.window:Hide()end},all={text=cBeGEqub0WM09DEwc6l[90],onClick=function(fVu8DYJv)kUCTycb2Ss6I5fxsDN0Jn:ClearAllMail()fVu8DYJv.window:Hide()end}}p11CVrK6:Confirm(cBeGEqub0WM09DEwc6l[91],cBeGEqub0WM09DEwc6l[92],si0Ct,cBeGEqub0WM09DEwc6l[25])end;function kUCTycb2Ss6I5fxsDN0Jn:ClearMailForCharacter()local m9Nv,kR1ngCPW7jsN=UnitFullName(cBeGEqub0WM09DEwc6l[93])local pDuRwHMHRFvLjOwN=m9Nv..cBeGEqub0WM09DEwc6l[94]..kR1ngCPW7jsN;for _Zi,wWCA in pairs(A.db.global.tradelog)do if wWCA.source==pDuRwHMHRFvLjOwN or wWCA.destination==pDuRwHMHRFvLjOwN then A.db.global.tradelog[_Zi]=cBeGEqub0WM09DEwc6l[31]end end;if(self.tradelogWindow)then kUCTycb2Ss6I5fxsDN0Jn:SearchTrades(self.tradelogWindow.searchBox:GetText())end end;function kUCTycb2Ss6I5fxsDN0Jn:ClearAllMail()for YZAwapE7H,lnEr84Rs3K5aJBq in pairs(A.db.global.tradelog)do A.db.global.tradelog[YZAwapE7H]=cBeGEqub0WM09DEwc6l[31]end;if(self.tradelogWindow)then kUCTycb2Ss6I5fxsDN0Jn:SearchTrades(self.tradelogWindow.searchBox:GetText())end end;function kUCTycb2Ss6I5fxsDN0Jn:DrawSearchPane()local V338kWfnTRdgGht4Q7c=self.tradelogWindow;local bti5t9IjZyKvcqP=p11CVrK6:Autocomplete(V338kWfnTRdgGht4Q7c,cBeGEqub0WM09DEwc6l[95],cBeGEqub0WM09DEwc6l[96],cBeGEqub0WM09DEwc6l[8],cBeGEqub0WM09DEwc6l[31],cBeGEqub0WM09DEwc6l[31],cBeGEqub0WM09DEwc6l[31])p11CVrK6:ApplyPlaceholder(bti5t9IjZyKvcqP,cBeGEqub0WM09DEwc6l[97],cBeGEqub0WM09DEwc6l[98])bti5t9IjZyKvcqP:SetFontSize(cBeGEqub0WM09DEwc6l[82])local M=p11CVrK6:Button(V338kWfnTRdgGht4Q7c,cBeGEqub0WM09DEwc6l[99],cBeGEqub0WM09DEwc6l[96],cBeGEqub0WM09DEwc6l[100])p11CVrK6:GlueTop(bti5t9IjZyKvcqP,V338kWfnTRdgGht4Q7c,cBeGEqub0WM09DEwc6l[67],-cBeGEqub0WM09DEwc6l[101],cBeGEqub0WM09DEwc6l[102])p11CVrK6:GlueTop(M,V338kWfnTRdgGht4Q7c,cBeGEqub0WM09DEwc6l[103],-cBeGEqub0WM09DEwc6l[101],cBeGEqub0WM09DEwc6l[104])bti5t9IjZyKvcqP:SetScript(cBeGEqub0WM09DEwc6l[105],function()kUCTycb2Ss6I5fxsDN0Jn:SearchTrades(bti5t9IjZyKvcqP:GetText())end)M:SetScript(cBeGEqub0WM09DEwc6l[106],function()kUCTycb2Ss6I5fxsDN0Jn:SearchTrades(bti5t9IjZyKvcqP:GetText())end)local bZ1FlVKprDYxlbRmnCl9=p11CVrK6:Checkbox(V338kWfnTRdgGht4Q7c,cBeGEqub0WM09DEwc6l[107])p11CVrK6:GlueRight(bZ1FlVKprDYxlbRmnCl9,M,cBeGEqub0WM09DEwc6l[67],cBeGEqub0WM09DEwc6l[26])bZ1FlVKprDYxlbRmnCl9.OnValueChanged=function(M7qUlkrlGhAwF5vXjzmgQ,XTopi)kUCTycb2Ss6I5fxsDN0Jn:SearchTrades(bti5t9IjZyKvcqP:GetText())end;local Y9DPE9=p11CVrK6:FrameTooltip(bZ1FlVKprDYxlbRmnCl9,cBeGEqub0WM09DEwc6l[108],cBeGEqub0WM09DEwc6l[109],cBeGEqub0WM09DEwc6l[110],cBeGEqub0WM09DEwc6l[47])local NHh=p11CVrK6:Checkbox(V338kWfnTRdgGht4Q7c,cBeGEqub0WM09DEwc6l[111])p11CVrK6:GlueRight(NHh,bZ1FlVKprDYxlbRmnCl9,cBeGEqub0WM09DEwc6l[67],cBeGEqub0WM09DEwc6l[26])NHh.OnValueChanged=function(ba4_l2BNL,kyxVlDVpDIxMw)kUCTycb2Ss6I5fxsDN0Jn:SearchTrades(bti5t9IjZyKvcqP:GetText())end;local efXaFi6b=p11CVrK6:FrameTooltip(NHh,cBeGEqub0WM09DEwc6l[112],cBeGEqub0WM09DEwc6l[113],cBeGEqub0WM09DEwc6l[114],cBeGEqub0WM09DEwc6l[47])V338kWfnTRdgGht4Q7c.allCharactersToggle=bZ1FlVKprDYxlbRmnCl9;V338kWfnTRdgGht4Q7c.todayToggle=NHh;V338kWfnTRdgGht4Q7c.searchBox=bti5t9IjZyKvcqP;V338kWfnTRdgGht4Q7c.searchButton=M end;function kUCTycb2Ss6I5fxsDN0Jn:DrawSearchResultsTable()local ER7Xh8bkj7F2FwOTLtRC=self.tradelogWindow;local function nwEYUU5jxrHgIqVqS(xUIOi,fZ,jgR6)if fZ and jgR6 ~=cBeGEqub0WM09DEwc6l[31]then GameTooltip:SetOwner(xUIOi)GameTooltip:SetText(jgR6)else GameTooltip:Hide()end end;local fGzz8WtqZV2Xm={{name=cBeGEqub0WM09DEwc6l[115],width=cBeGEqub0WM09DEwc6l[116],align=cBeGEqub0WM09DEwc6l[117],index=cBeGEqub0WM09DEwc6l[118],format=cBeGEqub0WM09DEwc6l[119],defaultSort=cBeGEqub0WM09DEwc6l[120]},{name=cBeGEqub0WM09DEwc6l[121],width=cBeGEqub0WM09DEwc6l[122],align=cBeGEqub0WM09DEwc6l[123],index=cBeGEqub0WM09DEwc6l[124],format=cBeGEqub0WM09DEwc6l[125]},{name=cBeGEqub0WM09DEwc6l[126],width=cBeGEqub0WM09DEwc6l[122],align=cBeGEqub0WM09DEwc6l[127],index=cBeGEqub0WM09DEwc6l[128],format=cBeGEqub0WM09DEwc6l[129]},{name=cBeGEqub0WM09DEwc6l[130],width=cBeGEqub0WM09DEwc6l[122],align=cBeGEqub0WM09DEwc6l[131],index=cBeGEqub0WM09DEwc6l[132],format=cBeGEqub0WM09DEwc6l[133],events={OnEnter=function(mBO63d60y,RRnd,ezBSYPfjAE_j6,SopmnR141FX6H,ac,s)local uHjTCG52HY9MwE1140w=SopmnR141FX6H[ac.index]if SopmnR141FX6H.playerItems then nwEYUU5jxrHgIqVqS(RRnd,cBeGEqub0WM09DEwc6l[47],SopmnR141FX6H.playerItems)end;return cBeGEqub0WM09DEwc6l[47]end,OnLeave=function(GQEgaeJh6nu5AD,yemcOS2gZXkyOWTTOhm)nwEYUU5jxrHgIqVqS(yemcOS2gZXkyOWTTOhm,cBeGEqub0WM09DEwc6l[134])return cBeGEqub0WM09DEwc6l[47]end}},{name=cBeGEqub0WM09DEwc6l[135],width=cBeGEqub0WM09DEwc6l[51],align=cBeGEqub0WM09DEwc6l[136],index=cBeGEqub0WM09DEwc6l[137],format=cBeGEqub0WM09DEwc6l[138]},{name=cBeGEqub0WM09DEwc6l[139],width=cBeGEqub0WM09DEwc6l[51],align=cBeGEqub0WM09DEwc6l[140],index=cBeGEqub0WM09DEwc6l[141],format=cBeGEqub0WM09DEwc6l[142]},{name=cBeGEqub0WM09DEwc6l[143],width=cBeGEqub0WM09DEwc6l[122],align=cBeGEqub0WM09DEwc6l[144],index=cBeGEqub0WM09DEwc6l[145],format=cBeGEqub0WM09DEwc6l[146],events={OnEnter=function(uVqNEjWUkq2,tbmH3V2xoq2,vlIQt7B6,SmtnkKlw,tHRP0KdZxgAm2XY0,TiPAnjCFTiHnk)local zGk25ooxh0RM=SmtnkKlw[tHRP0KdZxgAm2XY0.index]if SmtnkKlw.targetItems then nwEYUU5jxrHgIqVqS(tbmH3V2xoq2,cBeGEqub0WM09DEwc6l[47],SmtnkKlw.targetItems)end;return cBeGEqub0WM09DEwc6l[47]end,OnLeave=function(U,kz3rdBTcJ1U9Eq)nwEYUU5jxrHgIqVqS(kz3rdBTcJ1U9Eq,cBeGEqub0WM09DEwc6l[134])return cBeGEqub0WM09DEwc6l[47]end}}}ER7Xh8bkj7F2FwOTLtRC.searchResults=p11CVrK6:ScrollTable(ER7Xh8bkj7F2FwOTLtRC,fGzz8WtqZV2Xm,cBeGEqub0WM09DEwc6l[147],cBeGEqub0WM09DEwc6l[148])ER7Xh8bkj7F2FwOTLtRC.searchResults:EnableSelection(cBeGEqub0WM09DEwc6l[47])ER7Xh8bkj7F2FwOTLtRC.searchResults:SetScript(cBeGEqub0WM09DEwc6l[149],function(A9Vd3M8Yt94)local EkrI17KJuwJqANy1LJou=A9Vd3M8Yt94:GetWidth()local B8CfHdkX4bH=A9Vd3M8Yt94:GetHeight()local MoqZoP5=cBeGEqub0WM09DEwc6l[26]for k=cBeGEqub0WM09DEwc6l[25],#A9Vd3M8Yt94.columns do MoqZoP5=MoqZoP5 +A9Vd3M8Yt94.columns[k].width end;for k=cBeGEqub0WM09DEwc6l[25],#A9Vd3M8Yt94.columns do A9Vd3M8Yt94.columns[k]:SetWidth(A9Vd3M8Yt94.columns[k].width/MoqZoP5 * (EkrI17KJuwJqANy1LJou-cBeGEqub0WM09DEwc6l[96]))end;A9Vd3M8Yt94:SetDisplayRows(math.floor(B8CfHdkX4bH/A9Vd3M8Yt94.rowHeight),A9Vd3M8Yt94.rowHeight)end)p11CVrK6:GlueAcross(ER7Xh8bkj7F2FwOTLtRC.searchResults,ER7Xh8bkj7F2FwOTLtRC,cBeGEqub0WM09DEwc6l[67],-cBeGEqub0WM09DEwc6l[150],-cBeGEqub0WM09DEwc6l[67],cBeGEqub0WM09DEwc6l[151])ER7Xh8bkj7F2FwOTLtRC.stateLabel=p11CVrK6:Label(ER7Xh8bkj7F2FwOTLtRC.searchResults,cBeGEqub0WM09DEwc6l[152])p11CVrK6:GlueTop(ER7Xh8bkj7F2FwOTLtRC.stateLabel,ER7Xh8bkj7F2FwOTLtRC.searchResults,cBeGEqub0WM09DEwc6l[26],-cBeGEqub0WM09DEwc6l[101],cBeGEqub0WM09DEwc6l[153])end;function kUCTycb2Ss6I5fxsDN0Jn:ApplyDefaultSort(v04P_8cqLoA)if(self.tradelogWindow.searchResults.head.columns)then local VwXcSEyIs6_JSipqd5wA=cBeGEqub0WM09DEwc6l[134]for jjhP5QQ,CQPDmsKOukgHR8TTDkZG in pairs(self.tradelogWindow.searchResults.head.columns)do if(CQPDmsKOukgHR8TTDkZG.arrow:IsVisible())then VwXcSEyIs6_JSipqd5wA=cBeGEqub0WM09DEwc6l[47]end end;if(not VwXcSEyIs6_JSipqd5wA)then return table.sort(v04P_8cqLoA,function(U0INUKt,T0WjKIUFMkSIOtW)return U0INUKt[cBeGEqub0WM09DEwc6l[154]]>T0WjKIUFMkSIOtW[cBeGEqub0WM09DEwc6l[155]]end)end end;return v04P_8cqLoA end;function kUCTycb2Ss6I5fxsDN0Jn:UpdateStateText()if(#self.currentView>cBeGEqub0WM09DEwc6l[26])then self.tradelogWindow.stateLabel:Hide()else self.tradelogWindow.stateLabel:SetText(cBeGEqub0WM09DEwc6l[156])end end;function kUCTycb2Ss6I5fxsDN0Jn:UpdateResultsText()if(#self.currentView>cBeGEqub0WM09DEwc6l[26])then self.tradelogWindow.resultsLabel:SetText(cBeGEqub0WM09DEwc6l[157]..tostring(#self.currentView))self.tradelogWindow.resultsLabel:Show()else self.tradelogWindow.resultsLabel:Hide()end end;function kUCTycb2Ss6I5fxsDN0Jn:EnsureFullName(c09v83vw0qmTKls)if not c09v83vw0qmTKls:find(cBeGEqub0WM09DEwc6l[158])then c09v83vw0qmTKls=c09v83vw0qmTKls..cBeGEqub0WM09DEwc6l[159]..select(cBeGEqub0WM09DEwc6l[160],UnitFullName(cBeGEqub0WM09DEwc6l[161]))end;return c09v83vw0qmTKls end;function kUCTycb2Ss6I5fxsDN0Jn:Finish()self.pendingTradeContents={}self.targetName=cBeGEqub0WM09DEwc6l[8]self.targetRealm=cBeGEqub0WM09DEwc6l[8]self.targetNameRealm=cBeGEqub0WM09DEwc6l[8]end;function kUCTycb2Ss6I5fxsDN0Jn:CleanUp()local AhsFhg0vZqoNx0FS7MR=A.db.global.tradelog;local TnrrcbOhtbJ=cBeGEqub0WM09DEwc6l[26]local RMAcIv5hA=A.db.global.logCleanupDays;for pBqChch6kwtoD4,al4e6XrIUX_FNi0 in pairs(AhsFhg0vZqoNx0FS7MR)do local pQzgqxMuyRzkB=A.helperFunctions:IsOlderThanDays(al4e6XrIUX_FNi0.date,RMAcIv5hA)if pQzgqxMuyRzkB==cBeGEqub0WM09DEwc6l[47]then TnrrcbOhtbJ=TnrrcbOhtbJ+cBeGEqub0WM09DEwc6l[25]AhsFhg0vZqoNx0FS7MR[pBqChch6kwtoD4]=cBeGEqub0WM09DEwc6l[31]end end;if TnrrcbOhtbJ>cBeGEqub0WM09DEwc6l[26]then A:Printf(cBeGEqub0WM09DEwc6l[162],TnrrcbOhtbJ,RMAcIv5hA)end end