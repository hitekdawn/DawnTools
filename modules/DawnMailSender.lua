local H={[1]="\65\99\101\65\100\100\111\110\45\51\46\48",[2]="\68\97\119\110\84\111\111\108\115",[3]="\68\97\119\110\77\97\105\108\83\101\110\100\101\114",[4]="\65\99\101\69\118\101\110\116\45\51\46\48",[5]="\65\99\101\72\111\111\107\45\51\46\48",[6]="\65\99\101\67\111\110\115\111\108\101\45\51\46\48",[7]="\65\99\101\84\105\109\101\114\45\51\46\48",[8]="\83\116\100\85\105",[9]=false,[10]="\68\97\98\103\101\114\115\97",[11]="\68\97\98\103\101\114\115\104",[12]="\71\97\114\100\101\110\111\102\108\115\97",[13]="\71\97\114\100\101\110\111\102\108\115\104",[14]="\107\101\107\100\101\112\112\104",[15]="\107\101\107\100\101\112\112\97",[16]="\208\186\208\181\208\186\208\180\208\181\208\191\208\191\209\133",[17]="\208\186\208\181\208\186\208\180\208\181\208\191\208\191\208\176",[18]="\89\101\106\111\105\99\101\97",[19]="\89\101\106\111\105\99\101\104",[20]="\208\153\208\181\208\180\208\182\208\190\208\185\209\129\208\176",[21]="\208\153\208\181\208\180\208\182\208\190\208\185\209\129\209\133",[22]="\72\109\109\103\101\104",[23]="\72\109\109\103\101\97",[24]="\208\165\208\188\208\188\208\180\208\182\209\133",[25]="\208\165\208\188\208\188\208\180\208\182\208\176",[26]="\80\101\101\112\111\115\108\101\101\112\121\104",[27]="\80\101\101\112\111\115\108\101\101\112\121\97",[28]="\208\159\208\184\208\185\208\191\208\190\209\129\208\190\208\189\208\189\209\139\208\185\209\133",[29]="\208\159\208\184\208\185\208\191\208\190\209\129\208\190\208\189\208\189\209\139\208\185\208\176",[30]="\87\97\105\116\105\110\103\104",[31]="\87\97\105\116\105\110\103\97",[32]="\208\180\208\176\208\189\208\186\208\179",[33]="\208\180\208\176\208\189\209\140\208\186\208\176\208\176",[34]="\82\105\99\104\105\101\115\104",[35]="\82\105\99\104\105\101\115\97",[36]="\208\180\208\190\209\128\208\190\208\179\208\190\208\185\209\130\208\181\208\179",[37]="\208\180\208\190\209\128\208\190\208\179\208\190\208\185\209\130\208\181\208\176",[38]="\70\98\105\111\112\101\110\117\112\104",[39]="\70\98\105\111\112\101\110\117\112\97",[40]="\209\132\208\177\208\184\208\190\209\130\208\186\209\128\209\139\208\178\208\176\208\185\208\179",[41]="\209\132\208\177\208\184\208\190\209\130\208\186\209\128\209\139\208\178\208\176\208\185\208\176",[42]="\67\111\100\121\101\120\105\116\104",[43]="\67\111\100\121\101\120\105\116\97",[44]="\208\154\208\190\208\180\208\184\208\178\209\139\209\133\208\190\208\180\209\133",[45]="\208\154\208\190\208\180\208\184\208\178\209\139\209\133\208\190\208\180\208\176",[46]="\68\97\110\107\119\114\111\111\109\104",[47]="\68\97\110\107\119\114\111\111\109\97",[48]="\208\148\208\176\208\189\208\186\208\178\209\128\208\190\208\190\208\188\209\133",[49]="\208\148\208\176\208\189\208\186\208\178\209\128\208\190\208\190\208\188\208\176",[50]="\72\101\104\101\98\111\121\101\97",[51]="\72\101\104\101\98\111\121\101\104",[52]="\209\133\208\181\209\133\208\181\208\177\208\190\208\185\208\179",[53]="\209\133\208\181\209\133\208\181\208\177\208\190\208\185\208\176",[54]="\67\111\111\108\115\116\111\114\121\104",[55]="\67\111\111\108\115\116\111\114\121\97",[56]="\66\105\110\103\99\104\105\108\108\105\110\104",[57]="\66\105\110\103\99\104\105\108\108\105\110\97",[58]="\80\76\65\89\69\82\95\77\79\78\69\89",[59]="\79\110\69\118\101\110\116",[60]="\77\65\73\76\95\70\65\73\76\69\68",[61]="\79\110\69\118\101\110\116",[62]="\77\65\73\76\95\83\85\67\67\69\83\83",[63]="\79\110\69\118\101\110\116",[64]=nil,[65]=300,[66]=400,[67]="\68\97\119\110\32\77\97\105\108\32\83\101\110\100\101\114",[68]="\67\69\78\84\69\82",[69]="\67\69\78\84\69\82",[70]=0,[71]="\66\79\84\84\79\77\82\73\71\72\84",[72]=250,[73]=332,[74]="\79\110\68\114\97\103\83\116\111\112",[75]=280,[76]=10,[77]=50,[78]=80,[79]=30,[80]="\83\101\110\100",[81]="\67\69\78\84\69\82",[82]="\79\110\67\108\105\99\107",[83]=32,[84]="\67\69\78\84\69\82",[85]="\82\73\71\72\84",[86]="\79\110\77\111\117\115\101\68\111\119\110",[87]=16,[88]=20,[89]="\82\73\71\72\84",[90]="\73\110\116\101\114\102\97\99\101\92\70\114\105\101\110\100\115\70\114\97\109\101\92\73\110\102\111\114\109\97\116\105\111\110\73\99\111\110",[91]="\67\69\78\84\69\82",[92]="\69\120\97\109\112\108\101\115\58\124\110\112\108\97\121\101\114\49\45\115\101\114\118\101\114\58\49\48\48\58\115\117\98\106\101\99\116\49\58\98\111\100\121\49\124\110\112\108\97\121\101\114\50\45\115\101\114\118\101\114\58\50\48\48\58\115\117\98\106\101\99\116\50\58\98\111\100\121\50\124\110\112\108\97\121\101\114\51\45\115\101\114\118\101\114\58\49\57\57\58\115\117\98\106\101\99\116\51\58\98\111\100\121\51",[93]="\116\111\111\108\116\105\112",[94]="\84\79\80",[95]=true,[96]=1,[97]="\94\40\91\94\37\45\93\43\41",[98]="",[99]="\77\97\105\108\32\83\101\110\100\101\114\124\114\58\32\124\99\70\70\70\70\48\48\48\48\66\108\111\99\107\101\100\32\115\101\110\100\105\110\103\32\116\111\32\111\108\100\32\98\97\110\107\32\110\97\109\101\58\32",[100]="\124\114",[101]="\80\76\65\89\69\82\95\77\79\78\69\89",[102]="\77\65\73\76\95\70\65\73\76\69\68",[103]="\80\76\65\89\69\82\95\77\79\78\69\89",[104]="\77\97\105\108\32\83\101\110\100\101\114\124\114\58\32\124\99\70\70\48\48\70\70\48\48\83\101\110\116\32",[105]="\32\103\111\108\100\32\116\111\32\112\108\97\121\101\114\32",[106]="\124\114",[107]="\77\65\73\76\95\70\65\73\76\69\68",[108]="\77\97\105\108\32\83\101\110\100\101\114\124\114\58\32\124\99\70\70\70\70\48\48\48\48\70\97\105\108\101\100\32\116\111\32\115\101\110\100\32",[109]="\32\103\111\108\100\32\116\111\32\112\108\97\121\101\114\32",[110]="\124\114",[111]="\77\65\73\76\95\83\85\67\67\69\83\83",[112]="\77\65\73\76\95\70\65\73\76\69\68",[113]="\83\101\110\100\77\97\105\108",[114]="\37\89\45\37\109\45\37\100\32\37\88\32\40\37\65\41",[115]="\84\97\107\101\73\110\98\111\120\77\111\110\101\121",[116]=3,[117]="\45",[118]="\45",[119]=2,[120]="\112\108\97\121\101\114",[121]="\37\89\45\37\109\45\37\100\32\37\88\32\40\37\65\41",[122]=31,[123]=24,[124]=60,[125]="\37\89\45\37\109\45\37\100\32\37\88\32\40\37\65\41",[126]="\65\117\116\111\76\111\111\116\77\97\105\108\73\116\101\109",[127]="\45",[128]="\45",[129]="\112\108\97\121\101\114",[130]="\37\89\45\37\109\45\37\100\32\37\88\32\40\37\65\41",[131]="\37\89\45\37\109\45\37\100\32\37\88\32\40\37\65\41",[132]="\80\114\111\99\101\115\115\78\101\120\116\73\116\101\109",[133]=0.3,[134]="\91\94\58\93\43",[135]="\68\97\119\110\32\67\111\109\109\117\110\105\116\121\32\80\97\121\111\117\116\115",[136]=4,[137]="\77\97\105\108\32\83\101\110\100\101\114\124\114\58\32\124\99\70\70\70\70\48\48\48\48\78\111\116\32\101\110\111\117\103\104\32\103\111\108\100\32\116\111\32\99\111\110\116\105\110\117\101\46\124\114",[138]="\77\97\105\108\32\83\101\110\100\101\114\124\114\58\32\67\117\114\114\101\110\116\32\112\108\97\121\101\114\58\32",[139]="\44\32\103\111\108\100\58\32",[140]="\112\108\97\121\101\114",[141]="\45",[142]="\77\97\105\108\32\83\101\110\100\101\114\124\114\58\32\65\108\108\32\100\111\110\101\33",[143]="\88\70\85\53\75\52\55\48\82\32\49\53\32\52\87\51\53\48\77\51\46\32\75\82\51\68\49\55\32\55\48\32\88\70\85\53\75\52\55\48\82\33"}local kSMT=LibStub(H[1]):GetAddon(H[2])local odwi1A=kSMT:NewModule(H[3],H[4],H[5],H[6],H[7])local hpbFRoDz_fJ5LjAzyE_y=LibStub(H[8])odwi1A.mail={}odwi1A.visibleMail={}odwi1A.expectingMailEvent=H[9]odwi1A.pendingMailContents={}odwi1A.activelySending=H[9]odwi1A.oldBankNames={H[10],H[11],H[12],H[13],H[14],H[15],H[16],H[17],H[18],H[19],H[20],H[21],H[22],H[23],H[24],H[25],H[26],H[27],H[28],H[29],H[30],H[31],H[32],H[33],H[34],H[35],H[36],H[37],H[38],H[39],H[40],H[41],H[42],H[43],H[44],H[45],H[46],H[47],H[48],H[49],H[50],H[51],H[52],H[53],H[54],H[55],H[56],H[57]}function odwi1A:OnEnable()self:RegisterEvent(H[58],H[59])self:RegisterEvent(H[60],H[61])self:RegisterEvent(H[62],H[63])self.db=kSMT.db.global.maillog;self.configDB=kSMT.db.char end;function odwi1A:OpenPanel()if(self.sendWindow==H[64])then self:DrawWindow()self:DrawInfoIcon()else self.sendWindow:Show()end end;function odwi1A:IsVisible()return self.sendWindow and self.sendWindow:IsVisible()end;function odwi1A:Hide()if self.sendWindow then self.sendWindow:Hide()end end;function odwi1A:DrawWindow()local a=hpbFRoDz_fJ5LjAzyE_y:Window(UIParent,H[65],H[66],H[67])a:SetPoint(H[68],UIParent,H[69],H[70],H[70])hpbFRoDz_fJ5LjAzyE_y:MakeResizable(a,H[71])a:SetResizeBounds(H[72],H[73])a:SetScript(H[74],function(kd3)kd3:StopMovingOrSizing()end)local RwdRHecbD=hpbFRoDz_fJ5LjAzyE_y:MultiLineBox(a,H[75],H[65],H[64])hpbFRoDz_fJ5LjAzyE_y:GlueAcross(RwdRHecbD,a,H[76],-H[77],-H[76],H[77])RwdRHecbD:SetFocus()local TzY7eoA2nP=hpbFRoDz_fJ5LjAzyE_y:Button(a,H[78],H[79],H[80])hpbFRoDz_fJ5LjAzyE_y:GlueBottom(TzY7eoA2nP,a,H[70],H[76],H[81])TzY7eoA2nP:SetScript(H[82],function()odwi1A:Start()end)local SW1DWy2z8eTP=hpbFRoDz_fJ5LjAzyE_y:Frame(a,H[83],H[83])local bYJSzsGOh=hpbFRoDz_fJ5LjAzyE_y:Texture(SW1DWy2z8eTP,H[83],H[83],kSMT.LogoPath)hpbFRoDz_fJ5LjAzyE_y:GlueTop(bYJSzsGOh,SW1DWy2z8eTP,H[70],H[70],H[84])hpbFRoDz_fJ5LjAzyE_y:GlueBottom(SW1DWy2z8eTP,a,-H[76],H[76],H[85])self.sendWindow=a;self.sendWindow.sendButton=TzY7eoA2nP;self.sendWindow.editBox=RwdRHecbD;a:SetFrameLevel(kSMT:GetNextFrameLevel())a:SetScript(H[86],function(I7B9WBGJW)I7B9WBGJW:SetFrameLevel(kSMT:GetNextFrameLevel())end)end;function odwi1A:DrawInfoIcon()local gmuHkqw2jdW=self.sendWindow;local MH99zYVL76bBv1Gq=hpbFRoDz_fJ5LjAzyE_y:Frame(gmuHkqw2jdW,H[87],H[87],H[64])hpbFRoDz_fJ5LjAzyE_y:GlueRight(MH99zYVL76bBv1Gq,self.sendWindow.sendButton,H[88],H[70],H[89])local j8fqb=hpbFRoDz_fJ5LjAzyE_y:Texture(gmuHkqw2jdW,H[87],H[87],H[90])hpbFRoDz_fJ5LjAzyE_y:GlueTop(j8fqb,MH99zYVL76bBv1Gq,H[70],H[70],H[91])local xi=hpbFRoDz_fJ5LjAzyE_y:FrameTooltip(MH99zYVL76bBv1Gq,H[92],H[93],H[94],H[95])end;function odwi1A:Start()wipe(self.mail)self.expectingMailEvent=H[9]self.activelySending=H[9]self.mailSent=H[96]if(self.sendWindow.editBox~=H[64]and self.sendWindow.editBox:GetText()~=H[64])then odwi1A:ParseInput()if(not odwi1A:HasEnoughGold())then odwi1A:LogNotEnoughGold()odwi1A:Finish()return end;self.activelySending=H[95]odwi1A:AttemptSendMail(self.mailSent)end end;function odwi1A:IsOldBankName(TY2Pbvcv_h3ssic_)local c3Ly40uYmSKut=TY2Pbvcv_h3ssic_:match(H[97])or TY2Pbvcv_h3ssic_;c3Ly40uYmSKut=c3Ly40uYmSKut:lower()for VnhBHjI_MyLnxazejj,AJKx in ipairs(self.oldBankNames)do if c3Ly40uYmSKut==AJKx:lower()then return H[95]end end;return H[9]end;function odwi1A:AttemptSendMail(tauGD8Pqyfd_UXJQ)local GXdn_5G8U7oTbtRwwAo2=(self.mail[tauGD8Pqyfd_UXJQ].gold or H[70])local qxflptHpkV=self.mail[tauGD8Pqyfd_UXJQ].player;local ZDH7JvXy=self.mail[tauGD8Pqyfd_UXJQ].subject or H[98]local dptRVQYABgQHNk3Sb=self.mail[tauGD8Pqyfd_UXJQ].body or H[98]if self:IsOldBankName(qxflptHpkV)then kSMT:Print(kSMT.ColorString..H[99]..qxflptHpkV..H[100])self.mailSent=self.mailSent+H[96]if(self.mailSent>#self.mail)then odwi1A:Finish()return elseif(not odwi1A:HasEnoughGold())then odwi1A:LogNotEnoughGold()odwi1A:Finish()return else odwi1A:AttemptSendMail(self.mailSent)end;return end;SetSendMailMoney(GXdn_5G8U7oTbtRwwAo2)SendMail(qxflptHpkV,ZDH7JvXy,dptRVQYABgQHNk3Sb)end;function odwi1A:OnEvent(TxAQkVknp8h8ze,...)if(#self.mail>H[70]and self.activelySending)then if(TxAQkVknp8h8ze==H[101]or TxAQkVknp8h8ze==H[102])then if(TxAQkVknp8h8ze==H[103])then kSMT:Print(kSMT.ColorString..H[104]..odwi1A:FormatRawCurrency(self.mail[self.mailSent].gold)..H[105]..self.mail[self.mailSent].player..H[106])self.db[#self.db+H[96]]=self.pendingMailContents elseif(TxAQkVknp8h8ze==H[107])then print(kSMT.ColorString..H[108]..odwi1A:FormatRawCurrency(self.mail[self.mailSent].gold)..H[109]..self.mail[self.mailSent].player..H[110])wipe(self.pendingMailContents)end;self.mailSent=self.mailSent+H[96]if(self.mailSent>#self.mail)then odwi1A:Finish()return elseif(not odwi1A:HasEnoughGold())then odwi1A:LogNotEnoughGold()odwi1A:Finish()return else odwi1A:AttemptSendMail(self.mailSent)end end else if(TxAQkVknp8h8ze==H[111]and self.expectingMailEvent)then self.db[#self.db+H[96]]=self.pendingMailContents;self.expectingMailEvent=H[9]elseif(TxAQkVknp8h8ze==H[112]and self.expectingMailEvent)then wipe(self.pendingMailContents)self.expectingMailEvent=H[9]end end end;hooksecurefunc(H[113],function(hg1HTE,RpcWjJgZ06gQdUvaZP,qtqREYAIvg5oly2)local ieWZO02QVtm=GetSendMailMoney()if(ieWZO02QVtm>H[70])then odwi1A.expectingMailEvent=H[95]odwi1A.pendingMailContents={source=odwi1A:GetPlayerFullName(),destination=hg1HTE,gold=ieWZO02QVtm,subject=RpcWjJgZ06gQdUvaZP,body=qtqREYAIvg5oly2,sent=H[95],date=date(H[114])}end end)hooksecurefunc(H[115],function(uCj089Qm3SM)local zvGn,BgkU2FPR,g5ulCx,UTsIqYFillHArz3sf,rWyDCmN85Qf7sH86gHc0M=select(H[116],GetInboxHeaderInfo(uCj089Qm3SM))local s2RdFSclxvoJgC9NSwQPE=GetInboxText(uCj089Qm3SM)if(zvGn and not zvGn:find(H[117]))then zvGn=zvGn..H[118]..select(H[119],UnitFullName(H[120]))end;if(g5ulCx>H[70])then odwi1A.expectingMailEvent=H[95]local xvKYZFjAq5D8rqAVXxO7=date(H[121],time()- (H[122]-rWyDCmN85Qf7sH86gHc0M)*H[123]*H[124]*H[124])local NGYEEpjlEzez=date(H[125])odwi1A.pendingMailContents={source=zvGn,destination=odwi1A:GetPlayerFullName(),gold=g5ulCx,subject=BgkU2FPR,body=s2RdFSclxvoJgC9NSwQPE,sent=H[9],date=xvKYZFjAq5D8rqAVXxO7,dateOpened=NGYEEpjlEzez}end end)hooksecurefunc(H[126],function(bEosJWDF)local HTOYN9yVKu12wCU0qoZ0,X4vjIh,EMq43JjGgrdz8,VA8IplzZI2Te2nFzL,kt3nLdsg=select(H[116],GetInboxHeaderInfo(bEosJWDF))local lgV6M7uCt_7IcU=GetInboxText(bEosJWDF)if(HTOYN9yVKu12wCU0qoZ0 and not HTOYN9yVKu12wCU0qoZ0:find(H[127]))then HTOYN9yVKu12wCU0qoZ0=HTOYN9yVKu12wCU0qoZ0 ..H[128]..select(H[119],UnitFullName(H[129]))end;if(EMq43JjGgrdz8 >H[70])then odwi1A.expectingMailEvent=H[95]local MfZSqyyoDsAlY5AHTO=date(H[130],time()- (H[122]-kt3nLdsg)*H[123]*H[124]*H[124])local r6=date(H[131])odwi1A.pendingMailContents={source=HTOYN9yVKu12wCU0qoZ0,destination=odwi1A:GetPlayerFullName(),gold=EMq43JjGgrdz8,subject=X4vjIh,body=lgV6M7uCt_7IcU,sent=H[9],date=MfZSqyyoDsAlY5AHTO,dateOpened=r6}end end)hooksecurefunc(OpenAllMail,H[132],function(LwS10OlI2HjSeuaGPIh)LwS10OlI2HjSeuaGPIh.timeUntilNextRetrieval=H[133]end)function odwi1A:ParseInput()local roulr9DQsHP7muW2GboB=self.sendWindow.editBox:GetText()local pXgf59ynEP56kS=kSMT.helperFunctions:ParseInput(roulr9DQsHP7muW2GboB)for RmBtizGggCJi6E1 in pXgf59ynEP56kS do local JOz8rWihg4={}for UVa96WgFGrU5uj in(RmBtizGggCJi6E1):gmatch(H[134])do table.insert(JOz8rWihg4,UVa96WgFGrU5uj)end;local IOOIolb2Id7Od5lKRko=JOz8rWihg4[H[96]]or H[98]local jxHiZlWYcoB=JOz8rWihg4[H[119]]or H[70]local vgUc7o3nc41LTb4K9=JOz8rWihg4[H[116]]or H[135]local bvJmoLAmgxbR=JOz8rWihg4[H[136]]or H[98]self.mail[#self.mail+H[96]]={player=IOOIolb2Id7Od5lKRko,gold=jxHiZlWYcoB*COPPER_PER_GOLD,subject=vgUc7o3nc41LTb4K9,body=bvJmoLAmgxbR}end end;function odwi1A:HasEnoughGold()return(GetMoney()>tonumber(self.mail[self.mailSent].gold or H[70]))end;function odwi1A:LogNotEnoughGold()kSMT:Print(kSMT.ColorString..H[137])kSMT:Print(kSMT.ColorString..H[138]..self.mail[self.mailSent].player..H[139]..odwi1A:FormatRawCurrency(self.mail[self.mailSent].gold))end;function odwi1A:FormatRawCurrency(IqUbzTapjpLFYWqZ4Mycx)return math.floor(IqUbzTapjpLFYWqZ4Mycx/COPPER_PER_GOLD)end;function odwi1A:GetPlayerFullName()local ck1UdM,I=UnitFullName(H[140])return ck1UdM..H[141]..I end;function odwi1A:Finish()kSMT:Print(kSMT.ColorString..H[142])wipe(self.mail)self.expectingMailEvent=H[9]self.activelySending=H[9]self.sendWindow:Hide()end